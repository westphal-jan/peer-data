{"id": "1305.3011", "review": {"conference": "arxiv", "VERSION": "v1", "DATE_OF_SUBMISSION": "14-May-2013", "title": "Real Time Bid Optimization with Smooth Budget Delivery in Online Advertising", "abstract": "Today, billions of display ad impressions are purchased on a daily basis through a public auction hosted by real time bidding (RTB) exchanges. A decision has to be made for advertisers to submit a bid for each selected RTB ad request in milliseconds. Restricted by the budget, the goal is to buy a set of ad impressions to reach as many targeted users as possible. A desired action (conversion), advertiser specific, includes purchasing a product, filling out a form, signing up for emails, etc. In addition, advertisers typically prefer to spend their budget smoothly over the time in order to reach a wider range of audience accessible throughout a day and have a sustainable impact. However, since the conversions occur rarely and the occurrence feedback is normally delayed, it is very challenging to achieve both budget and performance goals at the same time. In this paper, we present an online approach to the smooth budget delivery while optimizing for the conversion performance. Our algorithm tries to select high quality impressions and adjust the bid price based on the prior performance distribution in an adaptive manner by distributing the budget optimally across time. Our experimental results from real advertising campaigns demonstrate the effectiveness of our proposed approach.", "histories": [["v1", "Tue, 14 May 2013 03:39:45 GMT  (332kb,D)", "http://arxiv.org/abs/1305.3011v1", null]], "reviews": [], "SUBJECTS": "cs.GT cs.LG", "authors": ["kuang-chih lee", "ali jalali", "ali dasdan"], "accepted": false, "id": "1305.3011"}, "pdf": {"name": "1305.3011.pdf", "metadata": {"source": "CRF", "title": "Real Time Bid Optimization with Smooth Budget Delivery in Online Advertising", "authors": ["Kuang-Chih Lee", "Ali Jalali", "Ali Dasdan"], "emails": ["klee@turn.com", "ajalali@turn.com", "adasdan@turn.com"], "sections": [{"heading": "1 Introduction", "text": "In recent years, the number of vehicles sold has increased many times over the previous year."}, {"heading": "2 Background and Related Work", "text": "In this section, we first formulate the problem of offer optimisation as linear online programming, then discuss the previous work in the literature on this subject and explain why these proposed solutions are not suitable for our problem of online offer optimisation in practice."}, {"heading": "2.1 Problem Setup", "text": "In fact, most of them are able to play by the rules that they have imposed on themselves, and they are able to play by the rules."}, {"heading": "2.2 Related Work", "text": "Eq. (1) is usually called linear online programming, and many practical problems, such as online bidding [8, 19], online keyword matching [21], online packaging [11], and online resource allocation [7], can be formulated in a similar way. However, we are not trying to provide a comprehensive overview of all related methods, as was the case in a number of papers [3, 6]. Instead, we summarize some representative methods below. Zhou et al. [21] models the budget optimization problem as an online ranking problem. They proposed a simple strategy to select high-quality ad requests based on an exponential function in terms of the budget period. Over time, the proposed algorithm will select a higher and higher quality of ad requests. However, this approach has an underlying assumption of unlimited system requirements; i.e. there is an unlimited number of ad requests in the RTB environment."}, {"heading": "3 Online Bid Optimization", "text": "In this section, we explain our method of online bid optimization. First, we review the smooth delivery constraint and explain how we adjust the spending ratio as each ad request comes in sequence, then we discuss how we can iteratively apply the spending information to ad requests and adjust their offer price to optimize the objective function.One should recognize two different campaign classes: (i) Flat CPM campaigns and (ii) Dynamic CPM campaigns. The main difference between the two types is that the first submits a flat price, while the second optimizes the offer price. Both must also decide whether to bid on an ad request. The measure of the quality of decision in flat CPM campaigns is typically either CTR or AR; while the measurement for dCPM is typically effective CPC (eCPC) or effective CePA (CePA) or CePA (CPA) that the difference is between CPA and CPA (CPA)."}, {"heading": "3.1 Smooth Delivery of Budget", "text": "In fact, it is that most of us are able to play by the rules. (...) It is not that they play by the rules. (...) It is not that they play by the rules. (...) It is not that they play by the rules. (...) It is not that they play by the rules. (...) It is not that they play by the rules. (...) It is not that they play by the rules. (...) It is that they play by the rules. \"(...) It is that they play by the rules.\" (...) It is that they play by the rules. \"(...) It is not that they play by the rules.\" (...) It is not that they play by the rules. \"(...) It is not that they play by the rules."}, {"heading": "3.2 Selection of High Quality Ad Requests - Flat CPM Campaigns", "text": "We consider two cases of flat CPM and dynamic CPM separately as the former, as opposed to the latter, we do not require an offer price calculation. For flat CPM campaigns, which always set a fixed offer price on RTB exchanges, the goal is simply to select a series of ad requests to take into account the current time span for delivery. As we do not know whether the current incoming ad request will ultimately cause a click or a conversion event during the time of offer optimization, the true value of the ad request is estimated by predicting its CTR or AR threshold using a statistical model. (t) = s (t) c).This number of inputs is implied by (we can only achieve) if we have a win rate."}, {"heading": "3.3 Selection of High Quality Ad Requests - Dynamic CPM Campaigns", "text": "For dCPM campaigns, which are free to change the offer price dynamically for each incoming ad request, the goal is to gain sufficient number of high quality impressions for lower cost. We first construct the offer price development, using the historical mean of ci in time slot to represent the statistics of good and bad impressions as discussed in the previous section. Then, starting from a basic offer price, we scale the offer price up or down if we take the current tempo price (t) into account appropriately to meet the budget commitment. We explain the second step in this subsection. For simplicity and without loss of universality, we will focus on CPA campaigns. Notice that the pace rate (t) controls the frequency of bidding; however, if the submitted offer price is not high enough, the campaign might not gain the impression in the public auction. On the other hand, if the cost per action is very high, then the second offer price may be very high."}, {"heading": "3.4 Estimation of CTR and AR", "text": "So far in the paper that we put our algorithm on top of the assumption that we have a good system to accurately estimate click rate (CTR) and action or conversion rate (AR). In this section we will describe how to make this estimate. Again, for simplicity and without loss of general interest, we will focus on AR.This estimate plays a crucial role in the offer optimization system for many reasons, including the implications. First, the estimated AR provides a quality assessment for each ad request to decide that action on this specific ad request. Second, the base price is multiplied on the estimated AR, which affects the cost of advertising."}, {"heading": "4 Practical Issues", "text": "In this section, we discuss some of the practical problems encountered in implementing our proposed supply optimization methodology and present our current solutions."}, {"heading": "4.1 Cold Start Problem", "text": "When a new campaign is launched, click or conversion events take some time to receive feedback to the system, and therefore there is insufficient information to perform CTR or AR estimates and offer optimization, known as the cold start problem and well researched in the literature, for example, see [10, 12, 18]. We pursue similar ideas to apply content features such as user and publisher advisory attributes to recommend a list of high-quality sites and target groups by deriving similarities between existing campaigns. In addition, during online offer optimization, a contextually epsilon-greedy strategy is implemented. If the incoming ad request is within one of these recommended publisher or target groups, a higher bid is placed. Otherwise, the ad request is randomly selected at a standard bid price to explore invisible sites and users. If the campaign gets older and more data accumulates, the online exploration model reduces and pre-optimizes the activity of the offer model."}, {"heading": "4.2 Prevention of Overspending", "text": "Since budget expenditure is controlled by incremental speed, several monitoring processes have been introduced to check daily total expenditure and interval expenditure frequently in each t timeframe. If total expenditure exceeds daily budget B, the campaign is stopped completely. If interval expenditure exceeds bt + \u043c, tendering activity is temporarily suspended until the next t + 1 timeframe."}, {"heading": "4.3 Distributed Architecture", "text": "Fig. 3 illustrates the simplified algorithmic flowchart for each individual ad request. Please note that in order to submit a bid, this workflow must occur in less than 50 milliseconds, and nearly a million ad requests must be processed in one second. Therefore, the entire quotation optimization is implemented and paralleled across many distributed data centers. The offline training process uses R, Pig, and Hadoop to generate hierarchical CTR and AR estimates, as well as campaign-specific prediction models for a large number of campaigns. The online process transfers incoming ad requests to many servers and evaluates the quotation price via a real-time message bus. Our proposed algorithm works very well in this distributed environment, and detailed experimental results are presented in the next section."}, {"heading": "5 Experimental Results", "text": "Our proposed quotation optimization framework has been implemented, tested and implemented in Turn, a leading DSP in the Internet advertising industry. In this section, we present simulation results from our staging environment to compare various budget management strategies, and we also show results from real-world campaigns that deliver large amounts of daily impressions to demonstrate overall performance improvement in terms of CPC or CPA performance metrics."}, {"heading": "5.1 Comparison of Pacing Strategies", "text": "In this section, we would like to show the simulation results of the budget step in our staging environment to ensure that our proposed framework for offering optimization does not violate, i.e. does not exceed or fall short of, the budgetary constraints set forth in Equation 1. For the simulation experiment, we run a flat pseudo-campaign CPM and assign a fixed amount of the daily budget. In each time frame, a series of ad requests are randomly generated. The simulation server then generates the bids based on the step speed and logs the winning impressions in the database. Figure 4 shows the ideal uniform expenditures and the actual expenditures using our uniform pacing strategy in Equation 6. We can find that the two lines are fairly close together and the average difference over all time frames is 0.56 dollars, which is less than 1% error compared to the daily budget. Figure 6 shows the ideal expenditures and the actual expenditures based on our performance in Equation 6. We can determine that the actual expenditures are average based on an 8. On a step performance strategy in the equation, the actual expenditure is 0.56%."}, {"heading": "5.2 Evaluation of Real Campaign Performance", "text": "In this section, we evaluate the overall framework for offering optimization in relation to two important classes of campaigns in our system: flat CPA campaigns and dynamic CPM campaigns. CPC and CPA metrics are used to evaluate flat CPA campaigns, because these metrics take into account both the total cost of impressions and the total number of clicks and conversions. The lower values for CPC and CPA metrics represent better performance. First, we report on the performance improvement in seven active flat CPM campaigns randomly selected across different ad categories. These seven campaigns were conducted based on our proposed approach and the existing base methodology. Each method was run for a week and finally, two weeks of data were collected for performance comparison. Our basic methodology is a simple adaptive feedback algorithm based on the current control algorithm of the PC."}, {"heading": "6 Conclusions", "text": "Because of the simplicity of our algorithm, our current implementation can handle up to one million ad requests per second, and we believe it can be scaled even further. Our experimental evaluation with simulated and real-world campaigns shows that our proposed algorithm provides consistent improvements to the standard performance metrics of CPC and CPA without undercutting or exceeding the speed. In the future, we want to integrate the ability of real-time analytics to optimize online across more attributes of users, publishers and advertisers."}, {"heading": "Acknowledgments", "text": "We would like to thank Xi Yang and Changgull Song for testing the entire framework for offering optimization in the staging."}], "references": [{"title": "Estimating rates of rare events with multiple hierarchies through scalable log-linear models", "author": ["D. Agarwal", "R. Agrawal", "R. Khanna"], "venue": "ACM SIGKDD Conf. on Knowledge Discovery and Data Mining,", "citeRegEx": "1", "shortCiteRegEx": "1", "year": 2010}, {"title": "Estimating rates of rare events at multiple resolutions", "author": ["D. Agarwal", "A. Broder", "D. Chakrabarti", "D. Diklic", "V. Josifovski", "M. Sayyadian"], "venue": "ACM SIGKDD Conf. on Knowledge Discovery and Data Mining,", "citeRegEx": "2", "shortCiteRegEx": "2", "year": 2007}, {"title": "A dynamic near-optimal algorithm for online linear programming", "author": ["S. Agrawal", "Z. Wang", "Y. Ye"], "venue": "arXiv preprint arXiv:0911.2974,", "citeRegEx": "3", "shortCiteRegEx": "3", "year": 2009}, {"title": "Scalable distributed inference of dynamic user interests for behavioral targeting", "author": ["A. Ahmed", "Y. Low", "M. Aly", "V. Josifovski", "A.J. Smola"], "venue": "ACM SIGKDD Conf. on Knowledge Discovery and Data Mining,", "citeRegEx": "4", "shortCiteRegEx": "4", "year": 2011}, {"title": "Dynamic pricing with limited supply", "author": ["M. Babaioff", "S. Dughmi", "R. Kleinberg", "A. Slivkins"], "venue": "The 13th ACM Conference on Electronic Commerce,", "citeRegEx": "5", "shortCiteRegEx": "5", "year": 2012}, {"title": "Online auctions and generalized secretary problems", "author": ["M. Babaioff", "N. Immorlica", "D. Kempe", "R. Kleinberg"], "venue": "ACM SIGecom Exchanges,", "citeRegEx": "6", "shortCiteRegEx": "6", "year": 2008}, {"title": "Online allocation of display ads with smooth delivery", "author": ["A. Bhalgat", "J. Feldman", "V. Mirrokni"], "venue": "ACM SIGKDD Conf. on Knowledge Discovery and Data Mining,", "citeRegEx": "7", "shortCiteRegEx": "7", "year": 2012}, {"title": "Dynamics of bid optimization in online advertisement aucions", "author": ["C. Borgs", "J. Chayes", "O. Etesami", "N. Immorlica", "K. Jain", "M. Mahdian"], "venue": "Proceeding of the 16th international conference on World Wide Web,", "citeRegEx": "8", "shortCiteRegEx": "8", "year": 2007}, {"title": "Classification of proxy labeled examples for marketing segment generation", "author": ["D. Cerrato", "R. Jones", "A. Gupta"], "venue": "ACM SIGKDD Conf. on Knowledge Discovery and Data Mining,", "citeRegEx": "9", "shortCiteRegEx": "9", "year": 2011}, {"title": "Multimedia features for click prediction of new ads in display advertising", "author": ["H. Cheng", "R. Zwol", "J. Azimi", "E. Manavoglu", "R. Zhang", "Y. Zhou", "V. Navalpakkam"], "venue": "ACM SIGKDD Conf. on Knowledge Discovery and Data Mining,", "citeRegEx": "10", "shortCiteRegEx": "10", "year": 2012}, {"title": "Online stochastic packing applied to display ad allocation. ESA\u201910", "author": ["J. Feldman", "M. Hezinger", "N. Korula", "V.S. Mirrokni"], "venue": "Proceedings of the 18th annual European conference on Algorithms: Part I,", "citeRegEx": "11", "shortCiteRegEx": "11", "year": 2010}, {"title": "Focused matrix factorization for audience selection in display advertising", "author": ["B. Kanagal", "A. Ahmed", "S. Pandey", "V. Josifovski", "L. Garcia-Pueyo", "J. Yuan"], "venue": "IEEE International Conference on Data Engineering,", "citeRegEx": "12", "shortCiteRegEx": "12", "year": 2013}, {"title": "Estimating conversion rate in display advertising from past performance data", "author": ["K.-C. Lee", "B. Orten", "A. Dasdan", "W. Li"], "venue": "ACM SIGKDD Conf. on Knowledge Discovery and Data Mining,", "citeRegEx": "13", "shortCiteRegEx": "13", "year": 2012}, {"title": "Collaborative prediction and ranking with non-random missing data", "author": ["B.M. Marlin", "R.S. Zemel"], "venue": null, "citeRegEx": "14", "shortCiteRegEx": "14", "year": 2009}, {"title": "Response prediction using collaborative filtering with hierarchies and side-information", "author": ["A. Menon", "K. Chitrapura", "S. Garg", "D. Agarwal", "N. Kota"], "venue": "ACM SIGKDD Conf. on Knowledge Discovery and Data Mining,", "citeRegEx": "15", "shortCiteRegEx": "15", "year": 2011}, {"title": "Bid optimizing and inventory scoring in targeted online advertising", "author": ["C. Perlich", "B. Dalessandro"], "venue": "ACM SIGKDD Conf. on Knowledge Discovery and Data Mining,", "citeRegEx": "16", "shortCiteRegEx": "16", "year": 2012}, {"title": "Predicting clicks: estimating the click-through rate for new ads", "author": ["M. Richardson", "E. Dominowska", "R. Ragno"], "venue": null, "citeRegEx": "17", "shortCiteRegEx": "17", "year": 2007}, {"title": "Methods and metrics for cold-start recommendations", "author": ["A.I. Schein", "A. Popescul", "L.H. Ungar", "D. Pennock"], "venue": "ACM SIGIR Conf. on Information Retrieval,", "citeRegEx": "18", "shortCiteRegEx": "18", "year": 2002}, {"title": "Joint optimization of bid and budget allocation in sponsored search", "author": ["W. Zhanbg", "Y. Zhang", "B. Gao", "Y. Yu", "X. Yuan", "T.-Y. Liu"], "venue": "ACM SIGKDD Conf. on Knowledge Discovery and Data Mining,", "citeRegEx": "19", "shortCiteRegEx": "19", "year": 2012}, {"title": "Fast computation of posterior mode in multi-level hierarchical models", "author": ["L. Zhang", "D. Agarwal"], "venue": "Neural Information Processing Systems Foundation,", "citeRegEx": "20", "shortCiteRegEx": "20", "year": 2008}, {"title": "Budget constrained bidding in keyword auctions and online knapsack problems", "author": ["Y. Zhou", "D. Chakrabarty", "R. Lukose"], "venue": "Proceeding of the 17th international conference on World Wide Web,", "citeRegEx": "21", "shortCiteRegEx": "21", "year": 2008}], "referenceMentions": [{"referenceID": 12, "context": "Demand-side platforms (DSPs) offer such a solution called real time bid optimization [13, 16] to help advertisers find the optimal bid value for each ad request in milliseconds close to a million times per second.", "startOffset": 85, "endOffset": 93}, {"referenceID": 15, "context": "Demand-side platforms (DSPs) offer such a solution called real time bid optimization [13, 16] to help advertisers find the optimal bid value for each ad request in milliseconds close to a million times per second.", "startOffset": 85, "endOffset": 93}, {"referenceID": 7, "context": "(1) is typically called online linear programming, and many practical problems, such as online bidding [8, 19], online keyword matching [21], online packing [11], and online resource allocation [7], can be formulated in the similar form.", "startOffset": 103, "endOffset": 110}, {"referenceID": 18, "context": "(1) is typically called online linear programming, and many practical problems, such as online bidding [8, 19], online keyword matching [21], online packing [11], and online resource allocation [7], can be formulated in the similar form.", "startOffset": 103, "endOffset": 110}, {"referenceID": 20, "context": "(1) is typically called online linear programming, and many practical problems, such as online bidding [8, 19], online keyword matching [21], online packing [11], and online resource allocation [7], can be formulated in the similar form.", "startOffset": 136, "endOffset": 140}, {"referenceID": 10, "context": "(1) is typically called online linear programming, and many practical problems, such as online bidding [8, 19], online keyword matching [21], online packing [11], and online resource allocation [7], can be formulated in the similar form.", "startOffset": 157, "endOffset": 161}, {"referenceID": 6, "context": "(1) is typically called online linear programming, and many practical problems, such as online bidding [8, 19], online keyword matching [21], online packing [11], and online resource allocation [7], can be formulated in the similar form.", "startOffset": 194, "endOffset": 197}, {"referenceID": 2, "context": "However, we do not attempt to provide a comprehensive survey of all the related methods as this has been in a number of papers [3, 6].", "startOffset": 127, "endOffset": 133}, {"referenceID": 5, "context": "However, we do not attempt to provide a comprehensive survey of all the related methods as this has been in a number of papers [3, 6].", "startOffset": 127, "endOffset": 133}, {"referenceID": 20, "context": "[21] modeled the budget constrained bidding optimization problem as an online knapsack problem.", "startOffset": 0, "endOffset": 4}, {"referenceID": 4, "context": "[5] formulated the problem of dynamic bidding price using multi-armed bandit framework, and then applied the strategy of upper confidence bound to explore the optimal price of online transactions.", "startOffset": 0, "endOffset": 3}, {"referenceID": 2, "context": "[3] proposed an general online linear programming algorithm to solve many practical online problems.", "startOffset": 0, "endOffset": 3}, {"referenceID": 0, "context": "Since conversions are rare events, hierarchical structure of features for each triplet combination of (user, publisher, advertiser) have been commonly used to smooth and impute the AR for the leaf nodes that do not have enough conversion events [1, 2, 13, 14, 20].", "startOffset": 245, "endOffset": 263}, {"referenceID": 1, "context": "Since conversions are rare events, hierarchical structure of features for each triplet combination of (user, publisher, advertiser) have been commonly used to smooth and impute the AR for the leaf nodes that do not have enough conversion events [1, 2, 13, 14, 20].", "startOffset": 245, "endOffset": 263}, {"referenceID": 12, "context": "Since conversions are rare events, hierarchical structure of features for each triplet combination of (user, publisher, advertiser) have been commonly used to smooth and impute the AR for the leaf nodes that do not have enough conversion events [1, 2, 13, 14, 20].", "startOffset": 245, "endOffset": 263}, {"referenceID": 13, "context": "Since conversions are rare events, hierarchical structure of features for each triplet combination of (user, publisher, advertiser) have been commonly used to smooth and impute the AR for the leaf nodes that do not have enough conversion events [1, 2, 13, 14, 20].", "startOffset": 245, "endOffset": 263}, {"referenceID": 19, "context": "Since conversions are rare events, hierarchical structure of features for each triplet combination of (user, publisher, advertiser) have been commonly used to smooth and impute the AR for the leaf nodes that do not have enough conversion events [1, 2, 13, 14, 20].", "startOffset": 245, "endOffset": 263}, {"referenceID": 3, "context": ", see [4, 9, 16].", "startOffset": 6, "endOffset": 16}, {"referenceID": 8, "context": ", see [4, 9, 16].", "startOffset": 6, "endOffset": 16}, {"referenceID": 15, "context": ", see [4, 9, 16].", "startOffset": 6, "endOffset": 16}, {"referenceID": 12, "context": ", logistic regressions [13, 17] and collaborative filtering [15], are used to combine multiple AR estimates from different levels in the hierarchy or user clusters to produce a final boosted estimate.", "startOffset": 23, "endOffset": 31}, {"referenceID": 16, "context": ", logistic regressions [13, 17] and collaborative filtering [15], are used to combine multiple AR estimates from different levels in the hierarchy or user clusters to produce a final boosted estimate.", "startOffset": 23, "endOffset": 31}, {"referenceID": 14, "context": ", logistic regressions [13, 17] and collaborative filtering [15], are used to combine multiple AR estimates from different levels in the hierarchy or user clusters to produce a final boosted estimate.", "startOffset": 60, "endOffset": 64}, {"referenceID": 12, "context": "We use the methodology introduced in [13] and make some improvements on the top of that.", "startOffset": 37, "endOffset": 41}, {"referenceID": 0, "context": "After constructing all three hierarchies with initial raw estimates, we employ a smoothing algorithm similar to the one discussed in [1, 2] to adjust the raw estimates on different levels based on the similarity and closeness of (user, publisher, advertiser) triplet on the hierarchy trees.", "startOffset": 133, "endOffset": 139}, {"referenceID": 1, "context": "After constructing all three hierarchies with initial raw estimates, we employ a smoothing algorithm similar to the one discussed in [1, 2] to adjust the raw estimates on different levels based on the similarity and closeness of (user, publisher, advertiser) triplet on the hierarchy trees.", "startOffset": 133, "endOffset": 139}, {"referenceID": 9, "context": ", see [10, 12, 18].", "startOffset": 6, "endOffset": 18}, {"referenceID": 11, "context": ", see [10, 12, 18].", "startOffset": 6, "endOffset": 18}, {"referenceID": 17, "context": ", see [10, 12, 18].", "startOffset": 6, "endOffset": 18}], "year": 2013, "abstractText": "Today, billions of display ad impressions are purchased on a daily basis through a public auction hosted by real time bidding (RTB) exchanges. A decision has to be made for advertisers to submit a bid for each selected RTB ad request in milliseconds. Restricted by the budget, the goal is to buy a set of ad impressions to reach as many targeted users as possible. A desired action (conversion), advertiser specific, includes purchasing a product, filling out a form, signing up for emails, etc. In addition, advertisers typically prefer to spend their budget smoothly over the time in order to reach a wider range of audience accessible throughout a day and have a sustainable impact. However, since the conversions occur rarely and the occurrence feedback is normally delayed, it is very challenging to achieve both budget and performance goals at the same time. In this paper, we present an online approach to the smooth budget delivery while optimizing for the conversion performance. Our algorithm tries to select high quality impressions and adjust the bid price based on the prior performance distribution in an adaptive manner by distributing the budget optimally across time. Our experimental results from real advertising campaigns demonstrate the effectiveness of our proposed approach.", "creator": "LaTeX with hyperref package"}}}