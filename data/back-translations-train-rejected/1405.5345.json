{"id": "1405.5345", "review": {"conference": "arxiv", "VERSION": "v1", "DATE_OF_SUBMISSION": "21-May-2014", "title": "HATP: An HTN Planner for Robotics", "abstract": "Hierarchical Task Network (HTN) planning is a popular approach that cuts down on the classical planning search space by relying on a given hierarchical library of domain control knowledge. This provides an intuitive methodology for specifying high-level instructions on how robots and agents should perform tasks, while also giving the planner enough flexibility to choose the lower-level steps and their ordering. In this paper we present the HATP (Hierarchical Agent-based Task Planner) planning framework which extends the traditional HTN planning domain representation and semantics by making them more suitable for roboticists, and treating agents as \"first class\" entities in the language. The former is achieved by allowing \"social rules\" to be defined which specify what behaviour is acceptable/unacceptable by the agents/robots in the domain, and interleaving planning with geometric reasoning in order to validate online -with respect to a detailed geometric 3D world- the human/robot actions currently being pursued by HATP.", "histories": [["v1", "Wed, 21 May 2014 09:32:15 GMT  (170kb,D)", "https://arxiv.org/abs/1405.5345v1", "2nd ICAPS Workshop on Planning and Robotics, PlanRob 2014"], ["v2", "Thu, 12 Jun 2014 13:53:15 GMT  (170kb,D)", "http://arxiv.org/abs/1405.5345v2", "2nd ICAPS Workshop on Planning and Robotics, PlanRob 2014"]], "COMMENTS": "2nd ICAPS Workshop on Planning and Robotics, PlanRob 2014", "reviews": [], "SUBJECTS": "cs.RO cs.AI", "authors": ["rapha\\\"el lallement", "lavindra de silva", "rachid alami"], "accepted": false, "id": "1405.5345"}, "pdf": {"name": "1405.5345.pdf", "metadata": {"source": "CRF", "title": "HATP: An HTN Planner for Robotics", "authors": ["Rapha\u00ebl Lallement", "Lavindra de Silva", "Rachid Alami"], "emails": [], "sections": [{"heading": "Introduction", "text": "The intuitive hierarchical representation used by such planners allows for the often available expert knowledge about a domain that can be included in the search process with relative ease. Indeed, this guide could be abstract ATP working techniques that describe in detail how a task, such as cleaning a table full of different types of objects, should be performed by the robot, with sufficient flexibility about the more detailed steps and states - e.g. the final locations of objects on the shelf. In practice, the inclusion of such ATP control knowledge makes HTN planning faster than classical planning, which is particularly important when it comes to dealing with robots, how they react to environmental changes with other robots, and more importantly, humans.In this paper we describe the HATP (Hierarchical Agentbased Task Planner) HTN planners and show how it is particular.1This work was carried out within the EU ARCAS project (http: / prot.eu / financial.ca)."}, {"heading": "HTN Planning", "text": "In fact, it is the case that one is able to find a solution that is able to find a solution that is able to find a solution, and that is able to find a solution that is able to find a solution, that is able to find a solution that is able to find a solution, and that is able to find a solution that is able to find a solution, that is able to find a solution that is able to find a solution, and that is able to find a solution that is able to find a solution, that is able to find a solution that is able to find a solution, that is able to find a solution."}, {"heading": "Features of HATP", "text": "In this section, we present our own coding in HATP of the Dock-Worker Robots section (Nau, Ghallab and Traverso 2004). In this section, there is a robot (R1) that can move and transport containers, and two crane agents (K1 and K2) that can lift and lift containers. In addition, there are two locations (L1 and L2) with two piles each (P11 and P12 at L1 and P21 and P22 at L2) that can hold containers. The aim is to place the two containers C1 and C2 on piles P21 and P22 respectively."}, {"heading": "World state representation", "text": "This year, it has reached the point where it will be able to put itself at the top of the list."}, {"heading": "Domain representation", "text": "In fact, you have to be able to go to another world, where you can go to another world, where you have to go to another world, where you have to go to another world, where you have to go to another world, where you have to go to another world, where you have to go to another world, where you have to go to another world, where you have to go to another world, where you can go to another world."}, {"heading": "Plan production", "text": "In this context, it should be noted that the persons mentioned are persons who are not able to take care of persons who are not able to comply with the rules. In this case, it is that they are able to comply with the rules. In this case, it is that they are not able to comply with the rules. In this case, it is that they are not able to comply with the rules. In this case, it is that they are able to comply with the rules. In this case, it is that they are not able to comply with the rules."}, {"heading": "HATP in an HRI context", "text": "The meaning of socially interactive robots is defined in (Fong, Nourbakhsh, and Dautenhahn 2003), which states that they must \"act as partners, peers, or assistants, which means that they must have a degree of adaptability and flexibility to advance interaction with a wide range of people.\" (Klein et al. 2004), which are implemented in what they have called \"Ten Challenges for Human Robot Teams.\" We believe task planners can address several of these challenges. In this case, the robot should be able to advance interaction with a wide range of people. (1) Signal in which tasks it can / will participate; (2) Act in a predictable manner to ensure the human understanding of what it is doing; (3) Publish its status and intentions; (4) Negotiate tasks with its human partner in order to determine and decide roles to perform the tasks; (5) Fulfill social skills."}, {"heading": "The planning and execution architecture", "text": "Both HATP and the GTP are part of the larger LAAS robot architecture (Fleury, Herrb and Chatila 1997; Alami et al. 2011), which consists of many components and uses the motion and manipulation planner Move3D (Sime \u0301 on, Laumond and Lamiraux 2001) to represent the version of the real world of the robot in 3D and to perform geometric task planning. By means of various sensors, the robot can also update its 3D state in real time. To this end, a tag-based stereo vision system is used for object identification and localization, and a Kinect (Microsoft) sensor for locating and tracking humans. The execution controller - the Procedural Reasoning System (PRS) (Ingrand et al. 1996) - is in fact responsible for calling up HATP when a task needs to be planned and located, and also the execution of the resulting primitive solution by HATP modules, by providing different interfaces to HATP editors that need to be planned and localized."}, {"heading": "Conclusion and future work", "text": "In this paper, we have described the HATP-HTN planner, which has been extensively used for practical robot applications over many years (Alili, Alami and Montreuil 2009; Guitton, Warnier and Alami 2012; Warnier et al. 2012; de Silva, Pandey and Alami 2013; de Silva et al. 2014). We have focused on describing how HATP is not only suitable for HTN planning, but also for planning in the context of human robot interaction, in a multi-agent setting consisting of several humans and robots. This was based on two main extensions of HATP: the ability to deal with user-defined \"social rules\" that determine what is appropriate behavior for agents in the domain; and linking the HATP planning algorithm with geometric planning algorithms from the robotics community. We have also described the benefits of the user-friendly syntax and HTN manipulators of our own ATP codices using ATP-HTN."}], "references": [{"title": "An architecture for autonomy", "author": ["R. Alami", "R. Chatila", "S. Fleury", "M. Ghallab", "F. Ingrand"], "venue": "Internatonal Journal of Robotics Research, Special Issue on Integrated Architectures for Robot Control and Programming, volume 17, 315\u2013337.", "citeRegEx": "Alami et al\\.,? 1998", "shortCiteRegEx": "Alami et al\\.", "year": 1998}, {"title": "When the robot considers the human.", "author": ["R. Alami", "M. Warnier", "J. Guitton", "S. Lemaignan", "E.A. Sisbot"], "venue": "In Proceedings of the 15th International Symposium on Robotics Research", "citeRegEx": "Alami et al\\.,? \\Q2011\\E", "shortCiteRegEx": "Alami et al\\.", "year": 2011}, {"title": "A Task Planner for an Autonomous Social Robot", "author": ["S. Alili", "R. Alami", "V. Montreuil"], "venue": "Distributed Autonomous Robotic Systems 8, 335\u2013344. Springer Berlin Heidelberg.", "citeRegEx": "Alili et al\\.,? 2009", "shortCiteRegEx": "Alili et al\\.", "year": 2009}, {"title": "Towards combining HTN planning and geometric task planning", "author": ["L. de Silva", "A.K. Pandey", "M. Gharbi", "R. Alami"], "venue": "In RSS Workshop on Combined Robot Motion Planning and AI Planning for Practical Applications", "citeRegEx": "Silva et al\\.,? \\Q2013\\E", "shortCiteRegEx": "Silva et al\\.", "year": 2013}, {"title": "A new approach to combined symbolic-geometric", "author": ["L. de Silva", "M. Gharbi", "A.K. Pandey", "R. Alami"], "venue": null, "citeRegEx": "Silva et al\\.,? \\Q2014\\E", "shortCiteRegEx": "Silva et al\\.", "year": 2014}, {"title": "An interface for interleaved symbolic-geometric planning and backtracking", "author": ["L. de Silva", "A.K. Pandey", "R. Alami"], "venue": "In IROS,", "citeRegEx": "Silva et al\\.,? \\Q2013\\E", "shortCiteRegEx": "Silva et al\\.", "year": 2013}, {"title": "Semantic Attachments for DomainIndependent Planning Systems", "author": ["C. Dornhege", "P. Eyerich", "T. Keller", "S. Tr\u00fcg", "M. Brenner", "B. Nebel"], "venue": "ICAPS, 114\u2013121.", "citeRegEx": "Dornhege et al\\.,? 2009a", "shortCiteRegEx": "Dornhege et al\\.", "year": 2009}, {"title": "Integrating Symbolic and Geometric Planning for Mobile Manipulation", "author": ["C. Dornhege", "M. Gissler", "M. Teschner", "B. Nebel"], "venue": "IEEE International Workshop on Safety, Security and Rescue Robotics, 1\u20136.", "citeRegEx": "Dornhege et al\\.,? 2009b", "shortCiteRegEx": "Dornhege et al\\.", "year": 2009}, {"title": "UMCP: A sound and complete procedure for hierarchical task-network planning", "author": ["K. Erol", "J. Hendler", "D. Nau"], "venue": "International Conf. on AI Planning Systems, 249\u2013 254.", "citeRegEx": "Erol et al\\.,? 1994", "shortCiteRegEx": "Erol et al\\.", "year": 1994}, {"title": "Genom: A Tool for the Specification and the Implementation of Operating Modules in a Distributed Robot Architecture", "author": ["S. Fleury", "M. Herrb", "R. Chatila"], "venue": "IROS-97, 842\u2013848.", "citeRegEx": "Fleury et al\\.,? 1997", "shortCiteRegEx": "Fleury et al\\.", "year": 1997}, {"title": "A survey of socially interactive robots", "author": ["T. Fong", "I.R. Nourbakhsh", "K. Dautenhahn"], "venue": "Robotics and Autonomous Systems 42(3-4):143\u2013166.", "citeRegEx": "Fong et al\\.,? 2003", "shortCiteRegEx": "Fong et al\\.", "year": 2003}, {"title": "Belief Management for HRI Planning", "author": ["J. Guitton", "M. Warnier", "R. Alami"], "venue": "Workshop on Belief change, Non-monotonic reasoning and Conflict resolution.", "citeRegEx": "Guitton et al\\.,? 2012", "shortCiteRegEx": "Guitton et al\\.", "year": 2012}, {"title": "PRS: A High Level Supervision and Control Language for Autonomous Mobile Robots", "author": ["F.F. Ingrand", "R. Chatila", "R. Alami", "F. Robert"], "venue": "ICRA, 43\u201349.", "citeRegEx": "Ingrand et al\\.,? 1996", "shortCiteRegEx": "Ingrand et al\\.", "year": 1996}, {"title": "Combining task and path planning for a humanoid two-arm robotic system", "author": ["L. Karlsson", "J. Bidot", "F. Lagriffoul", "A. Saffiotti", "U. Hillenbrand", "F. Schmidt"], "venue": "Workshop on Combining Task and Motion Planning for RealWorld Applications, 114\u2013122.", "citeRegEx": "Karlsson et al\\.,? 2012", "shortCiteRegEx": "Karlsson et al\\.", "year": 2012}, {"title": "Ten Challenges for Making Automation a \u201cTeam Player\u201d in Joint Human-Agent Activity", "author": ["G. Klein", "D.D. Woods", "J.M. Bradshaw", "R.R. Hoffman", "P.J. Feltovich"], "venue": "IEEE Intelligent Systems 19(6):91\u201395.", "citeRegEx": "Klein et al\\.,? 2004", "shortCiteRegEx": "Klein et al\\.", "year": 2004}, {"title": "Constraint propagation on interval bounds for dealing with geometric backtracking", "author": ["F. Lagriffoul", "D. Dimitrov", "A. Saffiotti", "L. Karlsson"], "venue": "IROS, 957\u2013964.", "citeRegEx": "Lagriffoul et al\\.,? 2012", "shortCiteRegEx": "Lagriffoul et al\\.", "year": 2012}, {"title": "SHOP: Simple hierarchical ordered planner", "author": ["D. Nau", "Y. Cao", "A. Lotem", "H. Mu\u00f1oz-Avila"], "venue": "IJCAI, 968\u2013 973.", "citeRegEx": "Nau et al\\.,? 1999", "shortCiteRegEx": "Nau et al\\.", "year": 1999}, {"title": "SHOP2: An HTN Planning System", "author": ["D. Nau", "T.-C. Au", "O. Ilghami", "U. Kuter", "W. Murdock", "D. Wu"], "venue": "JAIR, volume 20, 379\u2013404.", "citeRegEx": "Nau et al\\.,? 2003", "shortCiteRegEx": "Nau et al\\.", "year": 2003}, {"title": "Automated Planning: Theory & Practice", "author": ["D. Nau", "M. Ghallab", "P. Traverso"], "venue": "San Francisco, CA, USA: Morgan Kaufmann Publishers Inc.", "citeRegEx": "Nau et al\\.,? 2004", "shortCiteRegEx": "Nau et al\\.", "year": 2004}, {"title": "Towards planning human-robot interactive manipulation tasks: Task dependent and human oriented autonomous selection of grasp and placement", "author": ["A.K. Pandey", "J.-P. Saut", "D. Sidobre", "R. Alami"], "venue": "IEEE RAS EMBS International Conference on Biomedical Robotics and Biomecha-", "citeRegEx": "Pandey et al\\.,? 2012", "shortCiteRegEx": "Pandey et al\\.", "year": 2012}, {"title": "Move3D: a generic platform for path planning", "author": ["T. Sim\u00e9on", "J.-P. Laumond", "F. Lamiraux"], "venue": "4th International Symposium on Assembly and Task Planning, 25\u2013", "citeRegEx": "Sim\u00e9on et al\\.,? 2001", "shortCiteRegEx": "Sim\u00e9on et al\\.", "year": 2001}, {"title": "Project Planning Using a Hierarchic Nonlinear Planner", "author": ["A. Tate"], "venue": "Department of AI Research Report No. 25, University of Edinburgh.", "citeRegEx": "Tate,? 1976", "shortCiteRegEx": "Tate", "year": 1976}, {"title": "When the robot puts itself in your shoes", "author": ["M. Warnier", "J. Guitton", "S. Lemaignan", "R. Alami"], "venue": "Managing and exploiting human and robot beliefs. In RO-MAN, 948\u2013 954.", "citeRegEx": "Warnier et al\\.,? 2012", "shortCiteRegEx": "Warnier et al\\.", "year": 2012}], "referenceMentions": [{"referenceID": 16, "context": "HATP is based on SHOP (Nau et al. 1999), but unlike this planner and other HTN planners such as Nonlin (Tate 1976), SHOP2 (Nau et al.", "startOffset": 22, "endOffset": 39}, {"referenceID": 21, "context": "1999), but unlike this planner and other HTN planners such as Nonlin (Tate 1976), SHOP2 (Nau et al.", "startOffset": 69, "endOffset": 80}, {"referenceID": 17, "context": "1999), but unlike this planner and other HTN planners such as Nonlin (Tate 1976), SHOP2 (Nau et al. 2003) and UMCP (Erol, Hendler, and Nau 1994), HATP offers a user-friendly domain representation language inspired by popular programming languages, making it easier for roboticists, and indeed computer scientists alike, to become quickly acquainted with the syntax and semantics.", "startOffset": 88, "endOffset": 105}, {"referenceID": 16, "context": "This is also highlighted as a feature in the SHOP (Nau et al. 1999) planner, on which HATP is based.", "startOffset": 50, "endOffset": 67}, {"referenceID": 16, "context": "Introducing \u201ctrue\u201d partially-ordered planning into HATP is left as future work: the algorithms are not obvious as we want to have the ability to use evaluable predicates in preconditions, for which maintaining the complete state of the world at each step of the planning process is the obvious solution (Nau et al. 1999).", "startOffset": 303, "endOffset": 320}, {"referenceID": 17, "context": "HATP is able to find the least-cost primitive solution that solves the goal task(s) at hand, as done for example in (Nau et al. 2003).", "startOffset": 116, "endOffset": 133}, {"referenceID": 1, "context": "one per agent in the domain, and adds causal links between streams for synchronisation (Alami et al. 2011).", "startOffset": 87, "endOffset": 106}, {"referenceID": 14, "context": "(Klein et al. 2004) implemented that in what they called \u201cten challenges for human robot teamwork\u201d.", "startOffset": 0, "endOffset": 19}, {"referenceID": 14, "context": "In this case the robot should be able to (Klein et al. 2004): (1) signal in what tasks it can/wants to participate; (2) act in a predictable way to ensure human understanding of what it is doing; (3) publicise its status and its intentions; (4) negotiate on tasks with its human partner in order to determine roles and decide how to perform the tasks; and (5) deal with social conventions, as well as its human partner\u2019s abilities and preferences.", "startOffset": 41, "endOffset": 60}, {"referenceID": 19, "context": "Aptly called Geometric Task Planner (GTP) (Pandey et al. 2012), this planner liberates", "startOffset": 42, "endOffset": 62}, {"referenceID": 7, "context": "Using this particular planner for forming the link with HATP also makes the interface proposed different to other interfaces in the literature, such as (Dornhege et al. 2009b; 2009a; Karlsson et al. 2012; Lagriffoul et al. 2012).", "startOffset": 152, "endOffset": 228}, {"referenceID": 13, "context": "Using this particular planner for forming the link with HATP also makes the interface proposed different to other interfaces in the literature, such as (Dornhege et al. 2009b; 2009a; Karlsson et al. 2012; Lagriffoul et al. 2012).", "startOffset": 152, "endOffset": 228}, {"referenceID": 15, "context": "Using this particular planner for forming the link with HATP also makes the interface proposed different to other interfaces in the literature, such as (Dornhege et al. 2009b; 2009a; Karlsson et al. 2012; Lagriffoul et al. 2012).", "startOffset": 152, "endOffset": 228}, {"referenceID": 1, "context": "Both HATP and the GTP are part of the larger LAAS robotics architecture (Fleury, Herrb, and Chatila 1997; Alami et al. 2011).", "startOffset": 72, "endOffset": 124}, {"referenceID": 12, "context": "The execution controller\u2014the Procedural Reasoning System (PRS)(Ingrand et al. 1996)\u2014 is responsible for invoking HATP when a task needs to be planned, and also executing the resulting primitive solution returned by HATP by invoking various actuators via the interface provided by Genom (Fleury, Herrb, and Chatila 1997) to the low-level controllers, which is also the framework used to wrap them into individual well-defined modules.", "startOffset": 62, "endOffset": 83}, {"referenceID": 0, "context": "We have described in this paper the HATP HTN planner, which has been used extensively for practical robotics applications in the LAAS architecture (Alami et al. 1998) over many years (Alili, Alami, and Montreuil 2009; Guitton, Warnier, and Alami 2012; Warnier et al.", "startOffset": 147, "endOffset": 166}, {"referenceID": 22, "context": "1998) over many years (Alili, Alami, and Montreuil 2009; Guitton, Warnier, and Alami 2012; Warnier et al. 2012; de Silva, Pandey, and Alami 2013; de Silva et al. 2014).", "startOffset": 22, "endOffset": 167}, {"referenceID": 1, "context": "There has also been some initial efforts toward extending HATP to support separately modelling the beliefs of the different agents in the domain (Alami et al. 2011).", "startOffset": 145, "endOffset": 164}, {"referenceID": 16, "context": "Other interesting work on HATP that is currently underway is formalising its domain representation language to show its relation with more traditional representations such as that used by the SHOP planner (Nau et al. 1999).", "startOffset": 205, "endOffset": 222}], "year": 2014, "abstractText": "Hierarchical Task Network (HTN) planning is a popular approach that cuts down on the classical planning search space by relying on a given hierarchical library of domain control knowledge. This provides an intuitive methodology for specifying high-level instructions on how robots and agents should perform tasks, while also giving the planner enough flexibility to choose the lower-level steps and their ordering. In this paper we present the HATP (Hierarchical Agentbased Task Planner) planning framework which extends the traditional HTN planning domain representation and semantics by making them more suitable for roboticists, and treating agents as \u201cfirst class\u201d entities in the language. The former is achieved by allowing \u201csocial rules\u201d to be defined which specify what behaviour is acceptable/unacceptable by the agents/robots in the domain, and interleaving planning with geometric reasoning in order to validate online\u2013with respect to a detailed geometric 3D world\u2013the human/robot actions currently being pursued by HATP.1", "creator": "TeX"}}}