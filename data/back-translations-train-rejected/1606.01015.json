{"id": "1606.01015", "review": {"conference": "arxiv", "VERSION": "v1", "DATE_OF_SUBMISSION": "3-Jun-2016", "title": "Selecting the Best Player Formation for Corner-Kick Situations Based on Bayes' Estimation", "abstract": "In the domain of the Soccer simulation 2D league of the RoboCup project, appropriate player positioning against a given opponent team is an important factor of soccer team performance. This work proposes a model which decides the strategy that should be applied regarding a particular opponent team. This task can be realized by applying preliminary a learning phase where the model determines the most effective strategies against clusters of opponent teams. The model determines the best strategies by using sequential Bayes' estimators. As a first trial of the system, the proposed model is used to determine the association of player formations against opponent teams in the particular situation of corner-kick. The implemented model shows satisfying abilities to compare player formations that are similar to each other in terms of performance and determines the right ranking even by running a decent number of simulation games.", "histories": [["v1", "Fri, 3 Jun 2016 09:31:13 GMT  (2350kb,D)", "http://arxiv.org/abs/1606.01015v1", "12 pages, 7 figures, RoboCup Symposium 2016"]], "COMMENTS": "12 pages, 7 figures, RoboCup Symposium 2016", "reviews": [], "SUBJECTS": "cs.AI", "authors": ["jordan henrio", "thomas henn", "tomoharu nakashima", "hidehisa akiyama"], "accepted": false, "id": "1606.01015"}, "pdf": {"name": "1606.01015.pdf", "metadata": {"source": "CRF", "title": "Selecting the Best Player Formation for Corner-Kick Situations Based on Bayes\u2019 Estimation", "authors": ["Jordan Henrio", "Thomas Henn", "Tomoharu Nakashima", "Hidehisa Akiyama"], "emails": ["jordan.henrio@cs.osakafu-u.ac.jp", "thomas.henn@cs.osakafu-u.ac.jp", "tomoharu.nakashima@kis.osakafu-u.ac.jp", "akym@fukuoka-u.ac.jp"], "sections": [{"heading": null, "text": "Keywords: football simulation \u00b7 strategy selection \u00b7 estimation of Bayes \u00b7 distance of the earth mover \u00b7 hierarchical clustering"}, {"heading": "1 Introduction", "text": "One of the most important aspects in the development of a team in the RoboCup 2D Football Simulation League is the development of an effective strategy or method that outperforms the opposing teams. Player formation is one of the most important aspects in strategy design, as it sets the guidelines for decision-making during the game. Player formations are usually designed for a specific opposing team. However, this task is cumbersome as the search space can be very large depending on the game structure to which the formation is associated. In addition, selecting the best strategy in relation to unknown opponents is one of the most difficult tasks in this league. On the other hand, it is not necessary to create a specialized player distribution against each opponent, as it is possible that some of them are similar Xiv: 160 6.01 015v 1 [cs.A I] 3 Jun 2"}, {"heading": "2 Henrio, Henn, Nakashima and Akiyama", "text": "This study proposes a model that summarizes similar opposing teams during a learning phase and determines the most effective player formation for each cluster based on sequential estimates by Bayes. Subsequently, during a real-life game, the system classifies the current opponent among the identified clusters and applies the strategy that was deemed to be the best for the resulting classification."}, {"heading": "2 Related Work", "text": "The task of identifying the opponent's strategy in order to apply an appropriate countermeasure has already been addressed in previous research; for example, in the work of Visser et al. [1] and Dru \ufffd cker et al. [2] a system is proposed to detect the opponent's formations and then apply a counterformation, by using an artificial neural network that is able to classify data between 16 formation classes and then apply the counterformation specially designed for each class. Classified data is a representation of the field as a grid that expresses the formation of the opponent. Riley and Veloso [3] also proposed a method of dividing the opponent by means of a grid representation of the field. However, the grid is used to displace and locate objects rather than just observing the structures of the formations, and they used a decision tree instead of neural networks. However, this paper focuses on how to select the best player formation in relation to a particular cluster, not the question and cluster structure."}, {"heading": "3 Proposed Model", "text": "As a solution, we propose to use a simple model as shown in Fig.1. For this reason, the proposed model consists of two modules, Learner and Select.3 The learner part works in offline mode, taking a series of clusters as input parameters. Clusters are achieved by applying hierarchical clusters to the distribution of opposing teams before the learner works. Afterwards, its role is to learn against each cluster by looking at the strategies that have already been developed, which are the most appropriate. This decision is made by performing statistical analysis of simulated games by applying the different strategies as explained in Section 5. Once the learner is able to decide which strategy we should apply in relation to a particular group of opposing teams, the cluster strategy pair is inserted into a database.The selector part works in the special strategy system by determining the current opponent in online test mode."}, {"heading": "4 Opponents Clustering", "text": "It is not the first time that the EU Commission has taken such a step."}, {"heading": "4.1 Team distributions", "text": "On a general level, the system groups opposing teams according to similarities in player formation. In order to understand the player formation, the distribution of players is used. In this essay, offensive corner ball formations were designed with respect to the defensive formation of the opponent. Therefore, this work proposes to build such a player distribution, which represents the defense of the opponent by taking into account the position of the players above the corner ball area. In order to represent the opposing player distributions, the system designs a division of the cornball area of the field, as shown in Fig.2. This division is completely arbitrary, but shows how the opposing players distribute in this area during their defensive cornball situations."}, {"heading": "4 Henrio, Henn, Nakashima and Akiyama", "text": "Of the 18 blocks in the area of interest (the so-called attack third), one additional block is considered, which represents the remaining part of the field. Fig.2, for example, shows eleven opponents in their defensive corner kick formation. If analyzing this defensive player formation, the resulting distribution would be written as follows: [1, 0, 1, 0, 0, 0, 1, 2, 1, 1, 0, 1, 1, 0, 0, 0, 2]. If we look at a rougher division of the field, the player distributions would tend to be the same regardless of the opposing team. Consider, for example, the extreme case where the grid consists of only one cell. Thus, each team would be represented by the one-dimensional integer vector. Conversely, a finer division would clearly distinguish the player distributions from each other."}, {"heading": "4.2 Clustering process", "text": "Once all the distributions of the opponents are determined, the degree of similarity between each possible pair is analyzed to generate a distance matrix. Distances between the distributions are calculated using the Earth Mover's Distance (EMD) method [5]. EMD provides a pseudo-metric measure between two probability distributions. It can handle vectors of different dimensions and weighted characteristics. The measurement process is expressed as a transportation problem where one distribution is the supplier and the other the customer. Costs between supplier and customer depend on the distance between the characteristics of the two distributions, which are calculated by using a ground distance such as the Euclidean distance. This is an advantage of using EMD, as we can assess how strongly two formations of players differ by using a ground distance that is useful in the case of football fields. Also, the ability to consider weighted characteristics could develop into a cluster advantage in future work, since it is possible to determine the distance between certain formations before assigning the larger ones."}, {"heading": "5 Strategy Selection", "text": "It is not the first time that the EU Commission has taken such a step."}, {"heading": "5.1 Performance evaluation of player formations", "text": "In order to select the most effective strategy from a given set of strategies, the performance of the player formations in terms of a performance metric is required. For example, the probability of success of an attack after a corner kick, as shown in Fig.3, can be used as a performance metric. However, the RoboCup 2D football simulation league introduces randomness in the way players interact with the environment. Each player receives imperfect and loud information from its virtual sensors. As a result, two football games with exactly the same teams can differ considerably. Therefore, assessing the positioning performance of players is a challenging task. In attempting to estimate a success metric, there is a large variance. Therefore, it is necessary to perform a large number of football games to assess the performance of a player formation with sufficient precision. To sort each player formation in relation to the others, the mean difference between the probability of successful corner kick distributions of each player formation is taken into account."}, {"heading": "5.2 Sequential Bayes\u2019 estimation", "text": "Bayes \"sentence reads as follows in (1):"}, {"heading": "6 Henrio, Henn, Nakashima and Akiyama", "text": "The purpose of the Bayes Theorem is to update the value of the parameter to be estimated, in our case the probability of success of an attack after a corner kick. D corresponds to the new data extracted at the moment of application of the theorem. D corresponds to the new data extracted at the moment of application of the theorem. - The purpose of the Bayes Theorem is to update the previous belief in the value of the parameter to be estimated, in our case the probability of success of an attack after a corner kick. D corresponds to the new data extracted at the moment of application of the theorem. - The purpose of the Bayes Theorem is to update the previous belief in the value of the game using new data."}, {"heading": "5.3 Player formations comparisons", "text": "A difference distribution is used to determine whether one player formation is better than another or whether additional simulations are required to be sure. 7 For this purpose, the system starts calculating the highest density interval (HDI) [7], which is the interval that comprises most of the mass of the distribution (say 95%), so that each point within the interval has a higher probability than any point outside the interval. To compare the performance of two player distributions in the event of attack (say distribution 1 and distribution 2), the probability of success of distribution 1 and distribution 2 is considered p1 or p2, respectively. Suppose that a posterior distribution is obtained for each of these probabilities. In this case, it is possible to obtain a distribution of the difference of p1 \u2212 p2 by calculating all possible values from p1 \u2212 p2 if the difference is p1 \u2212 p2. HDI is used instead of the posterior PDI to simplify the calculation of this calculation."}, {"heading": "6 Experiments", "text": "It is not the first time that the EU Commission has taken such a step."}, {"heading": "6.1 Opponents clustering", "text": "The first experiments involved 12 teams participating in the Japan Open competitions, as well as two versions of Agent2D [8], which does not participate in any competitions but is used by most participants as a starting point for team development. Three clusters were created through hierarchical clustering; the second cluster is the most populous of the three clusters because it represents the teams that use a similar (if not the same) player formation to Agent2D, which is likely to be their starting point for implementation; on the other hand, the third cluster only included Team Ri-one B 2015, which is too far away to be merged with other clusters."}, {"heading": "6.2 Association learning", "text": "In order to test the skills of the learner, we used three corner kick formations that were already implemented in our team. In addition, a special script was used. This script performs simulations in which only corner kick situations are performed. Generally, 37 corner kicks are performed during a simulation, but this number may vary from run to run due to randomness in simulations. In the first experiment, 10 simulations per strategy were simulated before comparing pairs of player formations and a beta distribution with parameters 2 and 2 (i.e. beta (2, 2) was used to represent our previous beliefs."}, {"heading": "8 Henrio, Henn, Nakashima and Akiyama", "text": "The results of our first experiment are shown in Fig.4, the probability density functions of each player formation against each cluster. It can be seen that each cluster is associated with a different player formation. Except for the pair (1, 3) for the first cluster (Fig.4a), all pairs can be easily classified. Then, the most effective player formation can be determined with certainty. However, the HDI of almost all distributions is quite large, so no exact probability of success can be assumed. In order to improve the estimations of the probability of success of the player formations, a second experiment was conducted and simulations were created based on blocks of 60 games. That is, 60 games for each player formation were performed each time when the performance is compared. Fig.5 shows the resulting probability density functions of the player formation. As expected, the curves were finer and tended to center on the true probability of their respective player formation. Also, the pairs that were difficult to distinguish after the first experiment, can now be easily ranked on the second player formation table."}, {"heading": "6.3 System validation", "text": "The proposed method in this thesis estimates the probability of success of offensive player formations against given opposing teams. In other words, the parameter \u03b8 of a binomial distribution is estimated. However, it is legitimate to wonder about the accuracy of the estimations.9 The experiment in this section sets aside player formations and evaluates how well our method can distinguish probability distributions with parameters that are close to each other. In addition, it estimates how many simulations are required to draw trustworthy conclusions about the ranking of offensive player formations with respect to their probability of success. Player formations are replaced by a series of randomly generated parameters. Then, a simulation of offensive corner kicks is replaced by using a particular formation by n sampling from a binomial distribution parameter parameterized by one of the randomly generated default values. Note that the system knows the generated parameters and is able to rank them. Then, as in the parameter estimation method, by adding the previously estimated number of overgenerated systems to the following estimates."}, {"heading": "10 Henrio, Henn, Nakashima and Akiyama", "text": "The system, however, has difficulty finding pairs with a difference of less than 04.4.Fig.7 shows the performance evaluation based on n = 60 samples per simulation for each distribution. In fact, increasing this number improves the accuracy since the system is able to accurately classify pairs with a difference of at least 0.03, requiring a maximum of eighty samples. These two experiments show that increasing the number of samples increases the accuracy. On the other hand, since the data the player receives is distorted and due to the rarity of corner kick events during a single game, a deviation of 4% of the probability of success between two formations is not so significant. Therefore, in the specific case of selecting the best offensive corner kick strategy, it is sufficient to assess the parameters of the formations by performing only 20 simulations.11"}, {"heading": "6.4 Cluster validation", "text": "It might also be interesting to look at the performance of the individual player formations in the clusters. While some teams were considered to be similar in terms of defensive player formations, it does not rule out the possibility of differences between the teams of the same cluster, since the results of the actions are not influenced solely by the positioning of the players; the skills of the right players are an equally important factor. To check the quality of association for each opposing team, a different alternative of the algorithm was used, which is almost identical to the standard version, but instead of trying to estimate the effectiveness of each player formation against the clusters, the system estimates them individually against each team. Table 2 summarizes the teams whose most effective strategy is not the same as that against the cluster to which they belong. Remember: Cluster 1 counts three teams and Cluster 2 counts ten teams. Regarding Team Ri-one A 2015 (Cluster 1), Distribution 1 seems to be better than Distribution 2, which is associated with their cluster."}, {"heading": "7 Conclusion", "text": "As part of this research, a system has been developed that can select the best player formation in corner ball situations within a group of teams. This decision is made by performing sequential Bayes estimates based on the results of multiple games. Instead of creating effective offensive player formations, the model displays the best we already have in our hands.The results are satisfactory as the system is able to rate player formations with a probability of success of at least 4% by running only 20 simulations. In addition, it is possible to increase the system's accuracy by making more data available, but this would significantly increase learning time."}, {"heading": "12 Henrio, Henn, Nakashima and Akiyama", "text": "This is why such an error rate is acceptable. On the other hand, there is the possibility of differences within the clusters. As explained above, if the difference between the player formations is only 4%, there is in fact no real difference in the final results of a game due to the rare occurrence of corner kicks executed during a standard game. However, if a player formation is not designed to be the best and is actually three times better than the one selected, differences in final results can be observed. These differences are due to the fact that during the clustering process only the positions of the opponents are taken into account and not the defensive abilities of the team. Then, another cluster criterion can be considered for better performance. While the first attempts can use selected player formations for corner kicks only for each situation of the game, it is possible to have a criterion for clustering and a measure of success for data observations. Furthermore, it is possible to expand this situation from multiple formations to formation in each situation."}], "references": [{"title": "Recognizing formations in opponent teams", "author": ["Ubbo Visser", "Christian Dr\u00fccker", "Sebastian H\u00fcbner", "Esko Schmidt", "Hans-Georg Weland"], "venue": "RoboCup", "citeRegEx": "1", "shortCiteRegEx": "1", "year": 2000}, {"title": "On behavior classification in adversarial environments", "author": ["Patrick Riley", "Manuela Veloso"], "venue": "Distributed Autonomous Robotic Systems", "citeRegEx": "3", "shortCiteRegEx": "3", "year": 2000}, {"title": "Plays as effective multiagent plans enabling opponent-adaptive play selection", "author": ["Michael Bowling", "Brett Browning", "Manuela Veloso"], "venue": "Proceedings of International Conference on Automated Planning and Scheduling (ICAPS\u2019", "citeRegEx": "4", "shortCiteRegEx": "4", "year": 2004}, {"title": "The earth mover\u2019s distance as a metric for image retrieval, volume 40", "author": ["Rubner Yossi", "Tomasi Carlo", "J. Guibas Leonidas"], "venue": "International Journal of Computer Vision,", "citeRegEx": "5", "shortCiteRegEx": "5", "year": 2000}, {"title": "An introduction to the Beta-Binomial model", "author": ["Dan Navarro", "Amy Perfors"], "venue": "COMPSCI 3016: Computational Cognitive Science,", "citeRegEx": "6", "shortCiteRegEx": "6", "year": 2012}, {"title": "Doing Bayesian Data Analysis a Tutorial Introduction with R and BUGS", "author": ["John K. Kruschke"], "venue": null, "citeRegEx": "7", "shortCiteRegEx": "7", "year": 2010}, {"title": "Helios base: An open source package for the robocup soccer 2D simulation", "author": ["Hidehisa Akiyama", "Tomoharu Nakashima"], "venue": "Proc. of RoboCup Symposium", "citeRegEx": "8", "shortCiteRegEx": "8", "year": 2013}], "referenceMentions": [{"referenceID": 0, "context": "[1] and Dr\u00fccker et al.", "startOffset": 0, "endOffset": 3}, {"referenceID": 1, "context": "Riley and Veloso [3] also proposed a method performing opponent classification by using a grid representation of the field.", "startOffset": 17, "endOffset": 20}, {"referenceID": 2, "context": "[4].", "startOffset": 0, "endOffset": 3}, {"referenceID": 0, "context": "By analyzing this defense player formation, the resulting distribution would be written as the following 19-dimensional integer vector: [1, 0, 1, 0, 0, 0, 1, 2, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 2].", "startOffset": 136, "endOffset": 193}, {"referenceID": 0, "context": "By analyzing this defense player formation, the resulting distribution would be written as the following 19-dimensional integer vector: [1, 0, 1, 0, 0, 0, 1, 2, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 2].", "startOffset": 136, "endOffset": 193}, {"referenceID": 0, "context": "By analyzing this defense player formation, the resulting distribution would be written as the following 19-dimensional integer vector: [1, 0, 1, 0, 0, 0, 1, 2, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 2].", "startOffset": 136, "endOffset": 193}, {"referenceID": 0, "context": "By analyzing this defense player formation, the resulting distribution would be written as the following 19-dimensional integer vector: [1, 0, 1, 0, 0, 0, 1, 2, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 2].", "startOffset": 136, "endOffset": 193}, {"referenceID": 0, "context": "By analyzing this defense player formation, the resulting distribution would be written as the following 19-dimensional integer vector: [1, 0, 1, 0, 0, 0, 1, 2, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 2].", "startOffset": 136, "endOffset": 193}, {"referenceID": 0, "context": "By analyzing this defense player formation, the resulting distribution would be written as the following 19-dimensional integer vector: [1, 0, 1, 0, 0, 0, 1, 2, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 2].", "startOffset": 136, "endOffset": 193}, {"referenceID": 0, "context": "By analyzing this defense player formation, the resulting distribution would be written as the following 19-dimensional integer vector: [1, 0, 1, 0, 0, 0, 1, 2, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 2].", "startOffset": 136, "endOffset": 193}, {"referenceID": 3, "context": "The distances between distributions are computed by using the Earth Mover\u2019s Distance (EMD) [5] method.", "startOffset": 91, "endOffset": 94}, {"referenceID": 4, "context": "Navarro and Perfors [6] have demonstrated that the posterior distribution of a beta-binomial distribution is also a beta-distribution.", "startOffset": 20, "endOffset": 23}, {"referenceID": 5, "context": "For this purpose, the system begins by computing the Highest Density Interval (HDI) [7] which is the interval that spans most of the mass of the distribution (say 95%) such that every point inside the interval has a higher probability than any point outside the interval.", "startOffset": 84, "endOffset": 87}, {"referenceID": 6, "context": "First experiments involved 12 teams participating in Japan Open competitions, as well as two versions of Agent2D [8] which does not participate in any competitions, but are used by most of the participants as the starting point of team development.", "startOffset": 113, "endOffset": 116}], "year": 2016, "abstractText": "In the domain of RoboCup 2D soccer simulation league, appropriate player positioning against a given opponent team is an important factor of soccer team performance. This work proposes a model which decides the strategy that should be applied regarding a particular opponent team. This task can be realized by applying preliminary a learning phase where the model determines the most effective strategies against clusters of opponent teams. The model determines the best strategies by using sequential Bayes\u2019 estimators. As a first trial of the system, the proposed model is used to determine the association of player formations against opponent teams in the particular situation of cornerkick. The implemented model shows satisfying abilities to compare player formations that are similar to each other in terms of performance and determines the right ranking even by running a decent number of simulation games.", "creator": "LaTeX with hyperref package"}}}