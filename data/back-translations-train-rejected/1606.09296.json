{"id": "1606.09296", "review": {"conference": "arxiv", "VERSION": "v1", "DATE_OF_SUBMISSION": "29-Jun-2016", "title": "How Many Folders Do You Really Need?", "abstract": "Email classification is still a mostly manual task. Consequently, most Web mail users never define a single folder. Recently however, automatic classification offering the same categories to all users has started to appear in some Web mail clients, such as AOL or Gmail. We adopt this approach, rather than previous (unsuccessful) personalized approaches because of the change in the nature of consumer email traffic, which is now dominated by (non-spam) machine-generated email. We propose here a novel approach for (1) automatically distinguishing between personal and machine-generated email and (2) classifying messages into latent categories, without requiring users to have defined any folder. We report how we have discovered that a set of 6 \"latent\" categories (one for human- and the others for machine-generated messages) can explain a significant portion of email traffic. We describe in details the steps involved in building a Web-scale email categorization system, from the collection of ground-truth labels, the selection of features to the training of models. Experimental evaluation was performed on more than 500 billion messages received during a period of six months by users of Yahoo mail service, who elected to be part of such research studies. Our system achieved precision and recall rates close to 90% and the latent categories we discovered were shown to cover 70% of both email traffic and email search queries. We believe that these results pave the way for a change of approach in the Web mail industry, and could support the invention of new large-scale email discovery paradigms that had not been possible before.", "histories": [["v1", "Wed, 29 Jun 2016 21:35:24 GMT  (234kb,D)", "http://arxiv.org/abs/1606.09296v1", "10 pages, 12 figures, Proceedings of the 23rd ACM International Conference on Information and Knowledge Management (CIKM 2014), Shanghai, China"]], "COMMENTS": "10 pages, 12 figures, Proceedings of the 23rd ACM International Conference on Information and Knowledge Management (CIKM 2014), Shanghai, China", "reviews": [], "SUBJECTS": "cs.AI cs.HC cs.SI", "authors": ["mihajlo grbovic", "guy halawi", "zohar karnin", "yoelle maarek"], "accepted": false, "id": "1606.09296"}, "pdf": {"name": "1606.09296.pdf", "metadata": {"source": "CRF", "title": "How Many Folders Do You Really Need? Classifying Email into a Handful of Categories", "authors": ["Mihajlo Grbovic", "Guy Halawi", "Zohar Karnin", "Yoelle Maarek"], "emails": ["zkarnin}@yahoo-inc.com,", "yoelle@ymail.com", "permissions@acm.org."], "sections": [{"heading": null, "text": "Categories and Subject Lines H.4.3 [Information Systems Applications]: Communications Applications - Electronic EmailGeneral Terms Information Systems; Algorithms; ExperimentationKeywords Email Classification; Machine-generated Email; LDAPermission to make digital or printed copies of all or part of this work for personal or commercial use is granted without charge, provided that copies are not made or distributed for profit or commercial purposes, and that copies bear this notice and the full quote on the first page. Copyrights for components of this work owned by others than ACM must be respected. Abstraction on credit is permitted."}, {"heading": "1. INTRODUCTION", "text": "In fact, most of them are able to determine for themselves what they want to do to save the world."}, {"heading": "2. DISCOVERING LATENT CATEGORIES", "text": "Next, we define email categorization as the task of \"assigning a Boolean value to each pair (dj, ci)\" D \u00b7 C, where D is a domain of documents \"(here e-mail messages)\" and C is a set of predefined categories. \"Previous research on personalized e-mail classifications was each defined and populated with a C per user by reusing the user's existing folders, see [15, 7, 2, 10]. The approach we are advocating here is to adopt a single C for all users. However, C can be defined in many different categories: categories can refer to message significance (see Gmail Priority Inbox2), number of recipients (see AOL Bulk Senders), or types (see popular folders like Amazon, Facebook) (see Gmail Labels Smart Labels2 Social, Promotion, Updates, Forums, Finance) for example."}, {"heading": "3. MODELING EMAIL", "text": "A key challenge in any classification task is modeling the data and determining the degree of granularity of the data points, i.e. the objects to be classified. An option is to consider each individual message as a single data point, along with various characteristics extracted from the message header and body. A second approach is to aggregate messages at higher levels, for example at the SMTP address level [11] (referred to as \"sender\") or at the mail domain level (easily extracted from the SMTP address by truncating the prefix to the sign \"@.\") This latter approach not only helps with problems of economy, but also allows for much more efficient processing without expensive body analysis and feature extraction. This is crucial in the scale of webmail when large amounts of messages need to be classified at delivery time. We explain how we use a combination of both approaches in Section 5. Feature extraction and different levels of aggregation are described in the rest of this section."}, {"heading": "3.1 Extracting Features", "text": "In fact, most of them are able to decide for themselves how they want to."}, {"heading": "3.2 Email Aggregation Levels", "text": "We consider three levels of aggregation, by message, sender and domain. In order to choose the right level of aggregation for our system, we consider what we lose and what we gain by aggregating to the next level, starting from the level of email message. We consider several dimensions: generalization loss, data size and classification scalability. Generalization loss: Aggregation of messages offers some risks when we put messages by aggregation into the same class that should have been mapped into different categories. A typical error that occurs when aggregation occurs after the sender, when a particular sender changes its behavior. It happens, for example, when a sender (such as a recruiter, financial broker or a travel agency) sends machine-generated messages to customers in 90% of cases, and personal messages otherwise. We refer to this problem as the machine-human mixture. In some rare cases, we observed a different type of loss, which we call the multiple companies \"loss type of messages,\" where one company has more of address than another, where one sender is one company."}, {"heading": "4. TRAINING DATA", "text": "A key challenge in classifying webmails is to create a labeled training dataset given the inherent size of the data and privacy issues. We will look at three types of labeling techniques: manual, heuristic and automatic, which we will discuss below. As labels, we used our 6 latent categories, as well as human and machine labels, to distinguish between human and machine generated messages."}, {"heading": "4.1 Manual labeling", "text": "Manual labeling involves human editors assigning labels to specific examples, and this method has some clear weaknesses. Given the sensitivity of data, even users who have agreed to review their emails can only have a limited number of responsible editors involved, making it more difficult for multiple editors to access the same data, which is a must given the nature of the task. In fact, when looking at a confusion matrix, we observed many inconsistencies between editors, for example, between shopping and finance or travel and finance. Nevertheless, we created such a data set, called Dman, by providing 5 paid editors with a pool of about 18,000 messages from about 14,000 senders, which included several messages per sender, with editors \"jobs partially overlapping. Nearly 400 contradictory labels were generated, which were resolved by additional editors\" intervention."}, {"heading": "4.2 Heuristic labeling", "text": "heuristic labeling consists of applying heuristic rules derived from the knowledge of the world. < > Such labeling achieves high precision, but is limited in coverage. We mostly used this type of labeling to distinguish between human and machine senders. A key challenge here is the fact that SMTP domain information is insufficient. In fact, large web mail services are not only used by humans. Nonspam machine-generated messages can come from domains such as gmail.com, hotmail.com, or yahoo.com, even for small distribution volumes. Conversely, domains such as amazon.com or ibm.com, intelligen.com, or hp.com are associated with machines and personal communications of corporate employees. We focused on corporate domains, as they are the main source of errors between human and machine labels, with the following simple heuristics."}, {"heading": "4.3 Automatic labeling", "text": "For automatic labeling, we use two types of techniques, folder-based majority and LDA votes. Folder-based majority votes (see algorithm 1) use custom folders to obtain basic truths for senders. There are hundreds of folders that refer to \"shopping,\" \"finance,\" or \"travel,\" etc. There are many fewer folders than senders that we have manually labeled near 600 folders that carry the meaning of our latent categories, and let the folders for senders be selected. A subset of folders labeled is shown in Table 5."}, {"heading": "5. CLASSIFICATION MECHANISM", "text": "In fact, most people are able to move to another world in which they are in the position in which they find themselves."}, {"heading": "6. EXPERIMENTS AND EVALUATION", "text": "In fact, most of them are able to determine for themselves what they want and what they want."}, {"heading": "7. SIGNIFICANCE OF RESULTS", "text": "In this section, we discuss the importance and potential impact of our email categorization system. We estimated the reach of latent categories in two different ways. First, we measured the reach of e-mail traffic by estimating the percentage of e-mail messages mapped in one of our categories. Then, we measured how these categories cover the e-mail search by manually categorizing a sample of e-mail searches. The percentages listed in the e-mail traffic column in Table 9 represent the number of messages that are classified as topic X divided by the total number of messages. For the scope of the searches, a team of professional editors manually marked 2,500 frequent queries. To ensure privacy, we selected only queries that were used by multiple users, and in particular, avoided queries that are unique to a single user. The percentages used in the search column in Table 9 overall queries are classified by the number of queries that are unique to a single user, the queries that are divided by the number of queries that are listed as total queries."}, {"heading": "8. CONCLUSIONS AND FUTURE WORK", "text": "One of our most important contributions is the identification of categories common to all users. We discovered latent categories through a large-scale analysis of user folder data that highlighted the distinction between human and machine-generated e-mail messages. Our categories cover more than 70% of e-mail traffic and e-mail searches, and our classification mechanism achieved accuracy and recall rates of almost 90%. These results are achieved through an extremely scalable online system that assigns a category to incoming messages to each user, including those that have never defined a folder. We believe that this study holds a lot of promise for this area, as it shows that e-mail classification can be applied to production systems on the scale of web mails. Discussion about how categories should be exposed to users outside the scope of this work, if at all, is clearly a critical challenge."}, {"heading": "Acknowledgements", "text": "We are grateful to Andrej Broder for inspiring this work. Yehuda Koren and Roman Sandler spent many hours manipulating thousands of folders. We owe it to Edo Liberty, who discovered the power of machine-generated emails, and Nemanja Djuric, who conducted LDA experiments during his internship at Yahoo. After all, this work would not have been possible without the constant support of Yahoo's mailing and product teams."}, {"heading": "9. REFERENCES", "text": "[1] Nir Ailon, Zohar S. Karnin, Edo Liberty, and YoelleMaarek. Threading machine generated email. In Proceedings of WSDM '2013, pages 405-414, New York, NY, USA, 2013. [2] Inge Alberts and Dominic Forest. Email pragmatics and automatic classification: A study in the organizational context. [4] David M Blei, Andrew Y Ng, and Michael I Jordan. Latent dirichlet allocation. JMLR, 3: 993-1022, 2003. [5] Avrim Blum and Tom Mitchell. Combining."}], "references": [{"title": "Threading machine generated email", "author": ["Nir Ailon", "Zohar S. Karnin", "Edo Liberty", "Yoelle Maarek"], "venue": "In Proceedings of WSDM\u20192013,", "citeRegEx": "1", "shortCiteRegEx": "1", "year": 2013}, {"title": "Email pragmatics and automatic classification: A study", "author": ["Inge Alberts", "Dominic Forest"], "venue": "in the organizational context. JASIST,", "citeRegEx": "2", "shortCiteRegEx": "2", "year": 2012}, {"title": "Keystroke level analysis of email message organization", "author": ["Olle B\u00e4lter"], "venue": "In Proceedings of CHI\u20192000,", "citeRegEx": "3", "shortCiteRegEx": "3", "year": 2000}, {"title": "Combining labeled and unlabeled data with co-training", "author": ["Avrim Blum", "Tom Mitchell"], "venue": "In Proceedings of COLT\u20191998,", "citeRegEx": "5", "shortCiteRegEx": "5", "year": 1998}, {"title": "Scalable internet: Resource discovery", "author": ["C.M. Bowman", "P.B. Danzig", "U. Manber", "M.F. Schwartz"], "venue": "Communications of the ACM,", "citeRegEx": "6", "shortCiteRegEx": "6", "year": 1994}, {"title": "Challenges of the email domain for text classification", "author": ["Jake D Brutlag", "Christopher Meek"], "venue": "In Proceedings of ICML\u20192000,", "citeRegEx": "7", "shortCiteRegEx": "7", "year": 2000}, {"title": "Mapreduce: simplified data processing on large clusters", "author": ["Jeffrey Dean", "Sanjay Ghemawat"], "venue": "Communications of the ACM,", "citeRegEx": "8", "shortCiteRegEx": "8", "year": 2008}, {"title": "Online learning for Latent Dirichlet Allocation", "author": ["Matthew Hoffman", "Francis R Bach", "David M Blei"], "venue": "In Advances in Neural Information Processing Systems,", "citeRegEx": "9", "shortCiteRegEx": "9", "year": 2010}, {"title": "Email classification with co-training", "author": ["Svetlana Kiritchenko", "Stan Matwin"], "venue": "In Proceedings of the 2011 Conference of the Center for Advanced Studies on Collaborative Research,", "citeRegEx": "10", "shortCiteRegEx": "10", "year": 2011}, {"title": "The enron corpus: A new dataset for email classification research", "author": ["Bryan Klimt", "Yiming Yang"], "venue": "In Proceedings of ECML\u20192004,", "citeRegEx": "12", "shortCiteRegEx": "12", "year": 2004}, {"title": "Automatically tagging email by leveraging other users\u2019 folders", "author": ["Yehuda Koren", "Edo Liberty", "Yoelle Maarek", "Roman Sandler"], "venue": "In Proceedings of KDD\u20192011,", "citeRegEx": "13", "shortCiteRegEx": "13", "year": 2011}, {"title": "Sparse online learning via truncated gradient", "author": ["John Langford", "Lihong Li", "Tong Zhang"], "venue": "JMLR, 10:777\u2013801,", "citeRegEx": "14", "shortCiteRegEx": "14", "year": 2009}, {"title": "Na\u0131ve-bayes vs. rule-learning in classification of email", "author": ["Jefferson Provost"], "venue": "University of Texas at Austin,", "citeRegEx": "15", "shortCiteRegEx": "15", "year": 1999}, {"title": "Machine learning in automated text categorization", "author": ["Fabrizio Sebastiani"], "venue": "ACM Computing Surveys,", "citeRegEx": "16", "shortCiteRegEx": "16", "year": 2002}], "referenceMentions": [{"referenceID": 9, "context": "In the last decade, most attempts at automating this task have consisted in mimicking each individual user\u2019s personal classification habits [12].", "startOffset": 140, "endOffset": 144}, {"referenceID": 10, "context": "It was shown in [13] that 70% of users do not create even a single folder.", "startOffset": 16, "endOffset": 20}, {"referenceID": 10, "context": "in [13], have analyzed popular folders, in order to identify not just a few but several thousand possible common classes or \u201ctags\u201d.", "startOffset": 3, "endOffset": 7}, {"referenceID": 10, "context": "This work explores a middle ground direction, where we propose, like in [13], to derive high level-classes from mail data, and especially folders data provided by the minority of users who do define folders.", "startOffset": 72, "endOffset": 76}, {"referenceID": 0, "context": "stated that machine-generated mail represent more than 60% of Yahoo mail traffic, [1].", "startOffset": 82, "endOffset": 85}, {"referenceID": 13, "context": "DISCOVERING LATENT CATEGORIES Following [16], we define email categorization as the task of \u201cassigning a Boolean value to each pair (dj , ci) \u2208 D \u00d7 C, where D is a domain of documents\u201d (here mail messages) \u201cand C is a set of predefined categories.", "startOffset": 40, "endOffset": 44}, {"referenceID": 12, "context": "\u201d Previous research work on personalized email classification used one C set per user and populated it by reusing the user\u2019s existing folders, see [15, 7, 2, 10].", "startOffset": 147, "endOffset": 161}, {"referenceID": 5, "context": "\u201d Previous research work on personalized email classification used one C set per user and populated it by reusing the user\u2019s existing folders, see [15, 7, 2, 10].", "startOffset": 147, "endOffset": 161}, {"referenceID": 1, "context": "\u201d Previous research work on personalized email classification used one C set per user and populated it by reusing the user\u2019s existing folders, see [15, 7, 2, 10].", "startOffset": 147, "endOffset": 161}, {"referenceID": 8, "context": "\u201d Previous research work on personalized email classification used one C set per user and populated it by reusing the user\u2019s existing folders, see [15, 7, 2, 10].", "startOffset": 147, "endOffset": 161}, {"referenceID": 2, "context": "Indeed, it has been shown that, with more than 20 folders, folder-based discovery becomes less effective than search [3].", "startOffset": 117, "endOffset": 120}, {"referenceID": 7, "context": "To this effect, we trained an online LDA model [9].", "startOffset": 47, "endOffset": 50}, {"referenceID": 3, "context": "We also applied a semi-supervised approach similar to co-training [5], in order to further increase our heuristic dataset, remove false positives, and most importantly obtain a less skewed sample.", "startOffset": 66, "endOffset": 69}, {"referenceID": 6, "context": "In our experiments, as well as in the production system, we leveraged the MapReduce paradigm [8], implemented in", "startOffset": 93, "endOffset": 96}, {"referenceID": 11, "context": "Specifically, we utilized the highly scalable Vowpal Wabbit 7 implementation of logistic regression [14], which was found to work well in conjunction with MapReduce.", "startOffset": 100, "endOffset": 104}], "year": 2016, "abstractText": "Email classification is still a mostly manual task. Consequently, most Web mail users never define a single folder. Recently however, automatic classification offering the same categories to all users has started to appear in some Web mail clients, such as AOL or Gmail. We adopt this approach, rather than previous (unsuccessful) personalized approaches because of the change in the nature of consumer email traffic, which is now dominated by (non-spam) machine-generated email. We propose here a novel approach for (1) automatically distinguishing between personal and machine-generated email and (2) classifying messages into latent categories, without requiring users to have defined any folder. We report how we have discovered that a set of 6 \u201clatent\u201d categories (one for humanand the others for machine-generated messages) can explain a significant portion of email traffic. We describe in details the steps involved in building a Web-scale email categorization system, from the collection of ground-truth labels, the selection of features to the training of models. Experimental evaluation was performed on more than 500 billion messages received during a period of six months by users of Yahoo mail service, who elected to be part of such research studies. Our system achieved precision and recall rates close to 90% and the latent categories we discovered were shown to cover 70% of both email traffic and email search queries. We believe that these results pave the way for a change of approach in the Web mail industry, and could support the invention of new large-scale email discovery paradigms that had not been possible before.", "creator": "LaTeX with hyperref package"}}}