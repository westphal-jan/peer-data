{"id": "1609.01475", "review": {"conference": "arxiv", "VERSION": "v1", "DATE_OF_SUBMISSION": "6-Sep-2016", "title": "Multi Exit Configuration of Mesoscopic Pedestrian Simulation", "abstract": "A mesoscopic approach to modeling pedestrian simulation with multiple exits is proposed in this paper. A floor field based on Qlearning Algorithm is used. Attractiveness of exits to pedestrian typically is based on shortest path. However, several factors may influence pedestrian choice of exits. Scenarios with multiple exits are presented and effect of Q-learning rewards system on navigation is investigated", "histories": [["v1", "Tue, 6 Sep 2016 10:18:25 GMT  (626kb)", "http://arxiv.org/abs/1609.01475v1", "7 pages, Lao, A. and Teknomo, K. (2014) Multi Exit Configuration of Mesoscopic Pedestrian Simulation, Proceeding of the 12th National Conference in Information Technology Education (NCITE 2014), October 23 - 25, 2014, Boracay, Philippines"]], "COMMENTS": "7 pages, Lao, A. and Teknomo, K. (2014) Multi Exit Configuration of Mesoscopic Pedestrian Simulation, Proceeding of the 12th National Conference in Information Technology Education (NCITE 2014), October 23 - 25, 2014, Boracay, Philippines", "reviews": [], "SUBJECTS": "cs.MA cs.AI cs.CY", "authors": ["allan lao", "kardi teknomo"], "accepted": false, "id": "1609.01475"}, "pdf": {"name": "1609.01475.pdf", "metadata": {"source": "CRF", "title": "Multi Exit Configuration of Mesoscopic Pedestrian Simulation", "authors": ["Allan Lao", "Kardi Teknomo"], "emails": ["alao@lorma.edu", "teknomo@gmail.com"], "sections": [{"heading": null, "text": "The attractiveness of exits for pedestrians is typically based on the shortest route. However, several factors can influence the choice of exits for pedestrians. Scenarios with multiple exits are presented and the effects of the Q-Learning reward system on navigation are investigated. General Term Algorithms Keywords Pedestrian Simulation, Artificial Intelligence, Multi-Agent, Mesoscopic, Q-Learning, Multi Exit."}, {"heading": "1. INTRODUCTION", "text": "The models are essentially based on three methods, namely continuum model, social force model and cellular vending machine model. In addition, most models are either macroscopic or microscopic. A macroscopic model minimizes variables and parameters and focuses mainly on the overall performance of the pedestrian flow. Macroscopic models reduce computational complexity. In contrast, microscopic models focus on the behavior of individuals. These models are able to reproduce individual characteristics such as acceleration, speed, trajectory and interaction. However, there is compensation for performance, since microscopic models are computationally laborious. One hybrid of the two models is the mesoscopic model. Pedestrians are modeled as a group based on some commonalities such as departure time or the same route, or simply walking at the same speed."}, {"heading": "2. RELATED LITERATURE", "text": "It is not the first time that the EU Commission has taken such a step."}, {"heading": "2.1 Pedestrian Mesoscopic Models", "text": "There are few models available that aggregate the pedestrian simulation to a mesoscopic level, many of which consider a group of pedestrians as one unit and thus lose much of the individual pedestrian information.Florian et al (2001) [2], Hanisch et al. (2003) [3] and Toluyev and Alcal\u00e1 (2004) [4] presented early papers belonging to this group. Tolujew et al (2004) [4] describe a framework for online control systems. The mesoscopic approach monitors a group of pedestrians who exhibit similar behavior because they have the same intention of boarding a train. Teknomo et al. (2008) [4] described the mesoscopic model as a model in which the focus is not on the interaction of individual pedestrians but on the aggregation of several pedestrians in a region. Pedestrian interaction between the actors is presented as an aggregation model of velocity effects across space."}, {"heading": "2.2 Floor Field", "text": "Schadschneider (2001) [7] presented a concept of a ground field that acts as a substitute for pedestrian intelligence and leads to collective phenomena, enabling spatial, far-reaching interactions to be translated into non-local interactions in time. At the same time, pedestrians leave a path similar to chemotaxis that influences local interactions.Ground fields were presented in various shapes. Varas et. al (2007) [12] describe the ground field as a rectangular grid, with each cell assigned a constant value representing the distance to the output.The lower value of the cell guides the pedestrian to the output.Walls are covered with high weights to ensure that pedestrians do not move towards them while assigned a value of 1.The concept of the Sink Propagation Value was presented by [6], which describes a series of monotonously increasing values that contain global information for pedestrian navigation.Several methods were used, such as Smoothing's Form, Learning Faxation, and Faxation-Q."}, {"heading": "3. METHODOLOGY", "text": "It is not the first time that the EU Commission has taken such a step."}, {"heading": "3.1 Description of the model", "text": "The mesoscopic model is an extension of Teknomo e.t al. (2008) [6]. It is based on the principle of permission, interaction and navigation. Although the same framework has been adopted, we have implemented our own concepts in several aspects of the framework, specifically in navigation. The model uses three matrices, each of which is discussed in separate sections: firstly, the layout matrix L, which contains information about permission to move from cell to cell; secondly, the density matrix D, which represents the number of agents currently in each cell; and thirdly, the navigation matrix N, which directs the agents to one of the sinks."}, {"heading": "3.1.1 Pedestrian Movement", "text": "When an agent is able to move, one of the Moore quarters of 8 is next considered a target cell, based on the calculation of the probability of entry into cell Np. Otherwise, the agent remains on the same cell. If an agent is able to leave the cell, the cell that is eligible for the next step is based on two functions: permit search and entry probability. As a cell can be limited by walls, only neighbors connected to the cell are included in the list of choices. The probability of entry of a cell is then calculated as. As a navigation matrix derived from Q-Learning is not smooth,"}, {"heading": "3.1.2 Layout Matrix", "text": "Unlike previous studies, where walls are contained within a cell, our model uses edges to represent walls. Likewise, obstacles are easily modeled as walls-enclosed cells. For each cell in the grid, a numerical equivalent is assigned to show the position of the walls within its four sides.Based on a 4-bit representation of a cell, a viewing table is generated.The 4 bits represent four sides of the cell, as shown in So for a cell with a value of 7, meaning that only the top of the cell is open and the rest is closed. Likewise, a motion guidance indicates possible directions that an agent can take when navigating the area. Each cell contains the predefined list of possible movements (see Figure 2)."}, {"heading": "3.1.3 Pedestrian Interaction", "text": "The interaction between pedestrians is represented by a function of cell density, imposing two density functions on each cell: firstly, the velocity-density relationship, and secondly, the likelihood of entering the next cell. For simplicity purposes, a table is used to determine the velocity-density relationship. A detailed explanation of velocity-density can be found in [6] [8]. Table 1. shows the relationship between cell density, velocity, and probability of entering the next cell. Each cell has a uniform diameter, which is calculated as an average between the diameter of the inner circle and the outer circle. Depending on speed and density, there is a short travel time within the cell. Pedestrian movement is assumed to be uniform within the cell. The speed of the pedestrian depends on the density of the cell, as in Table 1. Each pedestrian will have only one source cell and one target cell. Obviously, the original cell must not be the same as the target cell, and the density will be calculated for each step."}, {"heading": "3.1.4 Pedestrian Navigation", "text": "The third component of the PIN model is the navigation matrix, which gives direction to pedestrians. The principle behind the navigation matrix is simple: in each cell is embedded a series of monotonously increasing numbers, so that target sinks have high values and are spread around the area. It is similar to the concept of a signal from a transmitter that, as it moves, follows the location that emits a stronger signal and is ultimately directed to the origin of the signal. The monotonously increasing number is known as the Sink Propagation Value. [6] [9] describes SPV as a function that assigns a value to each vertex that implements a general idea of the distance from the vertex. It is a value on the vertex that monotonously increases (or decreases) from the sink point vertex according to the minimum distance function from that vertex to the sink point."}, {"heading": "3.2 Configuring Exits", "text": "There are several interesting points in a navigation panel that we refer to here as the basin. Teknmo (2008) [9] categorized basins as 1) source basin, 2) sink 3) source basin and sink 4) saddle. Source basin is where the agents originate. Sink like the exit door is the final destination and the agents will eventually disappear. Saddle basin is a temporary destination like a cashier or a store where a service time is consumed before an agent moves to another destination. In this essay, the emphasis is on allocating weights to basins. Exits have a varying degree of appeal based on pedestrian individual preferences and goals. A female comfort room is naturally attractive to female pedestrians and a ramp is certainly better for people with disabilities. Although we have individual preferences, many of them can be generalized as an escalator preferred by more than a staircase for most pedestrians."}, {"heading": "3.2.1 Q-learning", "text": "The configuration of multiple outputs in a layout depends primarily on the reward system of the Q-Learning algorithm. Outputs closer to the source are by default more attractive than outputs farther away. Increasing the pull of outputs allows pedestrians to navigate toward the exit. Similarly, decreasing the drop-out value would shift the navigation direction toward outputs with higher value.A subset of the reinforcement learning algorithm, Q-Learning, is a general computational approach to learning from rewards and punishments [13]. The algorithm works by maintaining a list of possible actions from a given state and assigning them Q values. For each step in the algorithm, it selects a possible action and observes the rewards it collects from the environment. Q values are updated based on simple rules."}, {"heading": "4. SIMULATION RESULTS", "text": "It is not the first time that the EU Commission has taken such a step."}, {"heading": "4.1 Scenario 1 : Symmetrical 3 exit layout.", "text": "In this scenario, we are simulating a 20m x 30m facility with a main exit and two side exits. The mesoscopic cell size is 1m x 1m.The layout is inspired by a shopping mall in San Fernando City, where there are 3 cinemas on the left side of the facility and the main exit opposite the cinema.Scenarios 1 and 2 are identical except that in Scenario 2, the wash sword of the main exit is reduced by 50%. After the last full show, the mall is almost empty, except for the cinema-goers who rush to the exit, while the main exit is 4 meters.The main exit is given a high wash sword to pull agents from the cinema to the main exit (as shown in Figure 5).After the last full show, the mall is almost empty except for the cinema-goers who rush to the exit from the mall, while the main exit is 4 meters.Both scenarios were simulated with 60 pedestrians at peak times."}, {"heading": "4.2 Scenario 2 : Symmetrical 3 exit layout with elevator and stair.", "text": "We expanded the first scenario to include an elevator along a staircase near the main exit. The purpose is to demonstrate the model's ability to identify a different main path from the wider one and at the same distance from the main exit. Figure 9 shows the floor plan. In this plan, we designed the escalator to be the preferred choice for pedestrians. Figure 9 shows part of the floor area for this scenario. Remarkably, the escalator has higher values within its base, while the staircase is affected by the attractiveness of the main exit. Although the width of the stairs is twice as large as the escalator and the distance to the main exit is the same, we were able to assign a higher weight to the escalator. Note that in this paper the speed was not taken into account for either the escalator or the stairs, as the purpose of the paper is to provide the correct floor field. Interestingly, it is noted that pedestrians tend to form a longer queue within the queue because some of the rest of the pedestrian."}, {"heading": "4.3 Comparison of mesoscopic and microscopic model.", "text": "A simple comparison of the performance of a mesoscopic model with a microscopic model is presented here. Note, however, that the aim of this paper is not to examine and evaluate the performance results between the two models. To present, a simple scenario of 10m x 15m is modeled here. An equivalent 20x30 grid layout represents the microscopic model, the former having a cell dimension of 1m x 1m and the latter having a cell dimension of 0.5m x 0.5 m, hence the scanning size of the microscopic model is twice as large as the mesoscopic model. Furthermore, the mesoscopic model can have up to four pedestrians occupying a single cell at a time. Figure 12 shows 30 pedestrians in simulation step 17. The delta time used is 0.50 seconds per time step. Hand-held microscopic models allow only one pedestrian per cell, whereby the dimension of a cell is closely identical to the average body size of a pedestrian."}, {"heading": "5. CONCLUSIONS", "text": "This study presents a mesoscopic approach to modelling the multi-exit pedestrian simulation, combining Qlearning algorithm and simple rules of the Cellular Automata for floor field design and pedestrian interaction, which can be a valuable tool for simulating multi-exit evacuation scenarios and for analysing the pedestrian flow for different routes."}, {"heading": "6. RECOMMENDATIONS", "text": "An analysis of the distance-to-weight ratio assigned to target sinks should be carried out to determine the optimal weight value to be assigned per exit area, which is necessary to avoid trial and error in determining the weight values."}, {"heading": "7. ACKNOWLEDGMENTS", "text": "This study is partially supported by the Higher Education Commission and Lorma Colleges."}, {"heading": "8. REFERENCES", "text": "[1] Blue, V.J. and Adler, J.L. 2000. Cellular AutomataMicrosimulation of Bidirectional Pedestrian Flows. Transportation Research Board. [2] Florian, M., Mahut, M. and Tremblay, N. 2001. A Hybrid Optimization-Mesoscopic Simulation Dynamic TrafficAssignment Model, Proceedings of the 2001 IEEE Intelligent Transport Systems Conference, 120-123. [3] Hanisch, A., Toldestriyan, J., Richter, K. 2003. Online Simulation of Pedestrian Flow in Public Buildings, Proceedings of the 2003 Winter Simulation Conference, S. Chick, P. J. S\u00e1nchez, D. Ferrin, and D. J. Morrice, (eds), 1635-1641. [4] Toluyev, J. and Alcal\u00e1, F. 2004. A Mesoscopic Approach to Modeling and Simulation of Pedestrian Traffic Flows."}], "references": [{"title": "Cellular Automata Microsimulation of Bidirectional Pedestrian Flows", "author": ["V.J. Blue", "J.L. Adler"], "venue": null, "citeRegEx": "1", "shortCiteRegEx": "1", "year": 2000}, {"title": "A Hybrid Optimization-Mesoscopic Simulation Dynamic Traffic Assignment Model", "author": ["M. Florian", "M. Mahut", "N. Tremblay"], "venue": "Proceedings of the 2001 IEEE Intelligent Transport Systems Conference,", "citeRegEx": "2", "shortCiteRegEx": "2", "year": 2001}, {"title": "Online Simulation of Pedestrian Flow in Public Buildings", "author": ["A. Hanisch", "J. Tolujew", "K. Richter", "T. Schulze"], "venue": "Proceedings of the 2003 Winter Simulation Conference,", "citeRegEx": "3", "shortCiteRegEx": "3", "year": 2003}, {"title": "A Mesoscopic Approach to Modeling and Simulation of Pedestrian Traffic Flows, Proceedings 18th European Simulation Multiconference", "author": ["J. Tolujew", "F. Alcal\u00e1"], "venue": null, "citeRegEx": "4", "shortCiteRegEx": "4", "year": 2004}, {"title": "An aggregated dynamic flow model for pedestrian movement in railway stations", "author": ["F. H\u00e4nseler", "B. Farooq", "T. M\u00fchlematter", "M. Bierlaire"], "venue": "Swiss Transport Research Conference", "citeRegEx": "5", "shortCiteRegEx": "5", "year": 2013}, {"title": "Mesoscopic Pedestrian Simulation", "author": ["K. Teknomo", "P. Gerilla"], "venue": "Transportation Research Trends", "citeRegEx": "6", "shortCiteRegEx": "6", "year": 2008}, {"title": "Cellular automaton approach to pedestrian, dynamics-theory", "author": ["A Schadschneider"], "venue": "Pedestrian and Evacuation", "citeRegEx": "7", "shortCiteRegEx": "7", "year": 2001}, {"title": "Q-Learning by Examples. (http://people.revoledu.com/kardi/tutorial/ReinforcementLear ning/index.html", "author": ["K. Teknomo"], "venue": null, "citeRegEx": "8", "shortCiteRegEx": "8", "year": 2005}, {"title": "Multi-Agents' Pedestrian Simulation System Based on Individual Trajectory Data, Working Report to Arsenal Research, Herta-Firnberg/HCMT", "author": ["K. Teknomo"], "venue": null, "citeRegEx": "9", "shortCiteRegEx": "9", "year": 2008}, {"title": "Simulating Evacuations with Obstacles Using a Modified Dynamic Cellular Automata", "author": ["A. Lim", "W. Tan"], "venue": "Model.Journal of Applied Mathematics Volume", "citeRegEx": "10", "shortCiteRegEx": "10", "year": 2012}, {"title": "Simulation of evacuation processes in a square with a partition wall using a cellular automaton model for pedestrian dynamics", "author": ["Z. Xiaoping", "W. Li"], "venue": "Physica A", "citeRegEx": "11", "shortCiteRegEx": "11", "year": 2010}, {"title": "Cellular automaton model for evacuation process with obstacles", "author": ["A. Varas", "M. Cornejo", "D. Mainemer"], "venue": "Physica A,", "citeRegEx": "12", "shortCiteRegEx": "12", "year": 2007}, {"title": "Reinforcement learning", "author": ["R. Sutton", "Barto"], "venue": null, "citeRegEx": "14", "shortCiteRegEx": "14", "year": 1998}], "referenceMentions": [{"referenceID": 1, "context": "Florian et al (2001)[2] ,Hanisch et al.", "startOffset": 20, "endOffset": 23}, {"referenceID": 2, "context": "(2003)[3] and Tolujew and Alcal\u00e1 (2004)[4], presented early papers that belongs to this group.", "startOffset": 6, "endOffset": 9}, {"referenceID": 3, "context": "(2003)[3] and Tolujew and Alcal\u00e1 (2004)[4], presented early papers that belongs to this group.", "startOffset": 39, "endOffset": 42}, {"referenceID": 3, "context": "al(2004)[4] describe a framework for online control systems.", "startOffset": 8, "endOffset": 11}, {"referenceID": 3, "context": "(2008) [4] described mesoscopic model as a model where focus is not on single pedestrian interaction but on more aggregation of several pedestrians in a region.", "startOffset": 7, "endOffset": 10}, {"referenceID": 3, "context": "In contrast to the argument of [4] and [3], that mesoscopic level means group of pedestrians as an entity that move together, [6] modeled pedestrians as an individual agent.", "startOffset": 31, "endOffset": 34}, {"referenceID": 2, "context": "In contrast to the argument of [4] and [3], that mesoscopic level means group of pedestrians as an entity that move together, [6] modeled pedestrians as an individual agent.", "startOffset": 39, "endOffset": 42}, {"referenceID": 5, "context": "In contrast to the argument of [4] and [3], that mesoscopic level means group of pedestrians as an entity that move together, [6] modeled pedestrians as an individual agent.", "startOffset": 126, "endOffset": 129}, {"referenceID": 6, "context": "2 Floor Field Schadschneider (2001)[7] presented a concept of a floor field which acts as a substitute for pedestrian intelligence and leads to collective phenomena.", "startOffset": 35, "endOffset": 38}, {"referenceID": 11, "context": "al (2007)[12] describe floor field as a rectangular grid with each cell assigned a constant value representing distance to the exit.", "startOffset": 9, "endOffset": 13}, {"referenceID": 5, "context": "The concept of Sink Propagation Value was presented by [6] which describes a set of monotonically increasing values that", "startOffset": 55, "endOffset": 58}, {"referenceID": 5, "context": "(2008)[6].", "startOffset": 6, "endOffset": 9}, {"referenceID": 5, "context": "A detailed explanation of speed-density can be found on [6][8].", "startOffset": 56, "endOffset": 59}, {"referenceID": 7, "context": "A detailed explanation of speed-density can be found on [6][8].", "startOffset": 59, "endOffset": 62}, {"referenceID": 5, "context": "[6][9] describes SPV as a function assigning a value to each vertex that is implementing a general notion of distance from the sink.", "startOffset": 0, "endOffset": 3}, {"referenceID": 8, "context": "[6][9] describes SPV as a function assigning a value to each vertex that is implementing a general notion of distance from the sink.", "startOffset": 3, "endOffset": 6}, {"referenceID": 5, "context": "[6][9] describes the properties of SPV in detail.", "startOffset": 0, "endOffset": 3}, {"referenceID": 8, "context": "[6][9] describes the properties of SPV in detail.", "startOffset": 3, "endOffset": 6}, {"referenceID": 8, "context": "In this paper we used a dual of Qlearning[9].", "startOffset": 41, "endOffset": 44}, {"referenceID": 8, "context": "Teknmo(2008)[9] categorized basins as 1) source basin, 2) sink basin 3) source and sink basin 4) saddle.", "startOffset": 12, "endOffset": 15}, {"referenceID": 6, "context": "Most floor fields or navigation fields are based on distance metrics[7][10][12].", "startOffset": 68, "endOffset": 71}, {"referenceID": 9, "context": "Most floor fields or navigation fields are based on distance metrics[7][10][12].", "startOffset": 71, "endOffset": 75}, {"referenceID": 11, "context": "Most floor fields or navigation fields are based on distance metrics[7][10][12].", "startOffset": 75, "endOffset": 79}, {"referenceID": 12, "context": "Thus, after a finite number of steps, the algorithm learns the value cost from all actions [14].", "startOffset": 91, "endOffset": 95}, {"referenceID": 7, "context": "By following the Q-learning Algorithm from the tutorial [8] we get the Q matrix and subsequently, by getting the diagonal values we get the navigation matrix N.", "startOffset": 56, "endOffset": 59}], "year": 2014, "abstractText": "A mesoscopic approach to modeling pedestrian simulation with multiple exits is proposed in this paper. A floor field based on Qlearning Algorithm is used. Attractiveness of exits to pedestrian typically is based on shortest path. However, several factors may influence pedestrian choice of exits. Scenarios with multiple exits are presented and effect of Q-learning rewards system on navigation is investigated. General Terms Algorithms", "creator": "convertonlinefree.com"}}}