{"id": "1609.04648", "review": {"conference": "arxiv", "VERSION": "v1", "DATE_OF_SUBMISSION": "14-Sep-2016", "title": "Sequencing Chess", "abstract": "We analyze the structure of the state space of chess by means of transition path sampling Monte Carlo simulation. Based on the typical number of moves required to transpose a given configuration of chess pieces into another, we conclude that the state space consists of several pockets between which transitions are rare. Skilled players explore an even smaller subset of positions that populate some of these pockets only very sparsely. These results suggest that the usual measures to estimate both, the size of the state space and the size of the tree of legal moves, are not unique indicators of the complexity of the game, but that topological considerations are equally important.", "histories": [["v1", "Wed, 14 Sep 2016 10:13:42 GMT  (224kb,D)", "http://arxiv.org/abs/1609.04648v1", null]], "reviews": [], "SUBJECTS": "cs.AI", "authors": ["a atashpendar", "t schilling", "th voigtmann"], "accepted": false, "id": "1609.04648"}, "pdf": {"name": "1609.04648.pdf", "metadata": {"source": "CRF", "title": "epl draft Sequencing Chess", "authors": ["Arshia Atashpendar", "Tanja Schilling", "Thomas Voigtmann"], "emails": [], "sections": [{"heading": null, "text": "It's not just a matter of time before it happens, it's also a matter of time before it happens, until it happens, \"he told the German Press Agency.\" I don't think it will happen, \"he said.\" But I don't think it will happen yet. \"He added,\" I don't think it will happen. \"He added,\" But I think it will happen. \"He added,\" I don't think it will happen. \"He added,\" I don't think it will. \"He added,\" I don't think it will happen. \""}], "references": [{"title": "Sampling the trajectory space of chess", "author": ["A. Atashpendar"], "venue": "Master thesis, University of Luxembourg", "citeRegEx": "5", "shortCiteRegEx": "5", "year": 2016}, {"title": "Networks (Oxford", "author": ["J. Newman M. E"], "venue": null, "citeRegEx": "16", "shortCiteRegEx": "16", "year": 2010}, {"title": "Combinatorics of Go in proc. of Computers and Games, edited", "author": ["J. Tromp", "G. Farneb\u00e4ck"], "venue": null, "citeRegEx": "20", "shortCiteRegEx": "20", "year": 2007}, {"title": "An overview and classification of retrograde chess problems in proc", "author": ["M. Malikovi\u0107"], "venue": "Proceedings of the 25th International Conference on Information and Intelligent Systems, edited by Hunjak T., Lovrenc\u030cic\u0301 S. and Tomic\u030cic\u0301 I.,", "citeRegEx": "25", "shortCiteRegEx": "25", "year": 2014}], "referenceMentions": [{"referenceID": 0, "context": "1 Combining SPRES with an optimized chess-move generator [5], we estimate the distribution of path lengths between both randomly generated configurations and those encountered in games played by humans.", "startOffset": 57, "endOffset": 60}, {"referenceID": 0, "context": "[5]).", "startOffset": 0, "endOffset": 3}, {"referenceID": 1, "context": "The relative size of the pockets in state space can be estimated from the path-length distribution by recurring to the theory of random graphs [14\u201316].", "startOffset": 143, "endOffset": 150}, {"referenceID": 2, "context": "It is interesting to compare this state of uncertainty to the game of Go; here, the number of legal states is known exactly [20, 21], and the question of reachability is presumably much less intricate, although the numbers are much larger.", "startOffset": 124, "endOffset": 132}, {"referenceID": 3, "context": "This should in principle offer a dramatic improvement to computer chess programs, or various branches of the mathematics of chess such as retrograde analysis [25] or the solution of chess puzzles [26].", "startOffset": 158, "endOffset": 162}], "year": 2016, "abstractText": "We analyze the structure of the state space of chess by means of transition path sampling Monte Carlo simulation. Based on the typical number of moves required to transpose a given configuration of chess pieces into another, we conclude that the state space consists of several pockets between which transitions are rare. Skilled players explore an even smaller subset of positions that populate some of these pockets only very sparsely. These results suggest that the usual measures to estimate both, the size of the state space and the size of the tree of legal moves, are not unique indicators of the complexity of the game, but that topological considerations are equally important. Chess is a two-player board game with a small set of rules according to which pieces can be moved. It belongs to the class of games with perfect information that have not been solved yet, due to the sheer size of its state space. The computerized analysis of chess started with a seminal paper by Claude Shannon in 1950 [1], and since about the year 2000 computer programs can regularly beat top-level human players [2]. They do so by employing well-tailored heuristic evaluation functions for the game\u2019s states, which allow one to short-cut the exploration of the vast game tree of possible moves. In this context, chess is often compared to Go, where computers only very recently started to match the performance of human champions [3]. The difference is usually attributed to the different sizes of the games\u2019 state spaces: the game-tree complexity of Go exceeds that of chess by some 200 orders of magnitude. However, while size is an important factor in determining the complexity of a game, the topology of the state space may be equally important. Intuitively, the different kinds of moves performed by different chess pieces impose a highly nontrivial (and directed) topology. It is not at all straightforward to establish whether a given point in the state space is reachable from another one by a sequence of legal moves. We thus face an interesting sampling problem: given two chess configurations, can one establish whether they are connected, i.e., whether there exists a sequence of legal moves that transforms the first configuration into the second? Furthermore, what is the typical distance (in plies, or half moves) between such configurations? Clearly, direct enumeration or standard Monte Carlo sampling are out of reach: after each ply, the game tree is estimated to branch into 30 to 35 subtrees [1]. Here we demonstrate that it is possible to analyze the topological structure of the state space of chess by stochastic-process rare-event sampling (SPRES) [4]. SPRES is a transition-path Monte Carlo sampling scheme that works in full non-equilibrium conditions, where the dynamics is neither stationary nor reversible. 1 Combining SPRES with an optimized chess-move generator [5], we estimate the distribution of path lengths between both randomly generated configurations and those encountered in games played by humans. Analyzing these distributions in terms of random-graph theory, we conjecture that the state space of chess consists of multiple distinct pockets, interconnected by relatively few paths. These pockets are only very sparsely populated by the states that are relevant for skilled play. Previous statistical-physics analyses of chess have focused mostly on the distribution of moves in human gameplay, or on games played by computer chess engines. For example, the popularity of opening sequences follows a power-law distribution according to Zipf\u2019s law [6] (in this 1Our analysis of chess also serves to demonstrate the versatility and power of SPRES as a technique that applies to abstract nonphysical dynamics. p-1 ar X iv :1 60 9. 04 64 8v 1 [ cs .A I] 1 4 Se p 20 16 A. Atashpendar, T. Schilling, and Th. Voigtmann context, Go is rather similar [7]), highly biased by the skill of the players involved [8, 9]. Optimal play (in the sense that moves are evaluated favorably by modern computer chess engines) has also been analyzed in the language of free-energy landscapes [10]. Our approach is entirely different: we consider the set of all legal moves, irrespective of their engine evaluation, in order to establish the connectivity of the state space of chess. Within this space, we then also study the relative size and structure of the subset of positions encountered in games played by chess masters. The state of a chess game at any point in time is entirely described by the board configuration (the positions of all chess pieces), a small set of additional variables that track the possibility of special moves (castling or en-passant capture) and the information regarding which player\u2019s turn it is. The set of possible states is given by all states that involve up to 16 chess pieces per color (there may be fewer due to captures, and the number of pieces and pawns may change due to pawn promotions). Only a subset of all possible states is legal, as for example, the two kings cannot be in check at the same time. Of interest in the following are states that are legal and also accessible from the given initial configuration. As an example of an inaccessible but legal state, consider the case where the position of a bishop differs from its initial position, while the positions of the pawns do not. This state is inaccessible, because pawns are initially placed in front of the other pieces of their colour, their moves are always irreversible and the other pieces (apart from the knights) cannot jump over the pawns. Thus, although the state is legal, it cannot be reached by legal moves. To sample the structure of the state space, we generate sequences of accessible states by randomly drawing moves evenly from all legal moves (Monte Carlo, MC). Most of these states entail dramatic disadvantages for at least one side. Therefore, the set of states encountered in optimalstrategy play is vastly smaller than the set we sample. As a proxy to these unknown optimal states, we use database (DB) states extracted from a database of about two million human-played games [11]. In both cases (MC and DB), we then pick pairs of states randomly and establish their connectivity with respect to the game tree by all legal (MC) moves, i.e., irrespective of whether the connecting pathway contains unfavorable positions in terms of gameplay. In the vicinity of the starting configuration, many randomly drawn pairs of positions are necessarily disconnected, since pawns only move forward and many of the pieces still have to gain freedom to move. At the other end of the game, mating positions act as absorbing states. And in addition, the MC dynamics has a set of absorbing states where only the kings are left on the board. In order to sample states that reflect the intrinsic topology of the state space, we thus restrict the discussion to pairs of states drawn from a depth between 5 and 50 plies into the game. This corresponds loosely to chess players\u2019 notion of the middle game. Inside this window, we did not find an obvious correlation between the ply-depth from which a pair of states was drawn and the separation between them. We sample the pathways between states by means of SPRES [4]. In this method, interfaces in state space are defined by constant values of a scalar reaction coordinate, which quantifies the progress made from one state to the other. Then adaptive sampling of dynamic pathways is carried out such that a constant number of forward transitions between these interfaces is obtained. Once the sampling is completed, observables can be averaged over the ensemble of sampled pathways. In the case of chess, we are in particular interested in the length (number of plies) of the shortest path between two configurations. While the choice of an optimal reaction coordinate is a topic in its own right [10], we make use of the fact that SPRES will sample paths faithfully even for non-optimal choices [4]. As the reaction coordinate, we chose a Euclidean geometric measure of distance from the target configuration. For each piece, the geometric distance is calculated using a metric that is adapted to the type of moves performed by that piece: Chebyshev metric for queens, kings, and bishops, the ceil of half the Chebyshev distance for knights, the Manhattan distance for rooks, and the rank separation for pawns. (For details, see Ref. [5]). Pairs are discarded as disconnected if they are farther apart than 120 plies; this approximation is adapted to the typical length of real chess games. Trivially disconnected pairs are discarded by an initial test based on the reaction coordinate, the pawn structure and the piece count. For the estimation of path lengths, 4000 (3000) pairs generated from MC (DB) that have passed this test have been sampled. Figure 1 shows the histogram of path lengths between those randomly chosen pairs that are connected according to SPRES (corresponding to 79% of all randomly drawn MC pairs and 85% of all pairs drawn from the DB). For pairs generated via MC, the path-length distribution has two distinct contributions, one with a peak at `1 \u2248 20 plies, and a smaller one at `2 \u2248 45 plies. The path-length distribution between pairs sampled from the database is biased to smaller path lengths and has only one prominent peak at a path length slightly below `1, `1 \u2248 18 plies. A tail towards large distances is still seen as a remnant of the second peak found in the MC distribution. Note that the paths found by SPRES for the DB pairs almost certainly pass through non-DB states (i.e. states that are usually not found in games played by humans). A typical engine evaluation function (Stockfish [13]) displays huge fluctuations along the SPRES paths, indicating that these paths will probably never be chosen by skilled human players. The results shown in Fig. 1 reveal that real chess games take place in a subspace that is much more tightly connected than the space of accessible states. The doublepeaked histogram suggests a \u201cblob\u201d structure (see sketch", "creator": "LaTeX with hyperref package"}}}