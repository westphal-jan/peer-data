{"id": "1510.02045", "review": {"conference": "arxiv", "VERSION": "v1", "DATE_OF_SUBMISSION": "7-Oct-2015", "title": "Budget Constraints in Prediction Markets", "abstract": "\u2026 we give one a really detailed characterization of optimal trades under budget constraints in a prediction market with creating a cost - function - based automated market maker. we study how the budget constraints of individual traders affect their ability to impact the market price. as a concrete application of our characterization, we give sufficient conditions for learning a property we call automated budget additivity : two traders with budgets b and b'and the same beliefs would have a combined impact equal to a single trader with budget b + b '. that way, even if a single trader cannot move the market much, a crowd of like - minded traders can have the same desired effect. when using the set of payoff vectors associated with outcomes, with coordinates corresponding to securities, is affinely independent, we obtain that a generalization of the heavily - used logarithmic market scoring rule is budget additive, but the quadratic market scoring rule is not. our results may be used both descriptively, to understand if a particular market maker is repeatedly affected by budget constraints acts or acts not, and prescriptively, as a recipe to construct markets.", "histories": [["v1", "Wed, 7 Oct 2015 18:02:01 GMT  (60kb,D)", "http://arxiv.org/abs/1510.02045v1", null]], "reviews": [], "SUBJECTS": "cs.GT cs.AI", "authors": ["nikhil devanur", "miroslav dud\\'ik", "zhiyi huang", "david m pennock"], "accepted": false, "id": "1510.02045"}, "pdf": {"name": "1510.02045.pdf", "metadata": {"source": "CRF", "title": "Budget Constraints in Prediction Markets", "authors": ["Nikhil Devanur", "Zhiyi Huang", "David M. Pennock"], "emails": [], "sections": [{"heading": null, "text": "We give a detailed characterization of optimal trades under budget constraints in a prediction market with a cost-function-based automated market maker. We study how the budget constraints of individual traders affect their ability to impact the market price. As a concrete application of our characterization, we give sufficient conditions for a property we call budget additivity: two traders with budgets B and B\u2032 and the same beliefs would have a combined impact equal to a single trader with budget B +B\u2032. That way, even if a single trader cannot move the market much, a crowd of like-minded traders can have the same desired effect. When the set of payoff vectors associated with outcomes, with coordinates corresponding to securities, is affinely independent, we obtain that a generalization of the heavily-used logarithmic market scoring rule is budget additive, but the quadratic market scoring rule is not. Our results may be used both descriptively, to understand if a particular market maker is affected by budget constraints or not, and prescriptively, as a recipe to construct markets."}, {"heading": "1 INTRODUCTION", "text": "A prediction market is a central clearinghouse for people with differing opinions about the likelihood of an event\u2014 say Hillary Clinton to win the 2016 U.S. Presidential election\u2014to trade monetary stakes in the outcome with one another. At equilibrium, the price to buy a contract paying $1 if Clinton wins reflects a consensus of sorts on the probability of the event. At that price, and given the wagers already placed, no agent is willing to push the price further up or down. Prediction markets have a good track record of forecast accuracy in many domains [11, 19].\nThe design of combinatorial markets spanning multiple\nlogically-related events raises many interesting questions. What information can be elicited\u2014the full probability distribution, or specific properties of the distribution? What securities can the market allow traders to buy and sell? How can the market support and ensure a variety of trades? For example, in addition to the likelihood of Clinton winning the election, we may want to elicit information about the distribution of her electoral votes.1 If we create one security for each possible outcome between 0 and 538, each paying $1 iff Clinton gets exactly that many electoral votes, the market is called complete, allowing us to elicit a full probability distribution. Alternatively, if we create just two securities, one paying out $x if Clinton wins x electoral votes, and the other paying out $x2, we cannot elicit a full distribution, but we can still elicit the mean and variance of the number of electoral votes.\nWhen agents are constrained in how much they can trade only by risk aversion, prediction market prices can be interpreted as a weighted average of traders\u2019 beliefs [2, 20], a natural reflection of the \u201cwisdom of the crowd\u201d with a good empirical track record [14] and theoretical support [2]. However, when agents are budget constrained, discontinuities and idiosyncratic results can arise [7, 16] that call into question whether the equilibrium prices can be trusted to reflect any kind of useful aggregation.\nWe consider prediction markets with an automated market maker [1, 4, 13] that maintains standing offers to trade every security at some price. Unlike a peer-to-peer exchange, all transactions route through the market maker. The common market makers have bounded loss and are (myopically) incentive compatible: the best (immediate) strategy is for a trader to move the market prices of all securities to equal his own belief. The design of such an automated market maker boils down to choosing a convex cost function [1]. This amount of design freedom presents an opportunity to seek cost functions that satisfy additional desiderata such as computational tractability [1, 6].\n1 A U.S. Presidential candidate receives a number of electoral votes between 0 and 538. The candidate who receives a plurality of electoral votes wins the election.\nar X\niv :1\n51 0.\n02 04\n5v 1\n[ cs\n.G T\n] 7\nO ct\n2 01\nMost of the literature assumes either risk-neutral or riskaverse traders with unbounded budgets. In this paper, we consider how agents with budget constraints trade in such markets, a practical reality in almost all prediction markets denominated in both real and virtual currencies. Our results help with a systematic study of the market\u2019s liquidity parameter, or the parameter controlling the sensitivity of prices to trading volume. Setting the liquidity is a nearly universal practical concern and, at present, is more (black) art than science. We adopt the notion of the \u201cnatural budget constraint\u201d introduced by Fortnow and Sami [8]: the agent is allowed only those trades for which the maximum loss for any possible outcome does not exceed the budget.\nThe main contribution of this paper is a rich, geometric characterization of the impact of budget constraints. Price vectors, outcomes and trader beliefs are embedded in the space of the same dimension as the number of securities. Outcome vectors enumerate security payoffs; belief vectors enumerate the traders\u2019 expectations of payoffs. We consider, for a fixed belief, the locus of the resulting price vectors of an optimal trade as a function of the budget. We show that the price vector moves in the convex hull of the belief and the set of tight outcomes, in a direction that is perpendicular to the set of tight outcomes. We also introduce the concept of budget additivity: two agents with budgets B and B\u2032 and the same beliefs have the same power to move the prices as a single agent with the same belief and budgetB+B\u2032. An absence of budget additivity points to an inefficiency in incorporating information from the traders. We show that budget additivity is a non-trivial property by giving examples of market makers that do not satisfy budget additivity. We give a set of sufficient conditions on the market maker and the set of securities offered which guarantee budget additivity. Further, for two of the most commonly used market makers (the quadratic and logarithmic market scoring rules), we show sufficient conditions on the set of securities that guarantee budget additivity.\nOf greatest practical interest is the application of our results to markets consisting of several independent questions, with each question priced according to a separate logarithmic market scoring rule. This setup constitutes a de facto industry standard, and the companies that use (or used) it include Inkling Markets,2 Consensus Point,3 Microsoft and Yahoo! [17]. Our Theorems 5.6 and 5.8 show that these markets are budget additive.\nPreviously, Fortnow and Sami [8] considered a different question: do budget-constrained bidders always move the market prices in the direction of their beliefs? They showed that the answer to this is no: there always exist market prices, beliefs and budgets such that the direction of price movement is not towards the belief. We give a richer char-\n2inklingmarkets.com 3www.consensuspoint.com\nacterization of how the market prices move in the presence of budget constraints, by charting the path the prices take with increasing budgets. The impossibility result of Fortnow and Sami [8] can be easily derived from our characterization (see Appendix D).4\nA designer of a prediction market has a lot of freedom but little guidance, and our results can be used both descriptively and prescriptively. As a descriptive tool, our results enable us to analyze commonly used market makers and understand if budget constraints hamper information aggregation in these markets. As a prescriptive tool, our results can be used to construct markets that are budget additive. In particular, we speculate that budget additivity simplifies the choice of the liquidity parameter in the markets, because it allows considering trader budgets in aggregate.\nProof overview and techniques. Our analysis borrows heavily from techniques in convex analysis and builds on the notion of Bregman divergence. We use the special case of Euclidean distance (corresponding to a quadratic market scoring rule) to form our geometric intuition which we then extend to arbitrary Bregman divergences. For the sake of an example, consider a complete market over a finite set of outcomes, where the market prices lie in a simplex, exactly coinciding with the set of probability distributions over outcomes. Every possible outcome imposes a constraint on the set of prices to which a trader can move the market, because the trader is not allowed to exceed the budget if that outcome occurs. The prices satisfying this constraint form a ball with the outcome at its center. The set of feasible prices to which the trader can move the market is therefore the intersection of these balls (see Figure 1).\nThe key structural result we obtain is the chart of the price movement. Suppose that there is an infinite sequence of agents with infinitesimally small budgets all with the same belief. What is the path along which the prices move from some initial values? This is determined by the agents\u2019 belief and the set of budget constraints that are tight at any point, corresponding to the highest risk outcomes (outcomes with the highest potential loss). We show that the price vector can always be written as a convex combination of these highest risk outcomes and the agents\u2019 belief. Further, the market prices move in a direction that is perpendicular to the affine space of these outcomes.\nThe agents\u2019 belief partitions the simplex interior into regions, where each region is the interior of the convex hull of the agent belief and a particular subset of outcomes. For a region that is full-dimensional, every interior point can be uniquely written as a convex combination of the agent belief and all except one outcome. Assume that the current price vector lies in this region. In the anticipation of the further development, we call this outcome profitable and others risky. Motivated by the characterization above, we\n4The full version of this paper on arXiv includes the appendix.\nmove perpendicular to the risky outcomes in the direction towards the agents\u2019 belief. As a result, we increase the risk of risky outcomes (equally for all outcomes), while getting closer to the one profitable outcome (and hence increasing its profit). The characterization then guarantees that the prices along this path are indeed those chosen by traders at increasing budgets, because the risky outcomes yield tight constraints.\nWe would like the same to be true for the lower dimensional regions as well; that is, for the set of tight constraints to be exactly the corresponding set of outcomes defining the convex hull. In fact, this property is sufficient to guarantee budget additivity. The markets for which the tight constraints are exactly the minimal set of outcomes that define the region the price lies in are budget additive. (We conjecture that the converse holds as well.) The entire path is then as follows: w.l.o.g. you start at a full-dimensional region, move along the perpendicular until you hit the boundary of the region and you are in a lower-dimensional region, move along the perpendicular in this lower-dimensional region, and so on until you reach the belief (see Figure 1). The set of tight constraints is monotonically decreasing. We show that such markets are characterized by a certain acute angles assumption on the set of possible outcomes. Loosely speaking, this assumption guarantees that outcomes outside the minimal set behave as the profitable outcome in the above example.\nOther related work. There is a rich literature on scoring rules and prediction markets. Two of the most studied scoring rules are the quadratic scoring rule [3] and the logarithmic market scoring rule [13]. We consider costfunction-based prediction markets [4, 12], a fully general class under reasonable assumptions [1, 5]. Their equivalence with proper scoring rules has been implicitly noted by Gneiting and Raftery [10]. Several authors have studied relationships between utility functions and price dynamics in prediction markets, drawing a parallel to online learning [2, 5, 9]. Our analysis touches on the problem of setting the\nmarket maker\u2019s liquidity parameter [15, 17], which determines how (in)sensitive prices are to trading volume. With budget additivity, the market designer can optimize liquidity according to aggregate budgets, without worrying about how budgets are partitioned among traders."}, {"heading": "2 PRELIMINARIES", "text": "Securities and payoffs. Consider a probability space with a finite set of outcomes \u2126 \u2286 Rn. A security is a financial instrument whose payoff depends on the realization of an outcome in \u2126. In other words, the payoff of a security is a random variable of the probability space. We consider trading with n securities corresponding to n coordinates of the outcomes \u03c9 \u2208 \u2126. A security can be traded before the realization is observed with the intention that the price of a security serves as a prediction for the expected payoff, i.e., the expected value of the corresponding coordinate.\nCost function, prices and utilities. An automated market maker always offers to trade securities, for the right price. In fact the price vector is the current prediction of the market maker for the expectation of \u03c9. A cost function based market maker is based on a differentiable convex cost function, C : Rn \u2192 R. It is a scalar function of an n-dimensional vector q \u2208 Rn representing the number of outstanding shares5 for our n securities. We also refer to q as the state of the market.\nThe vector of instantaneous prices of the securities is simply the gradient of C at q, denoted by p(q) := \u2207C(q). The prices of securities change continuously as the securities are traded, so it is useful to consider the cost of trading a given quantity of securities. The cost of buying \u03b4 \u2208 Rn units of securities (where a negative value corresponds to selling) is determined by the path integral\u222b \u03c0 p(q\u0304) \u00b7 dq\u0304 = C(q + \u03b4) \u2212 C(q), where \u03c0 is any smooth 5We allow trading fractions of a security. Negative values correspond to short-selling.\ncurve from q to q + \u03b4.\nWhen the outcome \u03c9 is realized, the vector of \u03b4 units of securities pays off an amount of \u03b4 \u00b7 \u03c9. Thus, the realized utility of a trader whose trade \u03b4 moved the market state from q to q\u2032 = q + \u03b4 is\nU(q\u2032, \u03c9; q) := (q\u2032 \u2212 q) \u00b7 \u03c9 \u2212 C(q\u2032) + C(q) .\nWe make a standard assumption that the maximum achievable utility, which is also the maximum loss of the market maker, is bounded by a finite constant (in Section 4, we introduce a standard approach to check this easily). LetM be the convex hull of the payoff vectors,M := conv(\u2126). It is easy to see thatM contains exactly the vectors \u00b5 \u2208 Rn which can be realized as expected payoffs E[\u03c9] for some probability distribution over \u2126. For a trader who believes that E[\u03c9] = \u00b5, the expected utility takes form\nU(q\u2032, \u00b5; q) := E [U(q\u2032, \u03c9; q)] = (q\u2032\u2212q)\u00b7\u00b5\u2212C(q\u2032)+C(q) .\nThroughout, we consider a single myopic trader who trades as if he were the last to trade. A key property satisfied by expected utility is path independence: for any q, q\u0304, q\u2032 \u2208 Rn, U(q\u2032, \u00b5; q\u0304) + U(q\u0304, \u00b5; q) = U(q\u2032, \u00b5; q), that is, riskneutral traders have no incentive to split their trades. For a risk-neutral trader, q\u2032 \u2208 Rn is an optimal action if and only if \u00b5 = \u2207C(q\u2032) = p(q\u2032) (this follows from the first-order optimality conditions). In other words, the trader is incentivized to move the market to the prices corresponding to his belief as long as such prices exist. In general, there may be multiple states yielding the same prices, so the inverse map p\u22121(\u00b5) returns a set, which can be empty if no state yields the price vector \u00b5.\nCommonly-used cost functions include the quadratic cost, logarithmic market-scoring rule (LMSR) and the logpartition function. They are described in detail in Appendix A. The quadratic cost is defined by C(q) = 12\u2016q\u2016 2 2\nand p(q) = q. Log-partition function is defined as C(q) = ln( \u2211 \u03c9\u2208\u2126 e\nq\u00b7\u03c9). It subsumes LMSR as a special case for the complete market with the outcomes corresponding to vertices of the simplex. The prices under log-partition cost correspond to the expected value of \u03c9 under the distribution Pq(\u03c9) = e q\u00b7\u03c9\u2212C(q) over \u2126, i.e., p(q) = EPq [\u03c9].\nBudget constraints. Trading in prediction markets needs an investment of capital. It is possible that an agent loses money on the trade, in particular U(q\u2032, \u03c9; q) could be negative for some \u03c9. One restriction on how an agent trades could be that he is unable to sustain a big loss, due to a budget constraint. We consider the notion of natural budget constraint defined by Fortnow and Sami [8] which states that the loss of the agent is at most his budget, for all \u03c9 \u2208 \u2126. Given a starting market state q0 and a budget of B \u2265 0, a trader with the belief \u00b5 \u2208M then solves the problem:\nmax q\u2208Rn U(q, \u00b5; q0) s.t. U(q, \u03c9; q0) \u2265 \u2212B \u2200\u03c9 \u2208 \u2126 . (2.1)\nFor quadratic costs, each constraint corresponds to a sphere with one of the outcomes at its center, so the feasible region is an intersection of these spheres. We will later see that this generalizes to an intersection of balls w.r.t. a Bregman divergence for general costs.\nIn general, there may be multiple q optimizing this objective. In the following definition we introduce notation for various solution sets we will be analyzing. The belief \u00b5 is fixed throughout most of the discussion, so we suppress the dependence on \u00b5. Definition 2.1 (Solution sets). Let Q\u0302(B; q0) denote the set of solutions of Convex Program (2.1) for a fixed initial state and budget. Let Q\u0302(q0) = \u22c3 B\u22650 Q\u0302(B; q0) denote the set of solutions of (2.1) for a fixed initial state across all budgets. Let Q\u0302(\u03bd; q0) = p\u22121(\u03bd) \u2229 Q\u0302(q0) denote the set of states q that optimize (2.1) for some budget B and yield the market price vector \u03bd.\nThe next theorem shows that solutions for a fixed initial state and budget always yield the same price vector. It is proved in Appendix B. Theorem 2.2. If q, q\u2032 \u2208 Q\u0302(B; q0), then p(q) = p(q\u2032).\nGeometry of linear spaces. We finish this section by reviewing a few standard geometric definitions we use in next sections. Let X \u2286 Rn. Then aff(X) denotes the affine hull of the set X (i.e., the smallest affine space including X). We write X\u22a5 to denote the orthogonal complement of X: X\u22a5 := {u \u2208 Rn : u \u00b7 (x\u2032 \u2212 x) = 0 for all x, x\u2032 \u2208 X}. We use the convention \u2205\u22a5 = Rn. A set K \u2208 Rn is called a cone if it is closed under multiplication by positive scalars. If a cone is convex, it is also closed under addition. Since \u2126 is finite, the realizable setM = conv(\u2126) is a polytope. Its boundary can be decomposed into faces. More precisely, X \u2286 \u2126, X 6= \u2205, forms a face of M if X is the set of maximizers over \u2126 of some linear function.6 We also view X = \u2205 as a face of M. With this definition, for any two faces X , X \u2032, also their intersection X \u2229X \u2032 is a face."}, {"heading": "3 CHARACTERIZING SOLUTION SETS", "text": "We start with the optimality (KKT) conditions for the Convex Program (2.1), as characterized by the next lemma. One of the key conditions is that the solution prices must be in the convex hull of the belief \u00b5 and all the \u03c9\u2019s for which the budget constraints are tight. The set of tight constraints is always a face of the polytopeM. We allow an empty set as a face, which corresponds to the case when none of the constraints are tight and the solution prices coincide with \u00b5. The proof follows by analyzing KKT conditions (see Appendix C of the full version for details).\n6Strictly speaking, this is the definition of an exposed face, but all faces of a polytope are exposed, so the distinction does not matter here. The exposed face is typically defined to be conv(X), but in this paper, it is more convenient to work with X directly.\nLemma 3.1 (KKT lemma). Let q0 \u2208 Rn. Then q \u2208 Q\u0302(B; q0) if and only if there exists a face X \u2286 \u2126 such that the following conditions hold:\n(a) U(q, x; q0) = U(q, x\u2032; q0), or equivalently (q \u2212 q0) \u00b7 (x\u2032 \u2212 x) = 0, for all x, x\u2032 \u2208 X (b) U(q, \u03c9; q0) \u2265 U(q, x; q0), or equivalently (q \u2212 q0) \u00b7 (\u03c9 \u2212 x) \u2265 0, for all x \u2208 X , \u03c9 \u2208 \u2126\\X (c) p(q) \u2208 conv(X \u222a {\u00b5}) (d) B = \u2212U(q, x; q0) for all x \u2208 X if X 6= \u2205, or\nB \u2265 max\u03c9\u2208\u2126[\u2212U(q, \u03c9; q0)] if X = \u2205\nwhere conditions (a) and (b) hold vacuously for X = \u2205.\nThe condition (a) requires that q \u2212 q0 be orthogonal to the active setX . The set of points satisfying conditions (a) and (c) will be called the Bregman perpendicular and will be defined in the next section. The condition (b) is a statement about acuteness of the angle between q \u2212 q0 (the perpendicular) and the outcomes. It will be the basis of our acute angles assumption. The condition (d) just states how the budget is related to the active set X .\nWitness cones and minimal faces. We now introduce some notation to help us state reinterpretations of the conditions in Lemma 3.1. First of all, given a face X , what is the set of q\u2019s that satisfy conditions (a) and (b)? This is captured by what we call the witness cone.\nDefinition 3.2. The witness cone for a face X \u2286 \u2126 is defined as K(X) := {u \u2208 Rn : u \u00b7 (\u03c9 \u2212 x) \u2265 0 for all x \u2208 X,\u03c9 \u2208 \u2126} if X 6= \u2205, and K(X) := Rn if X = \u2205.\nThe following two properties of witness cones are immediate from the definition:\n\u2022 Anti-monotonicity: if X \u2286 X \u2032, then K(X) \u2287 K(X \u2032). \u2022 Orthogonality: K(X) \u2286 X\u22a5.\nA state q satisfies conditions (a) and (b) for a given face X if and only if q\u2212q0 \u2208 K(X). Now given a state q, consider the set of faces that could satisfy condition (c). This set has a useful structure, namely that there is a unique minimal face (proved in Appendix C of the full version).\nDefinition 3.3. Given a price vector \u03bd \u2208 M, the minimal face for \u03bd is the minimal face X (under inclusion) s.t. \u03bd \u2208 conv(X \u222a {\u00b5}). The minimal face for \u03bd is denoted as X\u03bd .\nWith the existence of a minimal face and the antimonotonicity of the witness sets, it follows that if q and X satisfy conditions (a), (b) and (c), then so do q and Xp(q). Thus we obtain the following version of Lemma 3.1 (proved in Appendix C of the full version).\nTheorem 3.4 (Characterization of Solution Sets). q \u2208 Q\u0302(q0) if and only if q \u2208 [q0 +K(Xp(q))].\nUsing Theorem 3.4, we immediately obtain a characterization of when a price vector \u03bd could be the price vector of an optimal solution to (2.1).\nCorollary 3.5. Q\u0302(\u03bd; q0) = p\u22121(\u03bd) \u2229 [q0 + K(X\u03bd)]. In particular, \u03bd is the price vector of an optimal solution to (2.1) if and only if p\u22121(\u03bd) \u2229 [q0 +K(X\u03bd)] 6= \u2205.\nWe now study an example using the above characterization. More examples can be found in Appendix E of the full version.\nExample 3.6 (Quadratic cost on an obtuse triangle; see Example E.2 in the full version for details). Consider the following outcome space, belief, and the sequence of market states (depicted in Figure 2):\n\u03c91 = (0.0, 0.0) q0 = \u03bd0 = 11 14\u03c92 + 3 14\u03c93 \u03c92 = (1.8, 0.0) q1 = \u03bd1 = 1 3\u03c92 + 2 3\u00b5 \u03c93 = (6.0, 4.2) q2 = \u03bd2 = 1 9\u03c91 + 8 9\u00b5\n\u00b5 = q\u00b5 = (2.7, 1.8) q3 = \u03bd3 \u2248 119\u03c91 + 18 19\u00b5\nUsing the KKT lemma, we can show for j = 1, 2, 3, that qj = \u03bdj is an optimal action at qj\u22121 = \u03bdj\u22121 under belief \u00b5, with the corresponding budgets as:\n\u03c91 \u03c92 \u03c93 U(q1, \u00b7; q0) 0.45 \u22120.09 \u22120.09 B01 = 0.09 U(q2, \u00b7; q1) \u22120.56 \u22120.56 1.12 B12 = 0.56 U(q3, \u00b7; q2) \u22120.565 \u22120.28 . . . 0.82 . . . B23 = 0.565 U(q\u00b5, \u00b7; q0) \u22121.215 \u22121.215 2.565 B0\u00b5 = 1.215\nThe above table also shows that the budget B0\u00b5 = 1.215 suffices to move directly from q0 to q\u00b5. However, note that the sum B01 + B12 + B23 = 1.215 = B0\u00b5, but \u03bd3 6= \u00b5, i.e., after the sequence of optimal actions with budgetsB01, B12, and B23, the market is still not at the belief shared by all agents, even though with the budget B0\u00b5, it would have reached it.\nBudget additivity. The above example suggests that multiple traders with the same belief may have less power in moving the market state towards their belief compared to a single trader with the same belief and the combined budget. Since prediction markets aim to efficiently aggregate information from agents, it is natural to ask under what conditions multiple traders with the same beliefs do have a combined impact equal to a single trader with the combined budget.\nNext, we formally define this property as budget additivity. We then define the Euclidean version of the acute angles condition that we show is sufficient for budget additivity.\nDefinition 3.7 (Budget additivity). We say that a prediction market is budget additive onM\u2032 \u2286M if for all beliefs \u00b5 \u2208 M\u2032 and all initial states q0 \u2208 p\u22121(M\u2032) the following holds: For any budgets B,B\u2032 \u2265 0 and any sequence of solutions q \u2208 Q\u0302(B; q0) and q\u2032 \u2208 Q\u0302(B\u2032; q), we have p(q), p(q\u2032) \u2208 M\u2032 and q\u2032 \u2208 Q\u0302(B +B\u2032; q0).\nIn other words, the market is budget additive if the sequence of optimal actions of two agents with the same be-\nlief and budgetsB andB\u2032 is also an optimal action of a single agent with the same belief and a larger budget B +B\u2032. Thanks to Theorem 2.2 we then also obtain that the price vector following the sequence of optimal actions by the two agents is the same as the price vector after the optimal action by an agent with the combined budget (all with the same beliefs).\nWe now state the acute angles assumption for the Euclidean case, to give an intuition. Our acute angles assumption (Definition 5.1) is a generalization of this. We later show that the acute angles property is sufficient for budget additivity (Theorem 5.2). Definition 3.8. We say that the Euclidean acute angles hold for a face X , if the angle between any point \u03bd\u0304 \u2208 M, its projection on the affine hull of X and any payoff \u03c9 \u2208 \u2126 is non-obtuse (the angle is measured at the projection).\nBased on the above example, one may hypothesize that the obtuse angles are to blame for the lack of budget additivity. In the following sections we will show that this is indeed the case, but that the notion of obtuse/acute angles depends on the Bregman divergence. In particular, the above example would have been budget-additive if we used the logpartition cost instead of the quadratic cost."}, {"heading": "4 BREGMAN DIVERGENCE AND PERPENDICULARS", "text": "We will see next that the utility function U can be written as the difference of two terms measuring the distance between the belief and the market state before and after the trade. This distance measure is the mixed Bregman divergence.7 To define the Bregman divergence, first let C\u2217 : Rn \u2192 (\u2212\u221e,\u221e] be the convex conjugate of C defined as C\u2217(\u03bd) := supq\u2032\u2208Rn [q\n\u2032 \u00b7 \u03bd \u2212 C(q\u2032)] . Since C\u2217 is a supremum of linear functions, it is convex lower semicontinuous. Up to a constant, it characterizes the maximum achievable utility on an outcome \u03c9 for a fixed initial state q\n7Our notion of Bregman divergence is more general than typically assumed in the literature.\nas supq\u2032\u2208Rn U(q \u2032, \u03c9; q) = C\u2217(\u03c9)+\n[ C(q)\u2212q\u00b7\u03c9 ] . The term\nin the brackets is always finite, but C\u2217 might be positive infinite. We make a standard assumption that C\u2217(\u03c9) < \u221e for all \u03c9 \u2208 \u2126, i.e., that the maximum achievable utility, which is also the maximum loss of the market maker, is bounded by a finite constant. By convexity, this implies that C\u2217(\u00b5) < \u221e for all \u00b5 \u2208 M. The Bregman divergence derived from C is a function D : Rn \u00d7 Rn \u2192 (\u2212\u221e,\u221e] measuring the maximum expected utility under belief \u00b5 at a state q\nD(q, \u00b5) := C(q) +C\u2217(\u00b5)\u2212 q \u00b7\u00b5 = supq\u2032\u2208Rn U(q\u2032, \u00b5; q) .\nFrom the convexity ofC andC\u2217 and the definition ofC\u2217, it is clear that: (i) D is convex and lower semi-continuous in each argument separately; (ii) D is non-negative; and (iii) D is zero iff p(q) = \u2207C(q) = \u00b5. By the bounded loss assumption, Bregman divergence is finite on \u00b5 \u2208 M. For \u00b5 \u2208M, we can write\nU(q\u2032, \u00b5; q) = D(q, \u00b5)\u2212D(q\u2032, \u00b5) . (4.1)\nThus, maximizing the expected utility is the same as minimizing the Bregman divergence between the state q\u2032 and the belief \u00b5. From Eq. (4.1) it is also clear that each constraint in (2.1) is equivalent to D(q, \u03c9) \u2264 D(q0, \u03c9) + B, and the geometric interpretation is that the agent seeks to find the state closest to his belief, within the intersection of Bregman balls\nFor the quadratic cost, we have C\u2217(\u03bd) = 12\u2016\u03bd\u2016 2 and D(q, \u03bd) = 12\u2016q \u2212 \u03bd\u2016 2, i.e., the Bregman divergence coincides with the Euclidean distance squared. For logpartition cost, we have C\u2217(\u03bd) = \u2211 \u03c9\u2208\u2126 P\u03bd(\u03c9) lnP\u03bd(\u03c9) where P\u03bd is the distribution maximizing entropy among P satisfying EP [\u03c9] = \u03bd. The Bregman divergence is the KLdivergence between Pq and P\u03bd : D(q, \u03bd) = KL(P\u03bd\u2016Pq).\nConvex analysis. We overview a few standard definitions and results from convex analysis. For X \u2286 Rn, we write riX for the relative interior of X (i.e., the interior relative to the affine hull). For a convex function F : Rn \u2192 (\u2212\u221e,\u221e], we define its effective domain\nas domF := {u \u2208 Rn : F (u) < \u221e} (i.e., the set of points where it is finite). The subdifferential of F at a point u is the set \u2202F (u) := {v \u2208 Rn : F (u\u2032) \u2265 F (u) + (u\u2032 \u2212 u) \u00b7 v for all u\u2032 \u2208 Rn}. We say that F is subdifferentiable at u if \u2202F (u) 6= \u2205. A standard result of convex analysis states that F is always subdifferentiable on a superset of ri domF . If F is not only convex, but also lower semi-continuous, then \u2202F and \u2202F \u2217 are inverses in the sense that v \u2208 \u2202F (u) iff u \u2208 \u2202F \u2217(v). If F is differentiable everywhere on Rn, then F \u2217 is strictly convex on ri domF \u2217.\nLet im p := {p(q) : q \u2208 Rn} denote the set of prices that can be expressed by market states. The implications for our setting are that: (i) C\u2217 is subdifferentiable on im p; (ii) p\u22121(\u03bd) = \u2202C\u2217(\u03bd) for all \u03bd \u2208 Rn; (iii) all beliefs in ri domC\u2217 can be expressed by some state q; (iv) C\u2217 is strictly convex on ri domC\u2217, and similarly D(q, \u03bd) is strictly convex on ri domC\u2217 as a function of the second argument."}, {"heading": "Assumptions on the cost function.", "text": "\u2022 Convexity and differentiability on Rn. C is convex and differentiable on Rn. \u2022 Finite loss.M\u2286 domC\u2217, i.e., C\u2217 is finite onM. \u2022 Inclusion of the relative interior. riM\u2286 ri domC\u2217.\nThe first two assumptions are standard. The third assumption is a regularity condition that we require in our results. Here we briefly discuss how it compares with the finite loss assumption. While the two assumptions look similar, neither of them implies the other. For example, if domC\u2217 is an n-dimensional simplex and M is one of its lower dimensional faces, which are lower dimensional simplices, then the finite loss assumption holds, but the inclusion assumption does not. Similarly, for n = 1 and M = [0, 1], the inclusion assumption is satisfied by the conjugate C\u2217(\u03bd) = 1/\u03bd + 1/(1 \u2212 \u03bd) on \u03bd \u2208 (0, 1) and C\u2217(\u03bd) = \u221e on \u03bd 6\u2208 (0, 1), but this conjugate does not satisfy the finite loss assumption.\nWe do not view the inclusion assumption as very restrictive, since it is satisfied by many common cost functions. For instance, it always holds when C is constructed as in [1], because their construction guarantees domC\u2217 = M. However, the inclusion assumption might not hold for cost functions that allow arbitrage (e.g., [6]).\nOur main result relies on strict convexity of C\u2217 on ri domC\u2217, so some of our statements will require that the market prices and beliefs lie in that set. The inclusion assumption above guarantees that at the minimum riM \u2286 ri domC\u2217, but the boundary of M is not necessarily included. To allow some generality beyond riM, we define the set\nM\u0303 :=\n{ M ifM\u2286 ri domC\u2217\nriM otherwise.\nIn either case we obtain that M\u0303 \u2286 ri domC\u2217 \u2286 im p, i.e., beliefs in M\u0303 can be expressed by some state q. For the quadratic cost, M\u0303 = M. For the log-partition cost, M\u0303 = riM.\nPerpendiculars. We now define the notion of a Bregman perpendicular to an affine space. This is a constructive definition. It plays a central role in the definition of the acute angles assumption, and also in the proof of the main result (Theorem 5.2). We will see that the set of optimal price vectors for different budgets is a sequence of Bregman perpendiculars. Naturally, perpendiculars are closely related to the conditions in Lemma 3.1; in particular to the set of q\u2019s that satisfy conditions (a) and (c) for a given face X .\nFor quadratic costs, Bregman perpendiculars coincide with the usual Euclidean perpendiculars. Consider an affine space and a point not in it. A projection of the point onto the space is the point in the space that is closest in Euclidean distance to the given point. Now consider moving this affine space towards the projected point. The locus of the projection as we move the space is the perpendicular to the space through the given point. We extend this definition to arbitrary Bregman divergences by defining the projection using the corresponding Bregman divergence.\nA Bregman perpendicular is determined by three geometric objects within the affine hull aff(domC\u2217). The first of these is an affine space, say A0 \u2286 aff(domC\u2217). The second is a point a1 \u2208 aff(domC\u2217)\\A0. The affine space A = aff(A0 \u222a {a1}) \u2286 aff(domC\u2217) will be the ambient space that will contain the perpendicular. Define parallel spaces to A0 in A, for an arbitrary point a0 \u2208 A0, as A\u03bb := A0 +\u03bb(a1\u2212 a0) for \u03bb \u2208 R. Note that the definition of A\u03bb is independent of the choice of a0. The third geometric object is a market state q \u2208 Rn such that p(q) \u2208 A. For technical reasons, we will define a perpendicular at q rather than a more natural notion, which would be at p(q). Our reason for switching into q-space is that inner products, defining optimality of the Bregman projection, are between elements of q-space and \u03bd-space (the two spaces coincide for Euclidean distance). For all \u03bb \u2208 R define a Bregman projection of q onto A\u03bb as\n\u03bd\u03bb := argmin \u03bd\u2208A\u03bb D(q, \u03bd) .\nSince D(q, \u03bd) is bounded from below and lower semicontinuous, the minimum is always attained (but it may be equal to \u221e). If it is attained at more than one point, we choose an arbitrary minimizer. Whenever we can choose \u03bd\u03bb \u2208 ri domC\u2217, this \u03bd\u03bb must be the unique minimizer by strict convexity of D(q, \u00b7) on ri domC\u2217, and the minimum is finite. We use these \u03bd\u03bb\u2019s to define the perpendicular:\nDefinition 4.1. Given A0, a1 and q as above, the a1perpendicular to A0 at q is a map \u03b3 : \u03bb 7\u2192 \u03bd\u03bb defined over \u03bb \u2208 \u039b := {\u03bb \u2208 R : \u03bd\u03bb \u2208 ri domC\u2217}. We call \u039b the domain of the perpendicular. We define a total order on\n\u03bd\u03bb, \u03bd\u03bb\u2032 \u2208 im \u03b3 as \u03bd\u03bb \u03bd\u03bb\u2032 iff \u03bb \u2264 \u03bb\u2032.\nIn Appendix F.2 of the full version, we show that perpendiculars are continuous maps. The name perpendicular is justified by the following proposition which matches our Euclidean intuition that the perpendiculars can be obtained by intersecting the ambient space A with the affine space which passes through q and is orthogonal to A0. It also shows that the perpendicular corresponds to the set of prices that satisfy conditions (a) and (c) with the convex hull relaxed to the affine hull (when A0 is the affine hull of face X , point a1 coincides with \u00b5 and q is the initial state). Recall that for an arbitrary set X \u2286 Rn, its orthogonal complement is defined as X\u22a5 := {u : u \u00b7 (x\u2032 \u2212 x) = 0 for all x, x\u2032 \u2208 X}. Proposition 4.2. Let \u03b3 be the a1-perpendicular to A0 at q, and let A = aff(A0 \u222a {a1}). The following two statements are equivalent for any \u03bd\u2032 \u2208 Rn:\n(i) \u03bd\u2032 \u2208 im \u03b3 (ii) \u03bd\u2032 \u2208 A \u2229 (ri domC\u2217), p\u22121(\u03bd\u2032) \u2229 (q +A\u22a50 ) 6= \u2205\nProposition 4.2 is proved in Appendix F of the full version. The perpendiculars have the following closure property which is useful for showing budget additivity (also proved in Appendix F of the full version):\nProposition 4.3. Under the assumptions of Proposition 4.2, \u03b3 is also the a1-perpendicular to A0 at any q\u2032 \u2208 p\u22121(im \u03b3) \u2229 (q +A\u22a50 )."}, {"heading": "5 BUDGET ADDITIVITY", "text": "We now state the acute angles property which links the Bregman perpendicular and Corollary 3.5, and is sufficient for budget additivity.\nDefinition 5.1. We say that the acute angles hold for a face X , if for every \u00b5-perpendicular \u03b3 to X at q, such that \u00b5 \u2208 M\u0303 and q \u2208 p\u22121(M\u0303), the following holds: If \u03bd\u2032 \u2208 im \u03b3 and \u03bd\u2032 p(q), then p\u22121(\u03bd\u2032) \u2229 [q +K(X)] 6= \u2205.\nThe motivation for the name \u201cacute angles\u201d comes from the Euclidean distance case, where this assumption is equivalent to Definition 3.8 (see Proposition G.1 in the full version). The acute angles property is non-trivial and we have seen that without this property, budget additivity need not hold; we conjecture that it is also a necessary condition. After stating the main theorem, we analyze in more detail when the acute angles are satisfied by the quadratic and log-partition costs.\nWe now state the main result, that the acute angles are sufficient for budget additivity:\nTheorem 5.2 (Sufficient conditions for budget additivity). If acute angles hold for every face X \u2286 \u2126, then the prediction market is budget additive on M\u0303.\nSufficient conditions for acute angles. We next give the sufficient conditions when the acute angles hold for the quadratic and log-partition cost functions. We also show that the acute angles hold for all one-dimensional outcome spaces, and that they are preserved by taking direct sums of markets. Recall that a set K \u2208 Rn is called a cone if it is closed under multiplication by positive scalars. A cone is called acute, if x \u00b7 y \u2265 0 for all x, y \u2208 K. An affine cone with the vertex a0 is a set K\u2032 of the form a0 + K where K is a cone.\nTheorem 5.3 (Sufficient condition for quadratic cost). Let X be a face and A\u2032 be the affine space a0 + X\u22a5 for an arbitrary a0 \u2208 aff(X). Acute angles hold for the face X and the quadratic cost if and only if the projection of \u2126 (or, equivalently,M) onA\u2032 is contained in an affine acute cone with the vertex a0.\nCorollary 5.4. Acute angles hold for the quadratic cost and a hypercube \u2126 = {0, 1}n. Corollary 5.5. Acute angles hold for the quadratic cost and simplex \u2126 = {ei : i \u2208 [n]} where [n] = {1, 2, . . . , n} and ei is the i-th vector of the standard basis in Rn. Theorem 5.6 (Log-partition over affinely independent outcomes). If the set \u2126 is affinely independent then acute angles assumption is satisfied for the log-partition cost.\nTheorem 5.7 (One-dimensional outcome spaces). Acute angles hold for any cost function ifM is a line segment.\nLet \u21261 \u2286 Rn1 and \u21262 \u2286 Rn2 be outcome spaces with costs C1 andC2. We define the direct sum of \u21261 and \u21262 to be the outcome space \u2126 = \u21261 \u00d7 \u21262 with the cost C : Rn1+n2 \u2192 R defined as C(q1, q2) = C1(q1) + C2(q2). Theorem 5.8 (Acute angles for direct sums). If acute angles hold for \u21261 with cost C1, and \u21262 with cost C2, then they also hold for their direct sum.\nAs a direct consequence of this theorem, we obtain that the log-partition cost function satisfies the acute angles assumption on a hypercube. More generally, any direct sum of costs on line segments satisfies the acute angles. This means that all cost-based prediction markets consisting of independent binary questions are budget additive, regardless of costs used to price individual questions.\nAs mentioned in the introduction, a vast number of deployed cost-based prediction markets consists of independent questions (not necessarily binary), each priced according to an LMSR (i.e., a log-partition cost on a simplex). Theorems 5.6 and 5.8 imply that this industry standard is budget additive."}, {"heading": "5.1 Proof of Theorem 5.2", "text": "In this section we sketch the proof of Theorem 5.2 (for a complete proof see Appendix H of the full version). We proceed in several steps. Let \u03bd0 = p(q0). Assuming acute\nangles, we begin by constructing an oriented curve L joining \u03bd0 with \u00b5, by sequentially choosing portions of perpendiculars for monotonically decreasing active sets. We then show that budget additivity holds for any solutions with prices in L, and finally show that the curve L is the locus of the optimal prices of solutions Q\u0302(q0), as well as optimal prices of solutions Q\u0302(q) for any q \u2208 Q\u0302(q0).\nPart 1: Construction of the solution path L. In this part, we construct:\n\u2022 a sequence of prices \u03bd0, \u03bd1, . . . , \u03bdk with \u03bd0 = p(q0) and \u03bdk = \u00b5 \u2022 a sequence of oriented curves `0, . . . , `k\u22121 where each `i goes from \u03bdi to \u03bdi+1 \u2022 a monotone sequence of sets \u2126 \u2287 X0 \u2283 X1 \u2283 \u00b7 \u00b7 \u00b7 \u2283 Xk = \u2205, such that the following minimality property holds: Xi is the minimal face for all \u03bd \u2208 (im `i)\\{\u03bdi+1} for i \u2264 k \u2212 1, and Xk is the minimal face for \u03bdk. \u2022 a sequence of states q1, . . . , qk\u22121 such that qi \u2208 p\u22121(\u03bdi) \u2229 [qi\u22121 +K(Xi\u22121)]\nThe curves `i will be referred to as segments. The curve obtained by concatenating the segments `0 through `k\u22121 will be called the solution path and denoted L. In the special case that \u03bd0 = \u00b5, we have k = 0, X0 = \u2205 and L is a degenerate curve with imL = {\u00b5}.\nIf \u03bd0 6= \u00b5, we construct the sequence of segments iteratively. Let X0 6= \u2205 be the minimal face such that \u03bd0 \u2208 conv(X0 \u222a {\u00b5}). By the minimality, \u00b5 6\u2208 aff(X0). Let \u03b3 be the \u00b5-perpendicular to aff(X0) at q0. The curve \u03b3 passes through \u03bd0 and eventually reaches the boundary of conv(X0 \u222a {\u00b5}) at some \u03bd1 by continuity of \u03b3 (see Theorem F.3). Let segment `0 be the portion of \u03b3 going from \u03bd0 to \u03bd1.\nThis construction gives us the first segment `0. There are two possibilities:\n1. \u03bd1 = \u00b5; in this case we are done; 2. \u03bd1 lies on a lower-dimensional face of conv(X0 \u222a {\u00b5}); in this case, we pick some q1 \u2208 p\u22121(\u03bd1)\u2229 [q0 + K(X0)], which can be done by the acute angles assumption, and use the above construction again, starting with q1, and obtaining a new set X1 \u2282 X0 and a new segment `1; and iterate.\nThe above process eventually ends, because with each iteration, the size of the active set decreases. This construction yields monotonicity of Xi and the minimality property.\nThe above construction yields a specific sequence of qi \u2208 p\u22121(\u03bdi) \u2229 [qi\u22121 + K(Xi\u22121)]. We show in Appendix H of the full version that actually qi \u2208 p\u22121(\u03bdi) \u2229 (q0 + X\u22a5i\u22121) and that the construction of L is independent of the choice of q1, q2, . . . , qk\u22121.\nPart 2: Budget additivity for points on L. Let \u03bd, \u03bd\u2032 \u2208\nimL such that \u03bd \u03bd\u2032. Let q \u2208 Q\u0302(\u03bd; q0) and q\u2032 \u2208 Q\u0302(\u03bd\u2032; q) such that q \u2208 Q\u0302(B; q0) and q\u2032 \u2208 Q\u0302(B\u2032; q). In this part we show that q\u2032 \u2208 Q\u0302(B +B\u2032; q0).\nFirst, consider the case that \u03bd\u2032 = \u00b5. To see that q\u2032 \u2208 Q\u0302(B + B\u2032; q0), first note that the constraints of Convex Program (2.1) hold, because U(q\u2032, \u03c9; q0) = U(q\u2032, \u03c9; q) + U(q, \u03c9; q0) \u2265 \u2212B\u2032 \u2212 B for all \u03c9 by path independence of the utility function. As noted in the introduction, in the absence of constraints, the utility U(q\u0304, \u00b5; q0) is maximized at any q\u0304 with p(q\u0304) = \u00b5. Thus, q\u2032 is a global maximizer of the utility and satisfies the constraints, so q\u2032 \u2208 Q\u0302(B +B\u2032; q0). If \u03bd = \u00b5, we must also have \u03bd\u2032 = \u00b5 and the statement holds by previous reasoning.\nIn the remainder, we only analyze the case \u03bd \u03bd\u2032 \u227a \u00b5. This means that \u03bd \u2208 (im `i)\\{\u03bdi+1} and \u03bd\u2032 \u2208 (im `j)\\{\u03bdj+1} for i \u2264 j. By Theorem 3.4, we therefore must have q \u2208 [q0 + K(Xi)] and q\u2032 \u2208 [q + K(Xj)]. By anti-monotonicity of witness cones, K(Xj) \u2287 K(Xi) and hence, q\u2032 \u2208 [q0 +K(Xj)], yielding q\u2032 \u2208 Q\u0302(\u03bd\u2032; q0).\nWe now argue that the budgets add up. Let x \u2208 Xj \u2286 Xi. By Lemma 3.1, we obtain that q \u2208 Q\u0302(B; q0) for B = \u2212U(q, x; q0), and q\u2032 \u2208 Q\u0302(B\u2032; q) for B\u2032 = \u2212U(q\u2032, x; q), and finally q\u2032 \u2208 Q\u0302(B\u0304; q0) for B\u0304 = \u2212U(q\u2032, x; q0). However, by path independence of the utility function\nB\u0304 = \u2212U(q\u2032, x; q0) = \u2212U(q\u2032, x; q)\u2212U(q, x; q0) = B\u2032+B.\nPart 3: L as the locus of all solutions. See Appendix H of the full version for the proof that\nQ\u0302(q0) = \u22c3 \u03bd\u2208imL Q\u0302(\u03bd; q0) .\nPart 3\u2019: L as the locus of solutions starting at a midpoint. Let \u03bd \u2208 imL and q \u2208 Q\u0302(\u03bd; q0). Since Q\u0302(\u03bd; q0) \u2286 p\u22121(\u03bd) \u2229 (q0 + X\u22a5\u03bd ), Part 1\u2019 (Appendix H of the full version) yields that the solution path L\u2032 for q coincides with the portion of L starting at \u03bd. Applying the proof of Part 3 to L\u2032, we obtain\nQ\u0302(q) = \u22c3 \u03bd\u2032\u2208imL:\u03bd\u2032 \u03bd Q\u0302(\u03bd \u2032; q) .\nPart 4: Proof of the theorem. Let B,B\u2032 \u2265 0 and q \u2208 Q\u0302(B; q0) and q\u2032 \u2208 Q\u0302(B\u2032; q). From Parts 3 and 3\u2019, we know that q \u2208 Q\u0302(\u03bd; q0) and q\u2032 \u2208 Q\u0302(\u03bd\u2032; q) for some \u03bd, \u03bd\u2032 \u2208 imL such that \u03bd \u03bd\u2032. By Part 2, we therefore obtain that q\u2032 \u2208 Q\u0302(B +B\u2032; q0), proving the theorem."}, {"heading": "A EXAMPLES OF COST FUNCTIONS", "text": "Example A.1 (Quadratic cost). The first example of a cost function, applicable to arbitrary outcome sets \u2126, is the quadratic cost function defined by C(q) = 12\u2016q\u2016\n2. In this case, p(q) = q, and U(q\u2032, \u00b5; q) = 12\u2016q\u2212\u00b5\u2016 2\u2212 12\u2016q \u2032\u2212\u00b5\u20162. It is clear that the expected utility is maximized when p(q\u2032) = q\u2032 = \u00b5.\nConvex conjugate and Bregman divergence: C\u2217(\u03bd) = 1 2\u2016\u03bd\u2016 2 and D(q, \u03bd) = 12\u2016q \u2212 \u03bd\u2016 2, i.e., the Bregman divergence is a monotone transformation of the Euclidean distance. Example A.2 (LMSR). Our second example is Hanson\u2019s logarithmic market-scoring rule (LMSR) [12, 13], which is applied to complete markets whose outcomes coincide with basis vectors, i.e., \u2126 = {ei : i \u2208 [n]} where ei denotes the i-th basis vector and [n] denotes the set {1, . . . , n}. In this case M is the simplex in Rn and beliefs \u00b5 are in one-toone correspondence with probability distributions over \u2126. The LMSR cost function is\nC(q) = ln (\u2211n i=1 e q[i] )\nwhere q[i] denotes the i-th coordinate of q. The price vector is\np(q)[i] = \u2202C(q)\n\u2202q[i] = eq[i]\u2211n j=1 e q[j] = eq[i]\u2212C(q) .\nFor \u00b5 \u2208M, the expected utility function takes form\nU(q\u2032, \u00b5; q) = n\u2211 i=1 \u00b5[i] ( ln p(q\u2032)[i]\u2212 ln p(q)[i] )\n= KL(\u00b5\u2016p(q))\u2212 KL(\u00b5\u2016p(q\u2032)) , where KL(\u00b5\u2016\u03bd) = \u2211n i=1 \u00b5[i] ln(\u00b5[i]/\u03bd[i]) is the KLdivergence. KL-divergence is not symmetric, but it is nonnegative, and zero only if the arguments are equal. Thus, the expected utility is clearly maximized if and only if \u00b5 = p(q\u2032).\nConvex conjugate and Bregman divergence: C\u2217(\u03bd) = \u221e if \u03bd is not a probability measure on \u2126, and C\u2217(\u03bd) =\u2211n i=1 \u03bd[i] ln \u03bd[i] otherwise, with the convention 0 ln 0 = 0. The Bregman divergence is D(q, \u03bd) = KL(\u03bd\u2016p(q)). Example A.3 (Log-partition cost). Next example is the log-partition function, which is applicable to arbitrary outcome sets \u2126 and which generalizes LMSR:\nC(q) = ln (\u2211 \u03c9\u2208\u2126 e q\u00b7\u03c9) .\nLet Pq be the probability measure over \u2126 defined by\nPq(\u03c9) = e q\u00b7\u03c9\u2212C(q) .\nThe prices then correspond to expected values of \u03c9 under Pq:\np(q) = \u2211 \u03c9\u2208\u2126 Pq(\u03c9)\u03c9 .\nFor \u00b5 \u2208M, let P\u00b5 denote the distribution of maximum entropy among P with EP [\u03c9] = \u00b5 (this distribution is unique and always exists). Note that we are overloading notation on Pq and P\u03bd and use the \u201ctype\u201d of the subscript to indicate which probability distribution we have in mind. The expected utility function can be written as\nU(q\u2032, \u00b5; q) = (q\u2032 \u2212 q) \u00b7 E \u03c9\u223cP\u00b5 [\u03c9]\u2212 C(q\u2032) + C(q)\n= E \u03c9\u223cP\u00b5 [lnPq\u2032(\u03c9)\u2212 lnPq(\u03c9)]\n= E \u03c9\u223cP\u00b5\n[ ln ( P\u00b5(\u03c9)\nPq(\u03c9)\n) \u2212 ln ( P\u00b5(\u03c9)\nPq\u2032(\u03c9) )] = KL(P\u00b5\u2016Pq)\u2212 KL(P\u00b5\u2016Pq\u2032) .\nA standard duality result shows that the infimum of KL(P\u00b5\u2016Pq\u2032) over the set {Pq\u2032 : q\u2032 \u2208 Rn} is zero. If there exists q\u2032 attaining this minimum, we must have P\u00b5 = Pq\u2032 and thus \u00b5 = p(q\u2032). We argue that the converse is true as well. Let q\u2032, q\u2032\u2032 be such that Pq\u2032 = P\u00b5 and p(q\u2032) = p(q\u2032\u2032) = \u00b5. Then by convexity of C, we have C(q\u2032\u2032)\u2212 C(q\u2032) = (q\u2032\u2032 \u2212 q\u2032) \u00b7 p(q\u2032). Therefore,\nKL(Pq\u2032\u2016Pq\u2032\u2032) = (q\u2032 \u2212 q\u2032\u2032) \u00b7 p(q\u2032)\u2212 C(q\u2032) + C(q\u2032\u2032) = 0 ,\ni.e., Pq\u2032 = Pq\u2032\u2032 = P\u00b5. Hence, for any q \u2208 Rn, Pq is exactly the distribution of maximum entropy among those P that satisfy EP [\u03c9] = p(q). In other words, Pp(q) = Pq .\nConvex conjugate and Bregman divergence: C\u2217(\u03bd) = \u221e if there is no distribution P on \u2126 such that EP [\u03c9] = \u03bd, and C\u2217(\u03bd) = \u2211 \u03c9\u2208\u2126 P\u03bd(\u03c9) lnP\u03bd(\u03c9) otherwise. The Bregman divergence D(q, \u03bd) = KL(P\u03bd\u2016Pq) = KL(P\u03bd\u2016Pp(q))."}, {"heading": "B PROOF OF THEOREM 2.2", "text": "Proof of Theorem 2.2. Throughout this proof we use concepts of convex conjugacy and Bregman divergence introduced in Section 4. LetB \u2265 0 and B := {q : U(q, \u03c9; q0) \u2265 \u2212B for all \u03c9 \u2208 \u2126} be the set of states satisfying the constraints of Convex Program (2.1). Using the definition of utility function, we can rewrite Convex Program (2.1) as\nmax q\u2208Rn\n[(q \u2212 q0) \u00b7 \u00b5\u2212 C(q) + C(q0)\u2212 IB(q)] (B.1)\nwhere IB(\u00b7) is the convex indicator function, equal to 0 on the set B and \u221e outside it. Since the cost function C is convex on Rn, and B is closed, convex and non-empty, Fenchel\u2019s Duality Theorem [18, Theorem 31.1] implies that the supremum of the above objective equals the following minimum\nmin \u03bd\u2208Rn\n[C\u2217(\u03bd)\u2212 q0 \u00b7 \u00b5+ C(q0) + I\u2217B(\u00b5\u2212 \u03bd)] (B.2)\nand this minimum is attained at some \u03bd\u0302 \u2208 Rn. Now, let q\u0302 \u2208 Q\u0302(B; q0) be a solution of Eq. (B.1). By Fenchel\u2019s\nDuality, the gap between the objectives of Eq. (B.2) and Eq. (B.1) at \u03bd\u0302 and q\u0302 must be zero:\n0 = C\u2217(\u03bd\u0302)\u2212 q0 \u00b7 \u00b5+ C(q0) + I\u2217B(\u00b5\u2212 \u03bd\u0302) \u2212 (q\u0302 \u2212 q0) \u00b7 \u00b5+ C(q\u0302)\u2212 C(q0) + IB(q\u0302)\n= C\u2217(\u03bd\u0302)\u2212 q\u0302 \u00b7 \u03bd\u0302 + C(q\u0302) + I\u2217B(\u00b5\u2212 \u03bd\u0302)\u2212 q\u0302 \u00b7 (\u00b5\u2212 \u03bd\u0302) + IB(q\u0302)\n= D(q\u0302, \u03bd\u0302) + [ I\u2217B(\u00b5\u2212 \u03bd\u0302)\u2212 ( q\u0302 \u00b7 (\u00b5\u2212 \u03bd\u0302)\u2212 IB(q\u0302) )] .\nThe term in the brackets is non-negative from the definition of the convex conjugate. Since D(q\u0302, \u03bd\u0302) is also nonnegative, we obtain that it must be zero, i.e., p(q\u0302) = \u03bd\u0302. Since this reasoning is independent of the choice q\u0302 \u2208 Q\u0302(B; q0), the theorem follows."}, {"heading": "C OPTIMALITY CONDITIONS AND THE MINIMAL FACE", "text": "This appendix discusses arbitrage-free initialization, provides proofs of optimality conditions (Lemma 3.1 and Theorem 3.4), and shows that minimal faces are well defined."}, {"heading": "C.1 Arbitrage-free initialization", "text": "Throughout the paper we assume that the initial state q0 is arbitrage-free in the sense that a trader with no budget prefers to stay in q0:\nDefinition C.1. We say that the initial state q0 is arbitragefree with respect to \u00b5 \u2208 M if q0 is an optimal state at budget zero, i.e., q0 \u2208 Q\u0302(0; q0).\nThis corresponds to the assumption that a trader cannot extract a positive expected profit without risking some capital. Below we show that the condition is easily ensured for both the log-partition and quadratic cost.\nThe assumption of arbitrage-free initialization was added after the paper was published in the Proceedings of the 31st Conference on Uncertainty in Artificial Intelligence, 2015. For the sake of consistency with the published version, we have only made corrections in Appendix. Without arbitrage-free initialization, Lemma 3.1 and its corollaries fail to hold forB = 0. The main text requires the following four corrections:\nLemma 3.1: Let q0 be arbitrage-free. Then q \u2208 Q\u0302(B; q0) if and only if . . .\nTheorem 3.4: Let q0 be arbitrage-free. Then q \u2208 Q\u0302(q0) if and only if . . .\nCorollary 3.5: Let q0 be arbitrage-free. Then Q\u0302(\u03bd; q0) = p\u22121(\u03bd) \u2229 [q0 +K(X\u03bd)]. In particular, . . .\nDefinition 3.7: . . . if for all beliefs \u00b5 \u2208 M\u2032 and all arbitrage-free initial states q0 \u2208 p\u22121(M\u2032) . . .\nBelow we show that regardless of q0, any q \u2208 Q\u0302(q0) is arbitrage-free. This property is useful in proving our main result (Theorem 5.2). We also derive necessary and sufficient conditions for arbitrage-free initialization. In particular, we show that any q0 is arbitrage-free for the logpartition cost, and any q0 with p(q0) \u2208M is arbitrage-free for the quadratic cost.\nProposition C.2. Any q \u2208 Q\u0302(q0) is arbitrage-free for any q0 \u2208 Rn.\nProof. Let q \u2208 Q\u0302(B; q0) for some B \u2265 0 and let q\u2032 \u2208 Q\u0302(0; q). We will use path independence to show that also q \u2208 Q\u0302(0; q). To begin, note that the budget constraints satisfied by q and q\u2032 are\nU(q, \u03c9; q0) \u2265 \u2212B for all \u03c9 \u2208 \u2126, U(q\u2032, \u03c9; q) \u2265 0 for all \u03c9 \u2208 \u2126.\nBy path independence, we therefore have, for all \u03c9 \u2208 \u2126,\nU(q\u2032, \u03c9; q0) = U(q \u2032, \u03c9; q) + U(q, \u03c9; q0) \u2265 \u2212B ,\nso q\u2032 satisfies the budget constraints forB at the initial state q0. Since q is optimal for the budget B and the initial state q0, we must have\nU(q\u2032, \u00b5; q0) \u2264 U(q, \u00b5; q0) .\nPath independence then gives\nU(q\u2032, \u00b5; q) = U(q\u2032, \u00b5; q0)\u2212U(q, \u00b5; q0) \u2264 0 = U(q, \u00b5; q) .\nSince q\u2032 \u2208 Q\u0302(0; q) and q is a feasible action for the budget zero and the initial state q, we must have U(q\u2032, \u00b5; q) = 0 = U(q, \u00b5; q) and thus q \u2208 Q\u0302(0; q).\nProposition C.3. If q0 is arbitrage-free then p(q0) \u2208M.\nProof. For a contradiction, assume p(q0) 6\u2208 M. We will show that there exists a state q\u2032 such that U(q\u2032, \u03bd; q0) \u2265 \u03b5 for all \u03bd \u2208 M and some \u03b5 > 0. This will imply that the budget constraints for B = 0 are satisfied for q\u2032 and also that U(q\u2032, \u00b5; q0) \u2265 \u03b5. This contradicts the optimality of q0 because U(q0, \u00b5; q0) = 0.\nTo proceed, consider the optimization\nsup q\u2208Rn min \u03bd\u2208M U(q, \u03bd; q0)\n= min \u03bd\u2208M sup q\u2208Rn U(q, \u03bd; q0) (C.1)\n= min \u03bd\u2208M sup q\u2208Rn\n[q \u00b7 \u03bd \u2212 q0 \u00b7 \u03bd \u2212 C(q) + C(q0)]\n= min \u03bd\u2208M\n[C\u2217(\u03bd)\u2212 q0 \u00b7 \u03bd + C(q0)] (C.2)\n= min \u03bd\u2208M D(q0, \u03bd) (C.3)\n= D(q0, \u03bd\u0302) (C.4)\nwhere we use Sion\u2019s minimax theorem in Eq. (C.1), the definition of conjugate in Eq. (C.2), and denote the minimizer of Eq. (C.3) as \u03bd\u0302 in Eq. (C.4). By assumption, p(q0) 6\u2208 M and thus p(q0) 6= \u03bd\u0302. This implies that D(q0, \u03bd\u0302) > 0, so the value of the initial supremum is greater than zero. Therefore, there must exist q\u2032 such that min\u03bd\u2208M U(q\n\u2032, \u03bd; q0) =: \u03b5 > 0, yielding the desired contradiction.\nWhile p(q0) \u2208 M is a necessary condition for arbitragefree initialization, it is not sufficient. For example, consider n = 1, M = [0, 1], and the cost function C(q) = max{0, q2/2}. Here, q0 = \u22121 is not arbitrage-free for any \u00b5 \u2208 (0, 1], even though p(q0) = 0 \u2208 M. We next present a technical lemma followed by two sufficient conditions.\nLemma C.4. Let q0 be such that p(q0) \u2208 M and let q \u2208 Q\u0302(0; q0). Then p(q) = p(q0), and for any decomposition of p(q0) into a convex combination over \u03c9, i.e., for any weights c\u03c9 \u2265 0 such that p(q0) = \u2211 \u03c9\u2208\u2126 c\u03c9\u03c9 and\u2211\n\u03c9\u2208\u2126 c\u03c9 = 1, we have c\u03c9U(q, \u03c9; q0) = 0 for all \u03c9.\nProof. Budget constraints on q \u2208 Q\u0302(0; q0) imply that\nU(q, \u03c9; q0) \u2265 0 for all \u03c9 \u2208 \u2126. (C.5)\nFor a given set of weights c\u03c9 write\n0 \u2264 \u2211 \u03c9 c\u03c9U(q, \u03c9; q0) = U ( q, \u2211 \u03c9 c\u03c9\u03c9; q0 ) (C.6)\n= U(q, p(q0); q0)\n= q \u00b7 p(q0)\u2212 q0 \u00b7 p(q0)\u2212 C(q) + C(q0) = q \u00b7 p(q0)\u2212 C\u2217 ( p(q0) ) \u2212 C(q)\n= \u2212D ( q, p(q0) ) .\nSince Bregman divergence is non-negative, we obtain that D(q, p(q0)) = 0 and thus p(q) = p(q0). From Eq. (C.6), we then also obtain that each of the terms c\u03c9U(q, \u03c9; q0) must equal zero, because c\u03c9 \u2265 0 and utilities are nonnegative by Eq. (C.5).\nProposition C.5. The state q0 is arbitrage-free if either of the following conditions holds:\n(a) p(q0) \u2208 riM; (b) p(q0) \u2208M and C is strictly convex."}, {"heading": "Proof.", "text": "Part (a). Let q \u2208 Q\u0302(0; q0). It suffices to show that U(q, \u00b5; q0) \u2264 U(q0, \u00b5; q0) = 0. To begin, note that since p(q0) \u2208 riM, we can write p(q0) as a positive convex combination of \u03c9 \u2208 \u2126, i.e., p(q0) = \u2211 \u03c9\u2208\u2126 c\u03c9\u03c9 where\nc\u03c9 > 0 and \u2211 \u03c9\u2208\u2126 c\u03c9 = 1. By Lemma C.4, we obtain that c\u03c9U(q, \u03c9; q0) = 0 for all \u03c9 and hence U(q, \u03c9; q0) = 0 for all \u03c9. Since \u00b5 is a convex combination of \u03c9, the linearity of utility in the second argument yields U(q, \u00b5; q0) = 0.\nPart (b). We again appeal to Lemma C.4. Let q \u2208 Q\u0302(0; q0). Then by Lemma C.4, we have that p(q) = p(q0), and the strict convexity of C yields q = q0.\nPart (a) implies that every q0 \u2208 Rn is arbitrage-free for the log-partition cost. Part (b) implies that every q0 such that p(q0) \u2208M is arbitrage-free for the quadratic cost."}, {"heading": "C.2 Proofs of Lemma 3.1 and Theorem 3.4", "text": "Proof of Lemma 3.1. We prove the revised version of the lemma with the additional assumption that q0 is arbitragefree (see Appendix C.1). First consider B = 0 and assume q \u2208 Q\u0302(B; q0). Since q0 is arbitrage-free, we have p(q0) \u2208 M, so it can be written as a convex combination of \u03c9 \u2208 \u2126, say p(q0) = \u2211 \u03c9 c\u03c9\u03c9. By Lemma C.4 we therefore obtain that each of the terms c\u03c9U(q, \u03c9; q0) must equal zero. Thus, whenever c\u03c9 > 0, we necessarily have U(q, \u03c9; q0) = 0. Let S := {\u03c9 \u2208 \u2126 : c\u03c9 > 0}. Note that for any x, x\u2032 \u2208 S we have (q\u2212q0)\u00b7(x\u2032\u2212x) = U(q, x\u2032; q0)\u2212U(q, x; q0) = 0. Since S is non-empty, we can pick an arbitrary s \u2208 S and define X := {\u03c9 \u2208 \u2126 : (q \u2212 q0) \u00b7 (\u03c9 \u2212 s) = 0}. We next argue thatX satisfies conditions (a)\u2013(d) and then show that it is actually a face. Conditions (a) and (d) follow from the definition ofX and the fact that U(q, s; q0) = 0. Condition (b) follows because q satisfies budget constraints for B = 0. Finally, condition (c) follows because S \u2286 X . To see that X is a face, note that condition (b) actually shows that X is exactly the set of minimizers of the linear function (q \u2212 q0) \u00b7 \u03c9 over \u03c9 \u2208 \u2126.\nNow, consider B > 0. We begin by forming a Lagrangian of Convex Program (2.1), with non-negative multipliers \u03bb = (\u03bb\u03c9)\u03c9\u2208\u2126:\nL(q, \u03bb) = U(q, \u00b5; q0) + \u2211 \u03c9 \u03bb\u03c9 (U(q, \u03c9; q0) +B) .\nSince the utilities are convex and finite over q \u2208 Rn, and q0 is feasible with all of the constraints satisfied with strict inequalities, KKT conditions are both necessary and sufficient for optimality [18, Corollary 28.3.1]. KKT conditions state that q and \u03bb solve the above problem if and only if the following hold:\n\u2022 primal feasibility: U(q, \u03c9; q0) \u2265 \u2212B for all \u03c9 \u2208 \u2126; \u2022 dual feasibility: \u03bb \u2265 0; \u2022 first-order optimality: \u22071L(q, \u03bb) = 0; \u2022 complementary slackness: \u03bb\u03c9 (U(q, \u03c9; q0) +B) = 0;\nfor all \u03c9 \u2208 \u2126.\nWe next show that KKT conditions imply (a)\u2013(d). Assume that KKT conditions hold. Let X be the set of outcomes with tight constraints, i.e., X = {x \u2208 \u2126 : U(q, x; q0) = \u2212B}. For this X , the conditions (a) and (b) hold by primal feasibility and our definition ofX . Note that we have either X = \u2205 or X = argminx\u2208\u2126(q \u2212 q0) \u00b7 x, i.e., X is a face of M. If X 6= \u2205, then (d) follows from our definition of X . If\nX = \u2205, then (d) follows by primal feasibility. We prove (c) by analyzing first-order optimality. First note that:\n\u22071U(q, \u03bd; q0) = \u03bd \u2212\u2207C(q) = \u03bd \u2212 p(q) .\nThus, first-order optimality is equivalent to \u22071U(q, \u00b5; q0) + \u2211 \u03c9 \u03bb\u03c9\u22071U(q, \u03c9; q0) = 0\n\u00b5\u2212 p(q) + \u2211 \u03c9 \u03bb\u03c9(\u03c9 \u2212 p(q)) = 0\np(q) = \u00b5+\n\u2211 \u03c9 \u03bb\u03c9\u03c9\n1 + \u2211 \u03c9 \u03bb\u03c9 .\nBy complementary slackness, \u03bb\u03c9 = 0 for \u03c9 \u2208 \u2126\\X , so this shows (c).\nFor the converse, assume that (a)\u2013(d) hold. In particular, by (c), let p(q) = c\u00b5\u00b5 + \u2211 \u03c9\u2208X c\u03c9\u03c9 where c\u00b5, c\u03c9 \u2265 0\nand c\u00b5 + \u2211 \u03c9\u2208X c\u03c9 = 1. If c\u00b5 > 0, then we obtain that KKT conditions hold for the given q and \u03bb\u03c9 = c\u03c9/c\u00b5 for \u03c9 \u2208 X and \u03bb\u03c9 = 0 for \u03c9 \u2208 \u2126\\X . Since KKT conditions are sufficient for optimality [18, Theorem 28.3], we obtain q \u2208 Q\u0302(B; q0).\nIf c\u00b5 = 0, we actually have p(q) \u2208 conv(X) and X 6= \u2205. Thus, from (a) and (d),\nB = \u2211 \u03c9\u2208X c\u03c9 [\u2212U(q, \u03c9; q0)] = \u2212U ( q, \u2211 \u03c9\u2208X c\u03c9\u03c9; q0 ) = \u2212U ( q, p(q); q0 ) (C.7)\n= \u2212q \u00b7 p(q) + q0 \u00b7 p(q) + C(q)\u2212 C(q0) (C.8) = \u2212C\u2217 ( p(q) ) + q0 \u00b7 p(q)\u2212 C(q0) (C.9)\n= \u2212D ( q0, p(q) ) . (C.10)\nBy non-negativity of Bregman divergence, Eq. (C.10) can only hold if B = 0 and p(q0) = p(q). Feasibility of q follows by (d) and (b). To see that q is also optimal, first note that U(q, \u03c9; q0) \u2265 0 for all \u03c9. Since \u00b5 is a convex combination of \u03c9, the linearity of U in the second argument implies U(q, \u00b5; q0) \u2265 0. However, by arbitrage-free initialization, q0 is optimal and U(q0, \u00b5; q0) = 0, so we must have U(q, \u00b5; q0) = 0 and q optimal as well.\nProof of Theorem 3.4. We prove the revised version of the theorem with the additional assumption that q0 is arbitragefree (see Appendix C.1). If q \u2208 [q0 + K(Xp(q)) then we have q \u2208 Q\u0302(q0) by Lemma 3.1 with X = Xp(q). For the converse, assume that q \u2208 Q\u0302(q0). Lemma 3.1 then implies that there exists a face X such that q \u2208 [q0 + K(X)] and p(q) \u2208 conv(X \u222a {\u00b5}). By minimality of Xp(q), we must have Xp(q) \u2286 X . By anti-monotonicity of witness cones, we then have q \u2208 [q0 +K(Xp(q))], finishing the proof."}, {"heading": "C.3 Minimal face", "text": "Proposition C.6. Fix \u00b5 \u2208 M. Then for any \u03bd \u2208 M, there exists the minimal face X\u03bd with the following property: for\nany face X such that \u03bd \u2208 conv(X \u222a {\u00b5}), we must have X\u03bd \u2286 X .\nProof. If \u03bd = \u00b5 then X\u03bd = \u2205 and the statement holds. Otherwise, consider the ray \u03c1 from \u00b5 towards \u03bd, and let \u03bd\u2032 be the last point on the ray that is contained inM. Let X\u03bd be the unique face such that \u03bd\u2032 lies in the relative interior of conv(X\u03bd).8 We will argue that this face satisfies the condition stated in the proposition. Let X be any face such that \u03bd \u2208 conv(X \u222a {\u00b5}). Then \u03bd = \u03bb\u00b5 + (1 \u2212 \u03bb)\u03bdX for \u03bdX \u2208 conv(X) and \u03bb \u2208 [0, 1). Since \u03bdX \u2208 M, it must lie on the ray \u03c1 at some point between \u03bd and \u03bd\u2032. We next argue than \u03bd\u2032 \u2208 conv(X). Suppose not, this means that \u03bd\u2032 6= \u03bdX , and \u03bdX maximizes some linear function, say u \u00b7 \u03bd\u0304, over \u03bd\u0304 \u2208M, and u \u00b7 \u03bd\u2032 < u \u00b7 \u03bdX , i.e.,\nu \u00b7 (\u03bdX \u2212 \u03bd\u2032) > 0 .\nSince \u03bd 6= \u00b5 and \u03bd\u2032 6= \u03bdX , and the points \u00b5, \u03bd, \u03bdX , \u03bd\u2032 lie on the ray \u03c1 (in that order), there exists \u03b7 > 0 such that \u00b5\u2212 \u03bdX = \u03b7(\u03bdX \u2212 \u03bd\u2032) and thus\nu \u00b7 (\u00b5\u2212 \u03bdX) = \u03b7u \u00b7 (\u03bdX \u2212 \u03bd\u2032) > 0\nimplying that u \u00b7 \u00b5 > u \u00b7 \u03bdX and contradicting the assumption that \u03bdX is the maximizer. Thus, \u03bd\u2032 \u2208 conv(X). By a similar reasoning, we can also show that for any x \u2208 X\u03bd , we must have x \u2208 X . Again, for the sake of contradiction assume that there is u such that \u03bd\u2032 is a maximizer of u \u00b7 \u03bd\u0304 over \u03bd\u0304 \u2208 M, but x is not. Then x 6= \u03bd\u2032, and since \u03bd\u2032 \u2208 ri conv(X\u03bd), for sufficiently small \u03b7, we have \u03bd\u2032\u2032 := \u03bd\u2032+\u03b7(\u03bd\u2032\u2212x) \u2208M, and u \u00b7\u03bd\u2032\u2032 > u \u00b7\u03bd\u2032 contradicting the maximizer property of \u03bd\u2032. Thus, X\u03bd \u2286 X .\nD IMPOSSIBILITY RESULT OF FORTNOW AND SAMI\nWe can use the KKT lemma (Lemma 3.1) and the continuity of the perpendiculars (Theorem F.3) to derive the impossibility result of Fortnow and Sami [8]. The result states that in the presence of budget constraints, there is no market scoring rule guaranteeing that the market prices move towards the agent belief along the connecting straight line (unless aff(M) is a line or a point).\nOur construction is based on the observation that according to the KKT lemma, the solutions q must lie on a perpendicular at q0, and the continuity of the perpendiculars implies that p(q) is arbitrarily close to p(q0) for a small enough budget. In particular, if p(q0) lies in the relative interior of conv(Xp(q0) \u222a {\u00b5}) then we can assure that so does p(q), and this property does not change with small perturbations\n8The existence of such a unique face follows by the standard result stating that relative interiors of conv(X) across non-empty faces X form a disjoint partition of M.\nof \u00b5\u2014in particular, q remains a solution to the budget constrained optimization. Thus, the direction of movement of market prices is independent of small changes in \u00b5.\nThis informal reasoning can be turned into the following formal argument. Assume the dimension of aff(M) is d \u2265 2. Choose \u00b5 \u2208 riM and a face X such that aff(X) is of dimension d \u2212 1, so conv(X \u222a {\u00b5}) is of dimension d. Pick q0 such that p(q0) lies in ri conv(X \u222a{\u00b5}), which assures that X is the minimal face for p(q0). Let \u03bd0 denote p(q0). Consider the \u00b5-perpendicular to X at q0. By continuity of perpendiculars, we can pick a point \u03bd \u03bd0 on the perpendicular which is arbitrarily close to \u03bd0 and, in particular, which still lies in ri conv(X \u222a {\u00b5}), so its minimal face is stillX . Pick q \u2208 q0+X\u22a5 such that p(q) = \u03bd, which is possible by Proposition 4.2. We next show that actually q \u2208 q0 +K(X), which implies that q is a solution to budget constrained optimization (by Theorem 3.4).\nLet u be the normal to aff(X) within aff(M) such thatM lies in the non-negative half-space, i.e., all \u03bd\u2032 \u2208 M can be expressed in the form \u03bd\u2032 = a\u2032+ t\u2032u where a\u2032 \u2208 aff(X) and t\u2032 \u2265 0. Thus, we can write\n\u03bd0 = a0 + t0u ,\n\u03bd = a\u03bd + t\u03bdu ,\n\u03c9 = a\u03c9 + t\u03c9u for all \u03c9 \u2208 \u2126 ,\nfor some a0, a\u03bd , a\u03c9 \u2208 aff(X) and t0, t\u03bd , t\u03c9 \u2265 0. By convexity\n0 \u2264 (q \u2212 q0) \u00b7 (\u03bd \u2212 \u03bd0) = (q \u2212 q0) \u00b7 [a\u03bd \u2212 a0 + (t\u03bd \u2212 t0)u] = (q \u2212 q0) \u00b7 (t\u03bd \u2212 t0)u (D.1)\nwhere Eq. (D.1) follows because (q\u2212 q0) \u22a5 aff(X). Since \u03bd \u03bd0 along the perpendicular, we have that t\u03bd > t0 and so Eq. (D.1) implies\n0 \u2264 (q \u2212 q0) \u00b7 u .\nThus, for any \u03c9 \u2208 \u2126 and x \u2208 X ,\n(q \u2212 q0) \u00b7 (\u03c9 \u2212 x) = (q \u2212 q0) \u00b7 (a\u03c9 \u2212 x+ t\u03c9u) = t\u03c9(q \u2212 q0) \u00b7 u \u2265 0 ,\nshowing that q \u2208 q0 +K(X), i.e., q \u2208 Q\u0302(q0). If \u03bd0, \u03bd and \u00b5 are not on a straight line, we are done. Otherwise, slightly move \u00b5 within the affine space parallel to aff(X), so that X remains the minimal face for \u03bd and thus q remains a solution, but \u03bd0, \u03bd and \u00b5 are no longer on a straight line."}, {"heading": "E BUDGET ADDITIVITY: EXAMPLES", "text": "Using the KKT lemma, we illustrate on examples that budget additivity sometimes holds and sometimes does not.\nRecall that budget additivity states that if several agents have the same belief and limited budgets, the sequence of their actions is equivalent to the action of a single agent with the same belief and the sum of the budgets. In the first example, we give an illustration of when this property holds. In the second example, we show how this property can be violated, and the single agent with the sum of budgets has more power in the market.\nExample E.1 (Quadratic cost on a square). Consider the following outcome space and belief:\n\u03c900 = (0, 0)\n\u03c901 = (0, 1)\n\u03c910 = (1, 0)\n\u03c911 = (1, 1)\n\u00b5 = (0.9, 0.3)\nFurther, consider the following market states:\nq0 = \u03bd0 = (0.5, 0.1) q1 = \u03bd1 = (0.6, 0.2) = 1 3\u03c900 + 2 3\u00b5 q\u00b5 = \u00b5\nThe divergence of these states (and the belief \u00b5) from individual outcomes is:\n1 2\u2016\u00b7 \u2212 \u00b7\u2016 2 \u03c900 \u03c901 \u03c910 \u03c911 \u03bd0 0.13 0.53 0.13 0.53 \u03bd1 0.2 0.5 0.1 0.4 \u00b5 0.45 0.65 0.05 0.25\nWith these in hand, we can now use the KKT lemma and show that q1 = \u03bd1 is an optimal action at q0 = \u03bd0 under belief \u00b5 for a specific budget. Since q1 is a convex combination of \u03c900 and \u00b5, we need to show that the only tight budget constraint is due to \u03c900. We also calculate budgets required to move from q0 and q1 to q\u00b5:\n\u03c900 \u03c901 \u03c910 \u03c911 U(q1, \u00b7; q0) \u22120.07 0.03 0.03 0.13 B01 = 0.07 U(q\u00b5, \u00b7; q0) \u22120.32 \u22120.12 0.08 0.28 B0\u00b5 = 0.32 U(q\u00b5, \u00b7; q1) \u22120.25 \u22120.15 0.05 0.15 B1\u00b5 = 0.25\nHence, a sequence of moves with budgets B01 and B1\u00b5 is equivalent to a single move with the budget B0\u00b5 = B01 + B1\u00b5. While we have shown this only for a specific sequence of budgets, results of Section 5 show that for the quadratic cost on a square, budget additivity holds for any sequence of budgets and any belief \u00b5 \u2208M. Example E.2 (Quadratic cost on an obtuse triangle.). Now, we work out an example where the budget additivity does not hold. Consider the following outcome space and belief:\n\u03c91 = (0.0, 0.0)\n\u03c92 = (1.8, 0.0)\n\u03c93 = (6.0, 4.2)\n\u00b5= (2.7, 1.8)\nFurther, consider the following set of market states:\nq0 = \u03bd0 = (2.7, 0.9) q1 = \u03bd1 = (2.4, 1.2) = 1 3\u03c92 + 2 3\u00b5 q2 = \u03bd2 = (2.4, 1.6) = 1 9\u03c91 + 8 9\u00b5\nq3 = \u03bd3 = ( 0.9 \u221a 105 13 , 0.6 \u221a 105 13 ) = ( 1\u2212 13 \u221a 105 13 ) \u03c91 + ( 1 3 \u221a 105 13 ) \u00b5 \u2248 119\u03c91 + 18 19\u00b5\nq\u00b5 = \u00b5\nThe divergence of these states (and the belief \u00b5) from individual outcomes is:\n1 2\u2016\u00b7 \u2212 \u00b7\u2016 2 \u03c91 \u03c92 \u03c93 \u03bd0 4.05 0.81 10.89 \u03bd1 3.6 0.9 10.98 \u03bd2 4.16 1.46 9.86 \u03bd3 4.725 1.74 . . . 9.04 . . . \u00b5 5.265 2.025 8.325\nAgain as before, we can use the KKT lemma and show for j = 1, 2, 3, that qj = \u03bdj is an optimal action at qj\u22121 = \u03bdj\u22121 under belief \u00b5, with the corresponding budgets as:\n\u03c91 \u03c92 \u03c93 U(q1, \u00b7; q0) 0.45 \u22120.09 \u22120.09 B01 = 0.09 U(q2, \u00b7; q1) \u22120.56 \u22120.56 1.12 B12 = 0.56 U(q3, \u00b7; q2) \u22120.565 \u22120.28 . . . 0.82 . . . B23 = 0.565 U(q\u00b5, \u00b7; q0) \u22121.215 \u22121.215 2.565 B0\u00b5 = 1.215\nThe above table also shows that the budget B0\u00b5 = 1.215 suffices to move directly from q0 to q\u00b5. However, note that the sum\nB01 +B12 +B23 = 1.215 = B0\u00b5 ,\nbut \u03bd3 6= \u00b5, i.e., after the sequence of optimal actions with budgets B01, B12, and B23, the market is still not at the belief shared by all agents, even though with the budget B0\u00b5, it would have reached it. Note that it is possible to achieve budget additivity by using log-partition cost instead of quadratic cost (Theorem 5.6)."}, {"heading": "F PERPENDICULARS", "text": ""}, {"heading": "F.1 Proofs of Propositions 4.2 and 4.3", "text": "Proof of Proposition 4.2. We will show that condition (i) is equivalent to condition (ii) by analyzing the first order optimality conditions. Consider the problem\nmin \u03bd\u2032\u2208A\u03bb\nD(q, \u03bd\u2032) (F.1)\nused to define \u03bd\u03bb. Assume that the minimum is attained at some \u03bd\u2032 \u2208 ri domC\u2217. Thus, \u03bd\u2032 \u2208 A \u2229 (ri domC\u2217). Since D(q, \u03bd\u2032) is subdifferentiable at \u03bd\u2032, the first order optimality implies that (\n\u22022D(q, \u03bd \u2032) ) \u2229A\u22a5\u03bb 6= \u2205 . (F.2)\nSince \u22022D(q, \u03bd\u2032) = \u2202C\u2217(\u03bd\u2032)\u2212q = p\u22121(\u03bd\u2032)\u2212q, andA\u22a5\u03bb = A\u22a50 , we have\np\u22121(\u03bd\u2032) \u2229 (q +A\u22a50 ) 6= \u2205 ,\nproving that (i)\u21d2(ii). Conversely, assume that \u03bd\u2032 \u2208 A \u2229 (ri domC\u2217) and p\u22121(\u03bd\u2032) \u2229 (q + A\u22a50 ) 6= \u2205. Then we can pick \u03bb such that \u03bd\u2032 \u2208 A\u03bb, and for this \u03bb, we obtain that condition (F.2) holds and hence \u03bd\u2032 solves problem (F.1). Since \u03bd\u2032 \u2208 ri domC\u2217, we obtain that \u03bd\u2032 \u2208 im \u03b3.\nProof of Proposition 4.3. Let \u03b3\u2032 be the a1-perpendicular to A0 at q\u2032. Since the ambient space A for both perpendiculars is the same, by Proposition 4.2(ii), it suffices to show that q + A\u22a50 = q\n\u2032 + A\u22a50 . However, this follows by the assumption of the theorem, since q\u2032 \u2212 q \u2208 A\u22a50 ."}, {"heading": "F.2 Continuity of perpendiculars", "text": "In this section, we prove two important properties of perpendiculars: (a) they are continuous maps; (b) intersections of perpendiculars with compact convex sets correspond to compact sets of market states up to certain \u201cirrelevant displacements\u201d. To define these irrelevant displacements, let L be the linear space parallel to aff(domC\u2217). Then the displacements of market state within L\u22a5 are irrelevant in the sense that they have no effect on the Bregman divergence and hence by Eq. (4.1) also no effect on the utility function. Specifically, D(q + u, \u03bd) = D(q, \u03bd) for all u \u2208 L\u22a5 (see next proposition). For instance, for LMSR over a simplex, the irrelevant displacements are of the form \u03bb~1 where \u03bb \u2208 R and ~1 is the all-ones vector. Proposition F.1. Let L be the linear space parallel to aff(domC\u2217). Then for all q \u2208 Rn and u \u2208 L\u22a5\nD(q + u, \u03bd) = D(q, \u03bd) .\nProof. If \u03bd 6\u2208 domC\u2217 then the statement obviously holds. Pick \u03bd \u2208 domC\u2217, q \u2208 Rn and u \u2208 L\u22a5. By the Mean Value Theorem, we can write\nC(q + u)\u2212 C(q) = u \u00b7 \u2207C(q\u0304)\nfor some q\u0304. Let \u03bd\u0304 := \u2207C(q\u0304) \u2208 domC\u2217. Then we can write\nD(q + u, \u03bd)\u2212D(q, \u03bd) = C(q + u)\u2212 C(q)\u2212 u \u00b7 \u03bd = u \u00b7 (\u03bd\u0304 \u2212 \u03bd) = 0\nsince u \u22a5 (\u03bd\u0304 \u2212 \u03bd).\nThe following result of Rockafellar [18] will be instrumental in proving continuity properties of the perpendicular. It is paraphrased for our setting. The notation int refers to the topological interior of the set.\nTheorem F.2 (Theorem 24.7 of Rockafellar [18]). Let G : Rn \u2192 (\u2212\u221e,\u221e] be a lower semi-continuous convex function, and let K be a non-empty, closed and bounded subset of int(domG). Then the set\n\u2202G(K) = \u22c3 u\u2208K \u2202G(u)\nis non-empty, closed and bounded.\nNow we are ready to state and prove the continuity of perpendiculars:\nTheorem F.3. Let \u03b3 be the a1-perpendicular to A0 at q, and K \u2286 ri domC\u2217 be a closed bounded convex set intersecting im \u03b3.\n(a) The map \u03b3 is continuous and \u039b is open. (b) The intersection M := {(\u03bd, q) : \u03bd \u2208 (im \u03b3) \u2229K, q \u2208\np\u22121(\u03bd)} can be written as M = C + (0\u2295L\u22a5) where C is compact and \u2295 denotes a direct sum of vector spaces.\nProof. Throughout the proof, let F (\u03bd) := D(q, \u03bd) = C(q) + C\u2217(\u03bd) \u2212 q \u00b7 \u03bd. Note that F is strictly convex on ri domC\u2217. We will be also making frequent use of the fact that F is continuous on ri domC\u2217 (because C\u2217 is continuous on ri domC\u2217 by Theorem 10.1 of Rockafellar [18]). Let \u2016\u00b7\u2016 denote the usual Euclidean norm. Let a0 = argmina\u2208A0\u2016a1 \u2212 a\u2016, i.e., (a1 \u2212 a0) \u2208 A \u22a5 0 . Let A = aff(A0 \u222a {a1}) and recall that\nA\u03bb = A0 + \u03bb(a1 \u2212 a0)\nand \u03bd\u03bb = argmin\nA\u03bb\nF (\u03bd) .\nWe use the notation B(\u03bd, r;M) := {\u03bd\u2032 \u2208 M : \u2016\u03bd\u2032 \u2212 \u03bd\u2016 \u2264 r} for the Euclidean ball relative to set M , and S(\u03bd, r;M) := {\u03bd\u2032 \u2208M : \u2016\u03bd\u2032\u2212 \u03bd\u2016 = r} for the Euclidean sphere relative to set M .\nPart (a). We need to show that \u03b3 is continuous. Let \u03bb \u2208 \u039b, i.e., \u03bd\u03bb \u2208 ri domC\u2217. Choose a sufficiently small r > 0 such that the ball B := B(\u03bd\u03bb, r;A) is contained in ri domC\u2217. To show the continuity of \u03b3 and openness of \u039b, it suffices to show that if \u03bb\u2032 is close enough to \u03bb then \u03bd\u03bb\u2032 \u2208 B. Let \u03b5 = r/ \u221a\n2. Consider the sphere S\u03bb := S(\u03bd\u03bb, \u03b5;A\u03bb) \u2286 ri domC\u2217. This sphere is a compact set, so F attains the minimum on S\u03bb. By strict convexity of F and the optimality of \u03bd\u03bb, this minimum must be bounded away from F (\u03bd\u03bb). Thus, there exists \u03b4 > 0 such that\nF (\u03bd) \u2265 F (\u03bd\u03bb) + \u03b4 for all \u03bd \u2208 S\u03bb . (F.3)\nLet \u03b4\u2032 = \u03b4/3. Since F is continuous on ri domC\u2217, it is uniformly continuous on B and thus there exists \u03b5\u2032 \u2208 (0, \u03b5]\nsuch that\n|F (\u03bd\u2032)\u2212 F (\u03bd)| \u2264 \u03b4\u2032\nfor all \u03bd, \u03bd\u2032 \u2208 B such that \u2016\u03bd\u2032 \u2212 \u03bd\u2016 \u2264 \u03b5\u2032. (F.4)\nLet B\u03bb := B(\u03bd\u03bb, \u03b5;A\u03bb) be the closed ball with S\u03bb as the border. For any \u03bb\u2032, let S\u03bb\u2032 := S\u03bb+(\u03bb\u2032\u2212\u03bb)(a1\u2212a0) \u2286 A\u03bb\u2032 and similarly B\u03bb\u2032 . Let \u03bd\u0303\u03bb\u2032 = \u03bd\u03bb+(\u03bb\u2032\u2212\u03bb)(a1\u2212a0) \u2208 A\u03bb\u2032 . Note that if |\u03bb\u2032 \u2212 \u03bb| \u2264 \u03b5\u2032, then B\u03bb\u2032 \u2286 B, because\u221a (\u03bb\u2032 \u2212 \u03bb)2 + \u03b52 \u2264 \u03b5 \u221a 2 = r. So we can use the above uniform continuity result and write:\n\u2022 F (\u03bd\u2032) \u2265 F (\u03bd\u03bb)+\u03b4\u2212\u03b4\u2032 = F (\u03bd\u03bb)+2\u03b4\u2032 for all \u03bd\u2032 \u2208 S\u03bb\u2032 by Eqs. (F.3) and (F.4) \u2022 F (\u03bd\u0303\u03bb\u2032) \u2264 F (\u03bd\u03bb) + \u03b4\u2032 by Eq. (F.4)\nBy convexity of F , this means that \u03bd\u03bb\u2032 \u2208 B\u03bb\u2032 . This proves that \u03bd\u03bb\u2032 \u2208 B provided that |\u03bb\u2032 \u2212 \u03bb| \u2264 \u03b5\u2032, thus proving the continuity of \u03b3 at \u03bb.\nPart (b). We first show that the set M is closed and then that it is bounded, except for directions in 0 \u2295 L\u22a5. Since K \u2286 ri domC\u2217, we can use Proposition 4.2 to write the set M as\nM = {(\u03bd\u2032, q\u2032) : \u03bd\u2032 \u2208 Rn, q\u2032 \u2208 \u2202C\u2217(\u03bd\u2032)} \u2229 ( Rn \u00d7 (q +A\u22a50 ) ) \u2229 (K \u00d7 Rn) , (F.5)\nwhere we used the identity p\u22121(\u03bd\u2032) = \u2202C\u2217(\u03bd\u2032) valid for all \u03bd\u2032. The closedness follows, because the set of pairs {(\u03bd\u2032, q\u2032) : \u03bd\u2032 \u2208 Rn, q\u2032 \u2208 \u2202C\u2217(\u03bd\u2032)} is closed [18, Theorem 24.4].\nDenote the projections of M on its two components as"}, {"heading": "M1 := {\u03bd\u2032 : (\u03bd\u2032, q\u2032) \u2208M for some q\u2032} ,", "text": ""}, {"heading": "M2 := {q\u2032 : (\u03bd\u2032, q\u2032) \u2208M for some \u03bd\u2032} .", "text": "To show boundedness, we only need to analyze M2 since M1 \u2286 K. By Eq. (F.5), it in fact suffices to show that the set \u2202C\u2217(K) = \u22c3 \u03bd\u2208K \u2202C\n\u2217(\u03bd) is bounded except for directions in L\u22a5. We would like to appeal to Theorem F.2, but we cannot do it directly, because it is stated for the interior rather than the relative interior. For \u03bd \u2208 ri domC\u2217, we have \u2202C\u2217(\u03bd) 6= \u2205, and using the fact that C\u2217(\u03bd) =\u221e over \u03bd + (L\u22a5\\{0}), we obtain that\n\u2202C\u2217(\u03bd) = S + L\u22a5\nfor some set S \u2286 L. This set S coincides with subdifferential when C\u2217(\u03bd) is only viewed as a function over aff(domC\u2217). By applying Theorem F.2 to this restriction, we then indeed obtain that\n\u2202C\u2217(K) = C + L\u22a5\nfor a non-empty closed and bounded set C. Note that L\u22a5 \u2286 A\u22a50 , so L\u22a5 survives taking the intersection in Eq. (F.5) and hence part (b) of the theorem follows."}, {"heading": "G PROOFS OF SUFFICIENT CONDITIONS FOR ACUTE ANGLES", "text": "Proposition G.1. For the quadratic cost, Definition 5.1 is equivalent to Definition 3.8.\nProof. We first show that Definition 5.1 (general acute angles) implies Definition 3.8 (Euclidean acute angles). Assume that the general acute angles hold for X . Let \u03bd\u0304 \u2208 M and \u03bd be its projection on aff(X). If \u03bd\u0304 = \u03bd then angles between \u03bd\u0304, \u03bd and \u03c9 \u2208 \u2126 are non-obtuse in the sense that (\u03bd\u0304 \u2212 \u03bd) \u00b7 (\u03c9 \u2212 \u03bd) \u2265 0. If \u03bd\u0304 6= \u03bd, then let \u03b3 be the \u03bd\u0304perpendicular to X at \u03bd (note that p is the identity map, so \u03bd is both a state and the corresponding price vector). Note that \u03bd\u0304 \u03bd and thus by the general acute angles assumption p\u22121(\u03bd\u0304) \u2229 [\u03bd + K(X)] 6= \u2205. Since p\u22121(\u03bd\u0304) = {\u03bd\u0304}, this is equivalent to\n(\u03bd\u0304 \u2212 \u03bd) \u00b7 (\u03c9 \u2212 x) \u2265 0 for all x \u2208 X,\u03c9 \u2208 \u2126 .\nSince \u03bd \u2208 aff(X), we obtain that (\u03bd\u0304 \u2212 \u03bd) \u00b7 (\u03c9 \u2212 \u03bd) \u2265 0, i.e., the Euclidean acute angles hold.\nConversely, assume that the Euclidean acute angles hold. Let \u03b3 be a \u00b5-perpendicular to a face X for some \u00b5 \u2208 M and \u03bd\u2032 \u03bd be two points in im \u03b3 such that \u03bd \u2208 M. We need to show that p\u22121(\u03bd\u2032) \u2229 [\u03bd + K(X)] 6= \u2205, which is equivalent to\n(\u03bd\u2032 \u2212 \u03bd) \u00b7 (\u03c9 \u2212 x) \u2265 0 for all x \u2208 X,\u03c9 \u2208 \u2126 . (G.1)\nIf \u03bd\u2032 = \u03bd then (G.1) holds. Otherwise, we can write \u03bd\u2032 = \u03bd + uX + \u03bb(\u00b5\u2212 \u03bd\u0302) for an arbitrary \u03bd\u0302 \u2208 aff(X), a suitable \u03bb > 0 and uX from the linear space parallel with aff(X). Pick \u03bd\u0302 \u2208 ri conv(X) (and the corresponding \u03bb and uX ). We claim that there is a small enough \u03b7 > 0 such that \u03bd\u0304 := \u03bd\u0302 + \u03b7(\u03bd\u2032 \u2212 \u03bd) \u2208 M. This follows, because from our previous reasoning,\n\u03bd\u0304 = \u03bd\u0302 + \u03b7uX + \u03b7\u03bb(\u00b5\u2212 \u03bd\u0302),\nand for sufficiently small \u03b7 > 0, we have [\u03bd\u0302+\u03b7\u03bb(\u00b5\u2212 \u03bd\u0302)] \u2208 ri conv(X \u222a {\u00b5}) and then also for sufficiently small \u03b7, [\u03bd\u0302 + \u03b7\u03bb(\u00b5\u2212 \u03bd\u0302) + \u03b7uX ] \u2208 ri conv(X \u222a {\u00b5}) \u2286M. Thus, by the Euclidean acute angles,\n(\u03bd\u0304 \u2212 \u03bd\u0302) \u00b7 (\u03c9 \u2212 \u03bd\u0302) \u2265 0 for all \u03c9 \u2208 \u2126.\nSince \u03bd\u0304 \u2212 \u03bd\u0302 = \u03b7(\u03bd\u2032 \u2212 \u03bd) and (\u03bd\u2032 \u2212 \u03bd) \u22a5 (x \u2212 \u03bd\u0302) for all x \u2208 X , we also obtain\n\u03b7(\u03bd\u2032 \u2212 \u03bd) \u00b7 (\u03c9 \u2212 x) \u2265 0 for all x \u2208 X,\u03c9 \u2208 \u2126\nproving (G.1) and finishing the proof.\nProof of Theorem 5.3. Let L be the linear space parallel to aff(X). First show that the acute angles imply the inclusion of the projection in an acute cone. Note that the inclusion is\neither true for all a0 \u2208 aff(X) or none, so we can without loss of generality choose a0 \u2208 conv(X). Let \u03c91, \u03c92 \u2208 \u2126 and let \u03c9\u20321 and \u03c9 \u2032 2 be their projections to A \u2032, thus\n\u03c9\u20321 \u2212 \u03c91 \u2208 L , \u03c9\u20322 \u2212 \u03c92 \u2208 L .\nWe need to show that\n(\u03c9\u20321 \u2212 a0) \u00b7 (\u03c9\u20322 \u2212 a0) \u2265 0 .\nIf \u03c91 \u2208 aff(X) then \u03c9\u20321 = a0 and the statement holds. Assume that \u03c91 6\u2208 aff(X) and let \u03b3 be the \u03c91-perpendicular to X at a0. Let \u03c9\u2032\u20321 \u2208 im \u03b3 be the projection of \u03c91 on im \u03b3. Thus, we also have\n\u03c9\u2032\u20321 \u2212 \u03c91 \u2208 L\nand also \u03c9\u2032\u20321 a0. Now by the acute angles assumption, \u03c9\u2032\u20321 \u2212 a0 \u2208 K(X), i.e., for any x \u2208 X ,\n0 \u2264 (\u03c9\u2032\u20321 \u2212 a0) \u00b7 (\u03c92 \u2212 x) .\nCombining this with the previous identities, we obtain\n0 \u2264 (\u03c9\u2032\u20321 \u2212 a0) \u00b7 (\u03c92 \u2212 x) = (\u03c9\u2032\u20321 \u2212 a0) \u00b7 (\u03c9\u20322 \u2212 a0) = (\u03c9\u20321 \u2212 a0) \u00b7 (\u03c9\u20322 \u2212 a0)\nwhere the first equality follows because \u03c9\u2032\u20321 \u2212 a0 \u2208 L\u22a5 and\n\u03c9\u20322 \u2212 \u03c92 \u2208 L , a0 \u2212 x \u2208 L ,\nthe second equality follows because \u03c9\u20322 \u2212 a0 \u2208 L\u22a5 and\n\u03c9\u2032\u20321 \u2212 \u03c9\u20321 = [(\u03c9\u2032\u20321 \u2212 \u03c91)\u2212 (\u03c9\u20321 \u2212 \u03c91)] \u2208 L .\nFor the converse, assume that the inclusion of the projection of M in an affine acute cone holds. Let \u03b3 be the \u00b5perpendicular to X at \u03bd for some \u00b5, \u03bd \u2208M and let \u03bd\u2032 \u03bd. We need to show that \u03bd\u2032\u2212\u03bd \u2208 K(X). Note that 0 \u2208 K(X), so we only analyze \u03bd\u2032 6= \u03bd. Let \u00b5\u2032 be the projection of \u00b5 on im \u03b3 and a0 be the intersection of im \u03b3 with aff(X). Note that \u03bd\u2032 \u2212 \u03bd = \u03b7(\u00b5\u2032 \u2212 a0) for a suitable \u03b7 > 0, so it suffices to show that \u00b5\u2032 \u2212 a0 \u2208 K(X). Pick \u03c9 \u2208 \u2126 and x \u2208 X and let \u03c9\u2032 be the projection of \u03c9 into A\u2032 := a0 + X\u22a5. Since the projection ofM into A\u2032 is contained in an affine acute cone with the vertex a0, we obtain\n(\u00b5\u2032 \u2212 a0) \u00b7 (\u03c9\u2032 \u2212 a0) \u2265 0\nSince \u03c9\u2032 \u2212\u03c9 \u2208 L and x\u2212 a0 \u2208 L, whereas \u00b5\u2032 \u2212 a0 \u2208 L\u22a5, we obtain\n(\u00b5\u2032 \u2212 a0) \u00b7 (\u03c9 \u2212 x) \u2265 0\nshowing that the acute angles hold.\nProof of Corollary 5.4. We will show that the assumption of Theorem 5.3 holds. Since the assumption is invariant under rigid transformations, we can just consider the case a0 = 0 \u2208 X . In this case, the projection of \u2126 is a lower\ndimensional hypercube (corresponding to a subset of \u2126). Note that \u2126 lies in the non-negative orthant and the nonnegative orthant is an acute cone with the vertex a0 = 0, so the assumption of Theorem 5.3 holds and hence the acute angles hold for the hypercube.\nProof of Corollary 5.5. Again, by symmetry, it suffices to consider faces of the form X = {ei : i \u2208 [k]} for k \u2208 {1, . . . , n}. Let a0 = e1. The affine space A\u2032 is described by\nA\u2032 = {a \u2208 Rn : (a\u2212 e1) \u00b7 (ei \u2212 e1) = 0 for 2 \u2264 i \u2264 k} = {a \u2208 Rn : a[i] = a[1]\u2212 1 for 2 \u2264 i \u2264 k}\nwhere we use notation a[i] to denote the i-th coordinate. The projection of ej for j > k into A\u2032 is of the form\ne\u2032j = ej + k\u2211 i=2 \u03b1j [i] (ei \u2212 e1) ,\nfor some \u03b1j [i] \u2208 R, i.e.,\ne\u2032j [i] =  \u2212 \u2211k i\u2032=2 \u03b1j [i \u2032] if i = 1 \u03b1j [i] if i \u2208 {2, . . . , k} 1 if i = j 0 otherwise.\nThe only solution of the above form that lies in A\u2032 is obtained by setting \u03b1j [i] = \u22121/k, yielding\ne\u2032j [i] =  1\u2212 1/k if i = 1 \u22121/k if i \u2208 {2, . . . , k} 1 if i = j 0 otherwise.\nTherefore, for any pair of projections e\u2032j , e \u2032 j\u2032 for j, j \u2032 > k, and j 6= j\u2032, we have\n(e\u2032j \u2212 e1) \u00b7 (e\u2032j\u2032 \u2212 e1) = 1/k > 0 ,\nso the projection of \u2126 is in an acute cone, i.e., acute angles hold.\nProof of Theorem 5.6. We begin by characterizing an a1perpendicular to a face X 6= \u2126 at q. Let \u03bd := p(q) 6\u2208 aff(X), so the ambient space of the perpendicular is aff(X \u222a {\u03bd}). Thus, for a given X and q, we will have the same im \u03b3 and the same order on \u03bd \u2208 im \u03b3 for any valid a1 \u2208 M\u0303 which allows to define the a1-perpendicular to X at q. Recall that Pq is the probability measure over \u2126 defined by\nPq(\u03c9) = e q\u00b7\u03c9\u2212C(q)\nand note that Pq(\u03c9) > 0 for all \u03c9 \u2208 \u2126. Recall that \u03bd = \u2211 \u03c9\u2208\u2126 Pq(\u03c9)\u03c9 .\nLet Xc = \u2126\\X . Separate \u03bd into components corresponding to x \u2208 X and \u03c9 \u2208 Xc:\n\u03bdX = 1\nPq(X) \u2211 x\u2208X Pq(x)x ,\n\u03bdXc = 1\nPq(Xc) \u2211 \u03c9\u2208Xc Pq(\u03c9)\u03c9 ,\ni.e., \u03bd = Pq(X)\u03bdX + Pq(X c)\u03bdXc .\nSince \u03bdX \u2208 aff(X), we have\naff(X \u222a {\u03bd}) = aff(X \u222a {\u03bdXc}) . (G.2)\nWe will show that im \u03b3 consists exactly of the points (1 \u2212 \u03b1\u0303)\u03bdX + \u03b1\u0303\u03bdXc for \u03b1\u0303 \u2208 (0, 1).\nConsider \u03bd\u2032 \u2208 im \u03b3 and q\u2032 \u2208 p\u22121(\u03bd\u2032)\u2229 (q+X\u22a5). For any x\u2032, x \u2208 X , we have\n(q\u2032 \u2212 q) \u00b7 (x\u2032 \u2212 x) = 0 ,\nso q\u2032 \u00b7 (x\u2032 \u2212 x) = q \u00b7 (x\u2032 \u2212 x) ,\nand hence\nPq\u2032(x \u2032) Pq\u2032(x) = eq \u2032\u00b7(x\u2032\u2212x) = eq\u00b7(x \u2032\u2212x) = Pq(x \u2032) Pq(x) .\nSince this holds for arbitrary x, x\u2032 \u2208 X , we obtain\nPq\u2032(x) Pq(x) = Pq\u2032(X) Pq(X) for all x \u2208 X . (G.3)\nSince \u03bd\u2032 is in the ambient space of the perpendicular, which is aff(X \u222a {\u03bd}), by Eq. (G.2), we obtain\n\u03bd\u2032 \u2208 aff(X \u222a {\u03bdXc}) ,\nso \u03bd\u2032 can be written in the form\n\u03bd\u2032 = \u2211 x\u2208X \u03b1(x)x+\n( 1\u2212\n\u2211 x\u2208X \u03b1(x)\n) \u03bdXc (G.4)\nfor some \u03b1(x) \u2208 R for x \u2208 X . Also,\n\u03bd\u2032 = \u2211 x\u2208X Pq\u2032(x)x+ \u2211 \u03c9\u2208Xc Pq\u2032(\u03c9)\u03c9 .\nBy the affine independence of \u2126, we therefore must have \u03b1(x) = Pq\u2032(x). Plugging this into Eq. (G.4), we obtain\n\u03bd\u2032 = (\u2211 x\u2208X Pq\u2032(x)x ) + Pq\u2032(X c)\u03bdXc\n=\n( Pq\u2032(X)\nPq(X) \u2211 x\u2208X Pq(x)x\n) + Pq\u2032(X c)\u03bdXc\n= Pq\u2032(X)\u03bdX + Pq\u2032(X c)\u03bdXc\nwhere the second equality follows by Eq. (G.3). Thus, indeed \u03bd\u2032 = (1\u2212 \u03b1\u0303)\u03bdX + \u03b1\u0303\u03bdXc for \u03b1\u0303 = Pq\u2032(Xc).\nFor any I \u2286 [0, 1], let\nJI := {(1\u2212 \u03b1\u0303)\u03bdX + \u03b1\u0303\u03bdXc : \u03b1\u0303 \u2208 I} .\nSo far we have shown that im \u03b3 \u2286 J(0,1); we next argue that J(0,1) \u2286 im \u03b3. We do this by exploiting the continuity properties of \u03b3.\nFor any \u03b1\u0303, note that( (1\u2212 \u03b1\u0303)\u03bdX + \u03b1\u0303\u03bdXc ) \u2208 ( aff(X) + \u03b1\u0303(\u03bdXc \u2212 \u03bdX) ) = A\u03bb\nfor a suitable \u03bb. Let \u03b1\u03030 and \u03bb0 be the values associated with \u03bd = p(q); note that both are greater than zero. Then, for any \u03bb, the \u03b1\u0303 such that\n(1\u2212 \u03b1\u0303)\u03bdX + \u03b1\u0303\u03bdXc \u2208 A\u03bb\nis obtained as \u03b1\u0303(\u03bb) := \u03b1\u03030\u03bb/\u03bb0. The domain \u039b of \u03b3 is an open subset of the real line and therefore it is a union of disjoint open intervals. Let (\n\u00af \u03bb, \u03bb\u0304) be the interval containing\n\u03bb0. For the sake of contradiction assume that \u03b1\u0303( \u00af \u03bb) > 0. Then J[\u03b1\u0303( \u00af \u03bb),\u03b1\u03030] is a compact subset of riM, and therefore by Theorem F.3, its intersection with im \u03b3 should be compact as well. However, by the selection of\n\u00af \u03bb, the in-\ntersection equals J(\u03b1\u0303( \u00af \u03bb),\u03b1\u03030], which is not compact, yielding a contradiction. Similarly, we obtain a contradiction if \u03b1\u0303(\u03bb\u0304) < 1. Therefore, \u03b1\u0303(\n\u00af \u03bb) \u2264 0 and \u03b1\u0303(\u03bb\u0304) \u2265 1, showing\nthat J(0,1) \u2286 im \u03b3, and hence in fact J(0,1) = im \u03b3.\nNow we are ready to prove the theorem. Let \u03bd\u2032 \u2208 im \u03b3 such that \u03bd\u2032 \u03bd, and let q \u2208 p\u22121(\u03bd), q\u2032 \u2208 p\u22121(\u03bd\u2032). Use the notation P := Pq and P \u2032 := Pq\u2032 , and write\n(q\u2032 \u2212 q) \u00b7 (\u03c9 \u2212 x) = ln\n( eq \u2032\u00b7\u03c9\neq\u2032\u00b7x \u00b7 e\nq\u00b7x\neq\u00b7\u03c9\n)\n= ln\n( P \u2032(\u03c9)\nP \u2032(x) \u00b7 P (x) P (\u03c9) ) = ln ( P \u2032(\u03c9)\nP (\u03c9) \u00b7 P (x) P \u2032(x)\n) .\nFor \u03c9 \u2208 Xc, our characterization of the perpendicular implies that P (x) \u2265 P \u2032(x) and P (\u03c9) \u2264 P (\u03c9\u2032) since \u03bd\u2032 has a larger (or equal) coefficient \u03b1\u0303 than \u03bd, because it is further (or equally) away from \u03bdX . Thus, the above expression is non-negative, yielding the acute angles property.\nProof of Theorem 5.7. Let \u00b5 \u2208 M\u0303, q \u2208 p\u22121(M\u0303) and let im \u03b3 be the \u00b5-perpendicular to X at q. Note that the perpendicular is well defined only if X is a singleton, say X = {x}, and \u00b5 6= x. Let {x\u2032} be the other singleton face ofM. Thus, im \u03b3 = aff({x, x\u2032}) \u2229 (ri domC\u2217) with the direction from x towards x\u2032. Note that K(X) = {u : u \u00b7 (x\u2032 \u2212 x) \u2265 0}. Let \u03bd = p(q) and let \u03bd\u2032 \u03bd, i.e.,\n\u03bd\u2032 \u2212 \u03bd = \u03bb(x\u2032 \u2212 x) for some \u03bb > 0. Pick q\u2032 \u2208 p\u22121(\u03bd\u2032), which exists, because \u03bd\u2032 \u2208 ri domC\u2217. By convexity, we have\n0 \u2264 (q\u2032 \u2212 q) \u00b7 (\u2207C(q\u2032)\u2212\u2207C(q)) = (q\u2032 \u2212 q) \u00b7 (\u03bd\u2032 \u2212 \u03bd) = \u03bb(q\u2032 \u2212 q) \u00b7 (x\u2032 \u2212 x) ,\ni.e., q\u2032 \u2212 q \u2208 K(X).\nProof of Theorem 5.8. Let M1 = conv(\u21261) and M2 = (conv \u21262). We first argue that M = conv(\u21261 \u00d7 \u21262) = (conv \u21261) \u00d7 (conv \u21262) = M1 \u00d7 M2. For i \u2208 {1, 2}, let \u03bdi \u2208 Mi, i.e., for some probability measure Pi on \u2126i, we have E\u03c9i\u223cPi [\u03c9i] = \u03bdi. Defining the probability measure P on \u2126 by P (\u03c91, \u03c92) = P1(\u03c91)P2(\u03c92), we obtain E(\u03c91,\u03c92)\u223cP [(\u03c91, \u03c92)] = (\u03bd1, \u03bd2), i.e., (\u03bd1, \u03bd2) \u2208 M. Conversely, let (\u03bd1, \u03bd2) \u2208 M, i.e., for some measure P on \u2126, E(\u03c91,\u03c92)\u223cP [(\u03c91, \u03c92)] = (\u03bd1, \u03bd2). But this also means that E(\u03c91,\u03c92)\u223cP [\u03c9i] = \u03bdi for i \u2208 {1, 2}, so \u03bdi \u2208 Mi for i \u2208 {1, 2}. Thus,M =M1 \u00d7M2.\nWe also have domC = (domC1) \u00d7 (domC2) and ri domC = (ri domC1)\u00d7(ri domC2), which implies that M\u0303 \u2286 M\u03031 \u00d7 M\u03032.\nWe next show that X is a face of M if and only if X = X1 \u00d7 X2 where X1 is a face of M1 and X2 is a face of M2. A face X ofM is characterized by a vector u and a scalar c such that\nu \u00b7 x = c for x \u2208 X u \u00b7 \u03c9 > c for \u03c9 \u2208 \u2126\\X .\nIf X1 is a face ofM1 characterized by u1 and c1, and X2 is a face ofM2 characterized by u2 and c2, then we immediately obtain that X1 \u00d7 X2 is a face ofM characterized by u = (u1, u2) and c = c1 + c2. Conversely, assume X is a face ofM characterized by u = (u1, u2) and c. We first show that X is a Cartesian product. We proceed by contradiction and assume that (x1, x2) \u2208 X and (x\u20321, x\u20322) \u2208 X , but (x1, x\u20322) 6\u2208 X . By assumption:\nu1 \u00b7 x1 + u2 \u00b7 x2 = c u1 \u00b7 x\u20321 + u2 \u00b7 x\u20322 = c \u2212u1 \u00b7 x1 \u2212 u2 \u00b7 x\u20322 < \u2212c\nSumming the above three yields:\nu1 \u00b7 x\u20321 + u2 \u00b7 x2 < c\nwhich is a contradiction withX being a face. By symmetry, we also obtain (x\u20321, x2) \u2208 X , henceX = X1\u00d7X2 for some X1 \u2286 \u21261 and X2 \u2286 \u21262. Let (x1, x2) be some element of X . Note that X1 must be a face of M1 characterized by u1 and c1 := u1 \u00b7 x1, because otherwise, there would exist \u03c91 \u2208 \u21261\\X1 such that u1 \u00b7 \u03c91 \u2264 c1 = u1 \u00b7 x1, i.e.,\nu1 \u00b7 \u03c91 + u2 \u00b7 x2 \u2264 u1 \u00b7 x1 + u2 \u00b7 x2\nwhich would contradict X being a face, since (\u03c91, x2) 6\u2208 X . By symmetry, we also obtain that X2 is a face ofM2.\nLet \u03b3 be the a-perpendicular toX at q, where a = (a1, a2), X = X1 \u00d7 X2 and q = (q1, q2). Note that a \u2208 M\u0303, p(q) \u2208 M\u0303 implies that ai \u2208 M\u0303i, pi(qi) \u2208 M\u0303i because M\u0303 \u2286 M\u03031 \u00d7 M\u03032. The optimization of D(q, \u03bd) over A\u03bb in the definition of the perpendicular decomposes into independent convex problems in \u03bd1 and \u03bd2, because aff(X) = aff(X1)\u00d7aff(X2) andD(q, \u03bd) = D1(q1, \u03bd1)+D2(q2, \u03bd2), where D1 and D2 are the divergences derived from C1 and C2. Thus, for any point \u03bd\u2032 \u2208 im \u03b3 such that \u03bd\u2032 p(q), we obtain that for i \u2208 {1, 2} the components \u03bd\u2032i lie on the ai-perpendicular to Xi at qi and \u03bd\u2032i pi(qi). Let x = (x1, x2) \u2208 X and \u03c9 = (\u03c91, \u03c92) \u2208 \u2126. Then by acute angles assumption, we can choose q\u2032i \u2208 p \u22121 i (\u03bd \u2032 i) \u2229 [qi + K(Xi)]. Let q\u2032 = (q\u20321, q \u2032 2). Note that q\n\u2032 \u2208 p\u22121(\u03bd\u2032). We will argue that also (q\u2032 \u2212 q) \u2208 K(X):\n(q\u2032 \u2212 q) \u00b7 (\u03c9 \u2212 x) = \u2211\ni\u2208{1,2}\n(q\u2032i \u2212 qi) \u00b7 (\u03c9i \u2212 xi) \u2265 0 ,\nwhere the last inequality follows, because (q\u2032i \u2212 qi) \u2208 K(Xi). Thus, the acute angles assumption holds for C and \u2126."}, {"heading": "H PROOF OF THEOREM 5.2", "text": "In this section we give the complete proof of Theorem 5.2, with the revised definition of budget additivity, which requires that q0 be arbitrage-free (see Appendix C.1). The proof proceeds in several steps. Let \u03bd0 = p(q0). Assuming acute angles, we begin by constructing an oriented curve L joining \u03bd0 with \u00b5, by sequentially choosing portions of perpendiculars for monotonically decreasing active sets. We then show that budget additivity holds for any solutions with prices in L, and finally show that the curve L is the locus of the optimal prices of solutions Q\u0302(q0), as well as optimal prices of solutions Q\u0302(q) for any q \u2208 Q\u0302(q0).\nPart 1: Construction of the solution pathL In this part, we construct:\n\u2022 a sequence of prices \u03bd0, \u03bd1, . . . , \u03bdk with \u03bd0 = p(q0) and \u03bdk = \u00b5 \u2022 a sequence of oriented curves `0, . . . , `k\u22121 where each `i goes from \u03bdi to \u03bdi+1 \u2022 a monotone sequence of sets \u2126 \u2287 X0 \u2283 X1 \u2283 \u00b7 \u00b7 \u00b7 \u2283 Xk = \u2205, such that the following minimality property holds: Xi is the minimal face for all \u03bd \u2208 (im `i)\\{\u03bdi+1} for i \u2264 k \u2212 1, and Xk is the minimal face for \u03bdk. \u2022 a sequence of states q1, . . . , qk\u22121 such that qi \u2208 p\u22121(\u03bdi) \u2229 [qi\u22121 +K(Xi\u22121)]\nThe curves `i will be referred to as segments. The curve obtained by concatenating the segments `0 through `k\u22121\nwill be called the solution path and denoted L. In the special case that \u03bd0 = \u00b5, we have k = 0, X0 = \u2205 and L is a degenerate curve with imL = {\u00b5}.\nIf \u03bd0 6= \u00b5, we construct the sequence of segments iteratively. Let X0 6= \u2205 be the minimal face such that \u03bd0 \u2208 conv(X0 \u222a {\u00b5}). By the minimality, \u00b5 6\u2208 aff(X0). Let \u03b3 be the \u00b5-perpendicular to aff(X0) at q0. The curve \u03b3 passes through \u03bd0 and eventually reaches the boundary of conv(X0 \u222a {\u00b5}) at some \u03bd1 by continuity of \u03b3 (see Theorem F.3). Let segment `0 be the portion of \u03b3 going from \u03bd0 to \u03bd1.\nThis construction gives us the first segment `0. There are two possibilities:\n1. \u03bd1 = \u00b5; in this case we are done; 2. \u03bd1 lies on a lower-dimensional face of conv(X0 \u222a {\u00b5}); in this case, we pick some q1 \u2208 p\u22121(\u03bd1)\u2229 [q0 + K(X0)], which can be done by the acute angles assumption, and use the above construction again, starting with q1, and obtaining a new set X1 \u2282 X0 and a new segment `1; and iterate.\nThe above process eventually ends, because with each iteration, the size of the active set decreases. This construction yields monotonicity of Xi and the minimality property.\nThe above construction yields a specific sequence of qi \u2208 p\u22121(\u03bdi) \u2229 [qi\u22121 +K(Xi\u22121)]. We will now show that actually qi \u2208 p\u22121(\u03bdi) \u2229 (q0 + X\u22a5i\u22121) and that the construction of L is independent of the specific q1, q2, . . . , qk\u22121 chosen. To begin, note that from our construction, we can write qi = q0 + u0 + u1 + . . . + ui\u22121 for some uj \u2208 K(Xj) \u2286 X\u22a5j . Since Xi \u2286 Xj for j = 1, . . . , i\u2212 1, we actually have uj \u2208 X\u22a5i\u22121, so qi \u2208 (q0 + X\u22a5i\u22121). Note that X\u22a5i\u22121 \u2286 X\u22a5i , and according to Proposition 4.3, any qi \u2208 p\u22121(\u03bdi)\u2229 (q0 +X\u22a5i ) yields the same \u00b5-perpendicular to aff(Xi) and hence the same segment `i. By induction it therefore follows that the segments `0, . . . , `k\u22121 are uniquely determined by our construction regardless of the specific q1, . . . , qk\u22121.\nPart 1\u2019: The solution path starting at a midpoint Let \u03bd \u2208 imL, and q \u2208 p\u22121(\u03bd) \u2229 (q0 + X\u22a5\u03bd ), and let L\u2032 be the solution path if the initial state were q rather than q0. By a similar reasoning as in the previous paragraph, we see that L\u2032 is a restriction of L starting with \u03bd.\nPart 2: Budget additivity for points on L Let \u03bd, \u03bd\u2032 \u2208 imL such that \u03bd \u03bd\u2032. Let q \u2208 Q\u0302(\u03bd; q0) and q\u2032 \u2208 Q\u0302(\u03bd\u2032; q) such that q \u2208 Q\u0302(B; q0) and q\u2032 \u2208 Q\u0302(B\u2032; q). Note that by Proposition C.2, q is arbitrage-free. In this part we show that q\u2032 \u2208 Q\u0302(B +B\u2032; q0).\nFirst, consider the case that \u03bd\u2032 = \u00b5. To see that q\u2032 \u2208 Q\u0302(B + B\u2032; q0), first note that the constraints of Convex\nProgram (2.1) hold, because U(q\u2032, \u03c9; q0) = U(q\u2032, \u03c9; q) + U(q, \u03c9; q0) \u2265 \u2212B\u2032 \u2212 B for all \u03c9 by path independence of the utility function. As noted in the introduction, in the absence of constraints, the utility U(q\u0304, \u00b5; q0) is maximized at any q\u0304 with p(q\u0304) = \u00b5. Thus, q\u2032 is a global maximizer of the utility and satisfies the constraints, so q\u2032 \u2208 Q\u0302(B +B\u2032; q0). If \u03bd = \u00b5, we must also have \u03bd\u2032 = \u00b5 and the statement holds by previous reasoning.\nIn the remainder, we only analyze the case \u03bd \u03bd\u2032 \u227a \u00b5. This means that \u03bd \u2208 (im `i)\\{\u03bdi+1} and \u03bd\u2032 \u2208 (im `j)\\{\u03bdj+1} for i \u2264 j. By Theorem 3.4, we therefore must have q \u2208 [q0 + K(Xi)] and q\u2032 \u2208 [q + K(Xj)]. By anti-monotonicity of witness cones, K(Xj) \u2287 K(Xi) and hence, q\u2032 \u2208 [q0 +K(Xj)], yielding\nq\u2032 \u2208 Q\u0302(\u03bd\u2032; q0) .\nWe now argue that the budgets add up. Let x \u2208 Xj \u2286 Xi. By Lemma 3.1, we obtain that\nq \u2208 Q\u0302(B; q0) for B = \u2212U(q, x; q0) , q\u2032 \u2208 Q\u0302(B\u2032; q) for B\u2032 = \u2212U(q\u2032, x; q) , q\u2032 \u2208 Q\u0302(B\u0304; q0) for B\u0304 = \u2212U(q\u2032, x; q0) .\nHowever, by path independence of the utility function\nB\u0304 = \u2212U(q\u2032, x; q0) = \u2212U(q\u2032, x; q)\u2212U(q, x; q0) = B\u2032+B.\nPart 3: L as the locus of all solutions In this part we show that Q\u0302(q0) = \u22c3\n\u03bd\u2208imL Q\u0302(\u03bd; q0) .\nWe will begin by defining sets of budgets for which the optimal price is \u03bd and show that their union across all \u03bd \u2208 imL is a closed interval. Since both \u03bd0, \u00b5 \u2208 imL, this will mean that we have included price vectors across all possible budgets. The statement of Part 3 will then follow by Theorem 2.2.\nLet x \u2208 Xk\u22121 = \u22c2k\u22121 i=0 Xi and let B(q) := \u2212U(q, x; q0). Further, for \u03bd \u2208 im `i, let\nBi(\u03bd) := {B(q) : q \u2208 p\u22121(\u03bd) \u2229 [q0 +K(Xi)]} .\nFrom Corollary 3.5, we know that for \u03bd \u2208 (im `i)\\{\u03bdi+1}, Bi(\u03bd) is exactly the set of budgets for which \u03bd is the optimal price vector. The setBi(\u03bdi+1) is potentially only a subset of such budgets (corresponding toXi being the tight set, rather than the actual minimal setXi+1). First we show that Bi(\u03bd) is non-empty for \u03bd \u2208 im `i. Let \u03bd \u2208 im `i. By acute angles assumption, there exists q \u2208 p\u22121(\u03bd)\u2229 [qi+K(Xi)]. Furthermore, qj \u2208 [qj\u22121 + K(Xj\u22121)] for j = 1, . . . , i, so we can write q = q0 + u0 + \u00b7 \u00b7 \u00b7 + ui where uj \u2208 K(Xj). By anti-monotonicity of witness cones, K(Xj) \u2286 K(Xi)\nfor j = 1, . . . , i, so we actually have uj \u2208 K(Xi) and thus q \u2208 [q0 +K(Xi)], proving that the set Bi(\u03bd) is non-empty.\nWe will next show that Bi(`i) := \u22c3\n\u03bd\u2208im `i\nBi(\u03bd)\nis an interval.\nConsider a fixed \u03bd \u2208 im `i. For q \u2208 p\u22121(\u03bd), we have C(q) = q \u00b7 \u03bd \u2212 C\u2217(\u03bd), i.e., B(q) is linear in q over q \u2208 p\u22121(\u03bd). Since the set p\u22121(\u03bd) is closed and convex, so is p\u22121(\u03bd) \u2229 [q0 + K(Xi)]. The latter set is also nonempty, hence the set Bi(\u03bd) must be a non-empty closed interval. LetBmini (\u03bd) andB max i (\u03bd) be the lower and upper endpoints ofBi(\u03bd). Since the budget additivity holds along L (by Part 2), we must have thatBmaxi is non-decreasing on `i. Next note that for \u03bd 6= \u03bd\u2032 the setsBi(\u03bd) andBi(\u03bd\u2032) must be disjoint. This implies that Bmaxi is actually increasing and so is Bmini .\nWe next show that Bmaxi is right-continuous on `i. Let M := {(\u03bd, q) : \u03bd \u2208 im `i, q \u2208 p\u22121(\u03bd)}. By Theorem F.3, the set M can be written C+(0\u2295L\u22a5) where C is compact. LetM \u2032 := {(\u03bd, q) : \u03bd \u2208 im `i, q \u2208 p\u22121(\u03bd)\u2229[q0+K(Xi)]}. Since the set [q0 +K(Xi)] is closed, the setM \u2032 can be written as C\u2032 + (0 \u2295 L\u22a5) where C\u2032 is compact. To show that Bmaxi is right-continuous, pick \u03bd \u2208 im `i and let {\u03bd\u2032t}\u221et=1 be a sequence of \u03bd\u2032t \u2208 `i, \u03bd\u2032t \u03bd such that limt\u2192\u221e \u03bd\u2032t = \u03bd. Pick q\u2032t such that (\u03bd \u2032 t, q \u2032 t) \u2208 C\u2032 and B(q\u2032t) = Bmaxi (\u03bd\u2032t). By compactness, the sequence {(\u03bd\u2032t, q\u2032t)}\u221et=1 must have a cluster point (\u03bd, q) \u2208 C\u2032, and by continuity of B, we must have limt\u2192\u221eB max i (\u03bd \u2032 t) = limt\u2192\u221eB(q \u2032 t) = B(q) \u2264 Bmaxi (\u03bd). The right continuity ofBmaxi now follows by monotonicity. By symmetric reasoning, Bmini must be left-continuous.\nNow for the sake of contradiction, assume thatBi(`i) is not an interval, i.e., assume that there is a value B\u2217 6\u2208 Bi(`i) such that some higher and lower values are in Bi(`i). By monotonicity, there must exist \u03bd\u2217 such thatBmaxi (\u03bd) < B \u2217 for \u03bd \u227a \u03bd\u2217 and Bmini (\u03bd) > B\u2217 for \u03bd \u03bd\u2217. However, this means that\nBmini (\u03bd \u2217) = lim \u03bd\u2191\u03bd\u2217 Bmini (\u03bd \u2217) \u2264 lim \u03bd\u2191\u03bd\u2217 Bmaxi (\u03bd \u2217) \u2264 B\u2217\nand\nBmaxi (\u03bd \u2217) = lim \u03bd\u2193\u03bd\u2217 Bmaxi (\u03bd \u2217) \u2265 lim \u03bd\u2193\u03bd\u2217 Bmini (\u03bd \u2217) \u2265 B\u2217\nwhich means that B\u2217 \u2208 Bi(\u03bd\u2217) yielding a contradiction.\nFinally, note that Bi(\u03bdi+1) \u2286 Bi+1(\u03bdi+1) for i \u2264 k \u2212 1, hence \u22c3k\u22121 i=1 Bi(`i) is an interval as well.\nPart 3\u2019: L as the locus of solutions starting at a midpoint Let \u03bd \u2208 imL and q \u2208 Q\u0302(\u03bd; q0). Since Q\u0302(\u03bd; q0) \u2286 p\u22121(\u03bd) \u2229 (q0 + X\u22a5\u03bd ), Part 1\u2019 yields that the solution path L\u2032 for q coincides with the portion of L starting at \u03bd. By\nProposition C.2, q is arbitrage-free, so the reasoning of the previous part can be applied to L\u2032, yielding the following statement:\nQ\u0302(q) = \u22c3\n\u03bd\u2032\u2208imL: \u03bd\u2032 \u03bd\nQ\u0302(\u03bd\u2032; q) .\nPart 4: Proof of the theorem Let B,B\u2032 \u2265 0 and q \u2208 Q\u0302(B; q0) and q\u2032 \u2208 Q\u0302(B\u2032; q). From Parts 3 and 3\u2019, we know that q \u2208 Q\u0302(\u03bd; q0) and q\u2032 \u2208 Q\u0302(\u03bd\u2032; q) for some \u03bd, \u03bd\u2032 \u2208 imL such that \u03bd \u03bd\u2032. By Part 2, we therefore obtain that q\u2032 \u2208 Q\u0302(B +B\u2032; q0), proving the theorem."}], "references": [{"title": "An optimization-based framework for automated market-making", "author": ["Jacob Abernethy", "Yiling Chen", "Jennifer Wortman Vaughan"], "venue": "In ACM Conference on Electronic Commerce,", "citeRegEx": "1", "shortCiteRegEx": "1", "year": 2011}, {"title": "Learning performance of prediction markets with Kelly bettors", "author": ["Alina Beygelzimer", "John Langford", "David M. Pennock"], "venue": "In International Conference on Autonomous Agents and Multiagent Systems,", "citeRegEx": "2", "shortCiteRegEx": "2", "year": 2012}, {"title": "Verication of forecasts expressed in terms of probability", "author": ["GW Brier"], "venue": "Monthly Weather Review,", "citeRegEx": "3", "shortCiteRegEx": "3", "year": 1950}, {"title": "A utility framework for bounded-loss market makers", "author": ["Yiling Chen", "David M. Pennock"], "venue": "In Conference on Uncertainty in Artificial Intelligence,", "citeRegEx": "4", "shortCiteRegEx": "4", "year": 2007}, {"title": "A new understanding of prediction markets via no-regret learning", "author": ["Yiling Chen", "Jennifer Wortman Vaughan"], "venue": "In ACM Conference on Electronic Commerce,", "citeRegEx": "5", "shortCiteRegEx": "5", "year": 2010}, {"title": "A tractable combinatorial market maker using constraint generation", "author": ["Miroslav Dud\u0131\u0301k", "S\u00e9bastien Lahaie", "David M. Pennock"], "venue": "In ACM Conference on Electronic Commerce,", "citeRegEx": "6", "shortCiteRegEx": "6", "year": 2012}, {"title": "Consensus of subjective probabilities: The pari-mutuel method", "author": ["Edmund Eisenberg", "David Gale"], "venue": "Annals of Mathematical Statistics,", "citeRegEx": "7", "shortCiteRegEx": "7", "year": 1959}, {"title": "Multi-outcome and multidimensional market scoring", "author": ["Lance Fortnow", "Rahul Sami"], "venue": "rules. CoRR,", "citeRegEx": "8", "shortCiteRegEx": "8", "year": 2012}, {"title": "Interpreting prediction markets: a stochastic approach", "author": ["Rafael Frongillo", "Nicolas Della Penna", "Mark Reid"], "venue": "In Advances in Neural Information Processing Systems", "citeRegEx": "9", "shortCiteRegEx": "9", "year": 2012}, {"title": "Strictly proper scoring rules, prediction, and estimation", "author": ["Tilmann Gneiting", "Adrian E Raftery"], "venue": "Journal of the American Statistical Association,", "citeRegEx": "10", "shortCiteRegEx": "10", "year": 2007}, {"title": "Prediction without markets", "author": ["Sharad Goel", "Daniel M. Reeves", "Duncan J. Watts", "David M. Pennock"], "venue": "In ACM Conference on Electronic Commerce,", "citeRegEx": "11", "shortCiteRegEx": "11", "year": 2010}, {"title": "Combinatorial information market design", "author": ["Robin Hanson"], "venue": "Information Systems Frontiers,", "citeRegEx": "12", "shortCiteRegEx": "12", "year": 2003}, {"title": "Logarithmic market scoring rules for modular combinatorial information aggregation", "author": ["Robin Hanson"], "venue": "Journal of Prediction Markets,", "citeRegEx": "13", "shortCiteRegEx": "13", "year": 2007}, {"title": "Methods for combining experts\u2019 probability assessments", "author": ["Robert A. Jacobs"], "venue": "Neural Computation,", "citeRegEx": "14", "shortCiteRegEx": "14", "year": 1995}, {"title": "An axiomatic characterization of adaptive-liquidity market makers", "author": ["Xiaolong Li", "Jennifer Wortman Vaughan"], "venue": "In ACM Conference on Electronic Commerce,", "citeRegEx": "15", "shortCiteRegEx": "15", "year": 2013}, {"title": "Interpreting the predictions of prediction markets", "author": ["Charles F. Manski"], "venue": "Economics Letters,", "citeRegEx": "16", "shortCiteRegEx": "16", "year": 2006}, {"title": "A practical liquiditysensitive automated market maker", "author": ["Abraham Othman", "Tuomas Sandholm", "David M. Pennock", "Daniel M. Reeves"], "venue": "In ACM Conference on Electronic Commerce,", "citeRegEx": "17", "shortCiteRegEx": "17", "year": 2010}, {"title": "Convex Analysis", "author": ["R. Tyrrell Rockafellar"], "venue": null, "citeRegEx": "18", "shortCiteRegEx": "18", "year": 1970}, {"title": "Prediction markets", "author": ["Justin Wolfers", "Eric Zitzewitz"], "venue": "Journal of Economic Perspectives,", "citeRegEx": "19", "shortCiteRegEx": "19", "year": 2004}], "referenceMentions": [{"referenceID": 10, "context": "Prediction markets have a good track record of forecast accuracy in many domains [11, 19].", "startOffset": 81, "endOffset": 89}, {"referenceID": 18, "context": "Prediction markets have a good track record of forecast accuracy in many domains [11, 19].", "startOffset": 81, "endOffset": 89}, {"referenceID": 1, "context": "When agents are constrained in how much they can trade only by risk aversion, prediction market prices can be interpreted as a weighted average of traders\u2019 beliefs [2, 20], a natural reflection of the \u201cwisdom of the crowd\u201d with a good empirical track record [14] and theoretical support [2].", "startOffset": 164, "endOffset": 171}, {"referenceID": 13, "context": "When agents are constrained in how much they can trade only by risk aversion, prediction market prices can be interpreted as a weighted average of traders\u2019 beliefs [2, 20], a natural reflection of the \u201cwisdom of the crowd\u201d with a good empirical track record [14] and theoretical support [2].", "startOffset": 258, "endOffset": 262}, {"referenceID": 1, "context": "When agents are constrained in how much they can trade only by risk aversion, prediction market prices can be interpreted as a weighted average of traders\u2019 beliefs [2, 20], a natural reflection of the \u201cwisdom of the crowd\u201d with a good empirical track record [14] and theoretical support [2].", "startOffset": 287, "endOffset": 290}, {"referenceID": 6, "context": "However, when agents are budget constrained, discontinuities and idiosyncratic results can arise [7, 16] that call into question whether the equilibrium prices can be trusted to reflect any kind of useful aggregation.", "startOffset": 97, "endOffset": 104}, {"referenceID": 15, "context": "However, when agents are budget constrained, discontinuities and idiosyncratic results can arise [7, 16] that call into question whether the equilibrium prices can be trusted to reflect any kind of useful aggregation.", "startOffset": 97, "endOffset": 104}, {"referenceID": 0, "context": "We consider prediction markets with an automated market maker [1, 4, 13] that maintains standing offers to trade every security at some price.", "startOffset": 62, "endOffset": 72}, {"referenceID": 3, "context": "We consider prediction markets with an automated market maker [1, 4, 13] that maintains standing offers to trade every security at some price.", "startOffset": 62, "endOffset": 72}, {"referenceID": 12, "context": "We consider prediction markets with an automated market maker [1, 4, 13] that maintains standing offers to trade every security at some price.", "startOffset": 62, "endOffset": 72}, {"referenceID": 0, "context": "The design of such an automated market maker boils down to choosing a convex cost function [1].", "startOffset": 91, "endOffset": 94}, {"referenceID": 0, "context": "This amount of design freedom presents an opportunity to seek cost functions that satisfy additional desiderata such as computational tractability [1, 6].", "startOffset": 147, "endOffset": 153}, {"referenceID": 5, "context": "This amount of design freedom presents an opportunity to seek cost functions that satisfy additional desiderata such as computational tractability [1, 6].", "startOffset": 147, "endOffset": 153}, {"referenceID": 7, "context": "We adopt the notion of the \u201cnatural budget constraint\u201d introduced by Fortnow and Sami [8]: the agent is allowed only those trades for which the maximum loss for any possible outcome does not exceed the budget.", "startOffset": 86, "endOffset": 89}, {"referenceID": 16, "context": "This setup constitutes a de facto industry standard, and the companies that use (or used) it include Inkling Markets,2 Consensus Point,3 Microsoft and Yahoo! [17].", "startOffset": 158, "endOffset": 162}, {"referenceID": 7, "context": "Previously, Fortnow and Sami [8] considered a different question: do budget-constrained bidders always move the market prices in the direction of their beliefs? They showed that the answer to this is no: there always exist market prices, beliefs and budgets such that the direction of price movement is not towards the belief.", "startOffset": 29, "endOffset": 32}, {"referenceID": 7, "context": "The impossibility result of Fortnow and Sami [8] can be easily derived from our characterization (see Appendix D).", "startOffset": 45, "endOffset": 48}, {"referenceID": 2, "context": "Two of the most studied scoring rules are the quadratic scoring rule [3] and the logarithmic market scoring rule [13].", "startOffset": 69, "endOffset": 72}, {"referenceID": 12, "context": "Two of the most studied scoring rules are the quadratic scoring rule [3] and the logarithmic market scoring rule [13].", "startOffset": 113, "endOffset": 117}, {"referenceID": 3, "context": "We consider costfunction-based prediction markets [4, 12], a fully general class under reasonable assumptions [1, 5].", "startOffset": 50, "endOffset": 57}, {"referenceID": 11, "context": "We consider costfunction-based prediction markets [4, 12], a fully general class under reasonable assumptions [1, 5].", "startOffset": 50, "endOffset": 57}, {"referenceID": 0, "context": "We consider costfunction-based prediction markets [4, 12], a fully general class under reasonable assumptions [1, 5].", "startOffset": 110, "endOffset": 116}, {"referenceID": 4, "context": "We consider costfunction-based prediction markets [4, 12], a fully general class under reasonable assumptions [1, 5].", "startOffset": 110, "endOffset": 116}, {"referenceID": 9, "context": "Their equivalence with proper scoring rules has been implicitly noted by Gneiting and Raftery [10].", "startOffset": 94, "endOffset": 98}, {"referenceID": 1, "context": "Several authors have studied relationships between utility functions and price dynamics in prediction markets, drawing a parallel to online learning [2, 5, 9].", "startOffset": 149, "endOffset": 158}, {"referenceID": 4, "context": "Several authors have studied relationships between utility functions and price dynamics in prediction markets, drawing a parallel to online learning [2, 5, 9].", "startOffset": 149, "endOffset": 158}, {"referenceID": 8, "context": "Several authors have studied relationships between utility functions and price dynamics in prediction markets, drawing a parallel to online learning [2, 5, 9].", "startOffset": 149, "endOffset": 158}, {"referenceID": 14, "context": "Our analysis touches on the problem of setting the market maker\u2019s liquidity parameter [15, 17], which determines how (in)sensitive prices are to trading volume.", "startOffset": 86, "endOffset": 94}, {"referenceID": 16, "context": "Our analysis touches on the problem of setting the market maker\u2019s liquidity parameter [15, 17], which determines how (in)sensitive prices are to trading volume.", "startOffset": 86, "endOffset": 94}, {"referenceID": 7, "context": "We consider the notion of natural budget constraint defined by Fortnow and Sami [8] which states that the loss of the agent is at most his budget, for all \u03c9 \u2208 \u03a9.", "startOffset": 80, "endOffset": 83}, {"referenceID": 0, "context": "Similarly, for n = 1 and M = [0, 1], the inclusion assumption is satisfied by the conjugate C\u2217(\u03bd) = 1/\u03bd + 1/(1 \u2212 \u03bd) on \u03bd \u2208 (0, 1) and C\u2217(\u03bd) = \u221e on \u03bd 6\u2208 (0, 1), but this conjugate does not satisfy the finite loss assumption.", "startOffset": 29, "endOffset": 35}, {"referenceID": 0, "context": "For instance, it always holds when C is constructed as in [1], because their construction guarantees domC\u2217 = M.", "startOffset": 58, "endOffset": 61}, {"referenceID": 5, "context": ", [6]).", "startOffset": 2, "endOffset": 5}, {"referenceID": 0, "context": "[1] Jacob Abernethy, Yiling Chen, and Jennifer Wortman Vaughan.", "startOffset": 0, "endOffset": 3}, {"referenceID": 1, "context": "[2] Alina Beygelzimer, John Langford, and David M.", "startOffset": 0, "endOffset": 3}, {"referenceID": 2, "context": "[3] GW Brier.", "startOffset": 0, "endOffset": 3}, {"referenceID": 3, "context": "[4] Yiling Chen and David M.", "startOffset": 0, "endOffset": 3}, {"referenceID": 4, "context": "[5] Yiling Chen and Jennifer Wortman Vaughan.", "startOffset": 0, "endOffset": 3}, {"referenceID": 5, "context": "[6] Miroslav Dud\u0131\u0301k, S\u00e9bastien Lahaie, and David M.", "startOffset": 0, "endOffset": 3}, {"referenceID": 6, "context": "[7] Edmund Eisenberg and David Gale.", "startOffset": 0, "endOffset": 3}, {"referenceID": 7, "context": "[8] Lance Fortnow and Rahul Sami.", "startOffset": 0, "endOffset": 3}, {"referenceID": 8, "context": "[9] Rafael Frongillo, Nicolas Della Penna, and Mark Reid.", "startOffset": 0, "endOffset": 3}, {"referenceID": 9, "context": "[10] Tilmann Gneiting and Adrian E Raftery.", "startOffset": 0, "endOffset": 4}, {"referenceID": 10, "context": "[11] Sharad Goel, Daniel M.", "startOffset": 0, "endOffset": 4}, {"referenceID": 11, "context": "[12] Robin Hanson.", "startOffset": 0, "endOffset": 4}, {"referenceID": 12, "context": "[13] Robin Hanson.", "startOffset": 0, "endOffset": 4}, {"referenceID": 13, "context": "[14] Robert A.", "startOffset": 0, "endOffset": 4}, {"referenceID": 14, "context": "[15] Xiaolong Li and Jennifer Wortman Vaughan.", "startOffset": 0, "endOffset": 4}, {"referenceID": 15, "context": "[16] Charles F.", "startOffset": 0, "endOffset": 4}, {"referenceID": 16, "context": "[17] Abraham Othman, Tuomas Sandholm, David M.", "startOffset": 0, "endOffset": 4}, {"referenceID": 17, "context": "[18] R.", "startOffset": 0, "endOffset": 4}, {"referenceID": 18, "context": "[19] Justin Wolfers and Eric Zitzewitz.", "startOffset": 0, "endOffset": 4}, {"referenceID": 11, "context": "Our second example is Hanson\u2019s logarithmic market-scoring rule (LMSR) [12, 13], which is applied to complete markets whose outcomes coincide with basis vectors, i.", "startOffset": 70, "endOffset": 78}, {"referenceID": 12, "context": "Our second example is Hanson\u2019s logarithmic market-scoring rule (LMSR) [12, 13], which is applied to complete markets whose outcomes coincide with basis vectors, i.", "startOffset": 70, "endOffset": 78}, {"referenceID": 0, "context": "For example, consider n = 1, M = [0, 1], and the cost function C(q) = max{0, q/2}.", "startOffset": 33, "endOffset": 39}, {"referenceID": 7, "context": "3) to derive the impossibility result of Fortnow and Sami [8].", "startOffset": 58, "endOffset": 61}, {"referenceID": 17, "context": "The following result of Rockafellar [18] will be instrumental in proving continuity properties of the perpendicular.", "startOffset": 36, "endOffset": 40}, {"referenceID": 17, "context": "7 of Rockafellar [18]).", "startOffset": 17, "endOffset": 21}, {"referenceID": 17, "context": "1 of Rockafellar [18]).", "startOffset": 17, "endOffset": 21}, {"referenceID": 0, "context": "A\u2032 = {a \u2208 R : (a\u2212 e1) \u00b7 (ei \u2212 e1) = 0 for 2 \u2264 i \u2264 k} = {a \u2208 R : a[i] = a[1]\u2212 1 for 2 \u2264 i \u2264 k}", "startOffset": 72, "endOffset": 75}, {"referenceID": 0, "context": "For any I \u2286 [0, 1], let", "startOffset": 12, "endOffset": 18}], "year": 2015, "abstractText": "We give a detailed characterization of optimal trades under budget constraints in a prediction market with a cost-function-based automated market maker. We study how the budget constraints of individual traders affect their ability to impact the market price. As a concrete application of our characterization, we give sufficient conditions for a property we call budget additivity: two traders with budgets B and B\u2032 and the same beliefs would have a combined impact equal to a single trader with budget B +B\u2032. That way, even if a single trader cannot move the market much, a crowd of like-minded traders can have the same desired effect. When the set of payoff vectors associated with outcomes, with coordinates corresponding to securities, is affinely independent, we obtain that a generalization of the heavily-used logarithmic market scoring rule is budget additive, but the quadratic market scoring rule is not. Our results may be used both descriptively, to understand if a particular market maker is affected by budget constraints or not, and prescriptively, as a recipe to construct markets.", "creator": "LaTeX with hyperref package"}}}