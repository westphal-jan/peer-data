{"id": "1004.2624", "review": {"conference": "aaai", "VERSION": "v1", "DATE_OF_SUBMISSION": "15-Apr-2010", "title": "Symmetry within Solutions", "abstract": "We define the concept of an internal symmetry. This is a symmety within a solution of a constraint satisfaction problem. We compare this to solution symmetry, which is a mapping between different solutions of the same problem. We argue that we may be able to exploit both types of symmetry when finding solutions. We illustrate the potential of exploiting internal symmetries on two benchmark domains: Van der Waerden numbers and graceful graphs. By identifying internal symmetries we are able to extend the state of the art in both cases.", "histories": [["v1", "Thu, 15 Apr 2010 13:15:06 GMT  (26kb)", "http://arxiv.org/abs/1004.2624v1", "AAAI 2010, Proceedings of Twenty-Fourth AAAI Conference on Artificial Intelligence"]], "COMMENTS": "AAAI 2010, Proceedings of Twenty-Fourth AAAI Conference on Artificial Intelligence", "reviews": [], "SUBJECTS": "cs.AI", "authors": ["marijn heule", "toby walsh"], "accepted": true, "id": "1004.2624"}, "pdf": {"name": "1004.2624.pdf", "metadata": {"source": "CRF", "title": "Symmetry within Solutions", "authors": ["Marijn Heule", "Toby Walsh"], "emails": ["marijn@heule.nl", "toby.walsh@nicta.com.au"], "sections": [{"heading": null, "text": "ar X\niv :1\n00 4.\n26 24\nv1 [\ncs .A\nI] 1\n5 A\npr 2\n01 0"}, {"heading": "Introduction", "text": "Symmetry is an important feature of many combinatorial search problems. To be able to solve such problems, we often need to take account of symmetry. For example, when finding magic squares (prob019 in CSPLib (Gent and Walsh 1999)), we have the symmetries that rotate and reflect the square. Factoring such symmetry out of the search space is often critical when trying to solve large instances of a problem. Up till now, research on symmetry has mostly focused on symmetries between different solutions of the same problem. In this paper, we propose considering in addition the internal symmetries (that is, symmetries within each solution). Whilst it appears to be challenging to identify useful internal symmetries, such symmetries are easy to exploit. We simply add constraints that restrict search to those solutions with the required internal symmetry and limit branching to the subset of decisions that generate a complete solution. We will demonstrate the value of exploiting internal symmetries within solutions with experimental results on two benchmark domains: Van der Waerden numbers and graceful graphs."}, {"heading": "Symmetry between solutions", "text": "A symmetry \u03c3 is a bijection on assignments. Given a set of assignments A and a symmetry \u03c3, we write \u03c3(A) for {\u03c3(a) | a \u2208 A}. Similarly, given a set of symmetries \u03a3, we write \u03a3(A) for {\u03c3(a) | a \u2208 A, \u03c3 \u2208 \u03a3}. A special type of symmetry, called solution symmetry is a symmetry between the solutions of a problem. Such a symmetry maps\nCopyright c\u00a9 2013, Association for the Advancement of Artificial Intelligence (www.aaai.org). All rights reserved.\nsolutions onto solutions. A solution is simply a set of assignments that satisfy every constraint in the problem. More formally, we say that a problem has the solution symmetry \u03c3 iff \u03c3 of any solution is itself a solution (Cohen et al. 2006). As such mappings are associativity, and the inverse of a solution symmetry and the identity mapping are solution symmetries, the set of solution symmetries \u03a3 of a problem forms a group under composition. We say that two sets of assignments A and B are in the same symmetry class of \u03a3 iff there exists \u03c3 \u2208 \u03a3 such that \u03c3(A) = B. Running example. The magic squares problem is to label a n by n square so that the sum of every row, column and diagonal are equal (prob019 in CSPLib (Gent and Walsh 1999)). A normal magic square contains the integers 1 to n2. We model this with n2 variables Xi,j where Xi,j = k iff the ith column and jth row is labelled with the integer k.\n\u201cLo Shu\u201d, the smallest non-trivial normal magic square has been known for over four thousand years and is an important object in ancient Chinese mathematics:\n4 9 2 3 5 7 8 1 6\n(1)\nThe magic squares problem has a number of solution symmetries. For example, consider the symmetry \u03c3d that reflects a solution in the leading diagonal. This map \u201cLo Shu\u201d onto a symmetric solution:\n6 7 2 1 5 9 8 3 4\n(2)\nAny other rotation or reflection of the square maps one solution onto another. The 8 symmetries of the square are thus all solution symmetries of this problem. In fact, there are only 8 different magic square of order 3, and all are in the same symmetry class.\nOne way to factor solution symmetry out of the search space is to post symmetry breaking constraints. See, for instance, (Puget 1993; Crawford et al. 1996; Flener et al. 2002; Frisch et al. 2002; Walsh 2006a; Walsh 2006b; Law et al. 2007; Walsh 2007). For example, we can eliminate \u03c3d by posting a constraint which ensures that the top left corner is smaller than its symmetry, the bottom right corner. This selects (1) and eliminates (2)."}, {"heading": "Symmetry within a solution", "text": "Symmetries can also be found within individual solutions of a constraint satisfaction problem. We say that a solution A contains the internal symmetry \u03c3 (or equivalently \u03c3 is a internal symmetry within this solution) iff \u03c3(A) = A. Running example. Consider again \u201cLo Shu\u201d. This contains an internal symmetry. To see this, consider the solution symmetry \u03c3inv that inverts labels, mapping k onto n2+1\u2212k. This solution symmetry maps \u201cLo Shu\u201d onto a different (but symmetric) solution. However, if we now apply the solution symmetry \u03c3180 that rotates the square 180\u25e6, we map back onto the original solution:\n4 9 2 3 5 7 8 1 6\n\u03c3inv \u21d2 \u21d0 \u03c3180\n6 1 8 7 5 3 2 9 4\nConsider the composition of these two symmetries: \u03c3inv \u25e6 \u03c3180. As this symmetry maps \u201cLo Shu\u201d onto itself, the solution \u201cLo Shu\u201d contains the internal symmetry \u03c3inv \u25e6 \u03c3180.\nOne significant difference between a solution symmetry and an internal symmetry is that a solution symmetry is a property of every solution whilst an internal symmetry is a property of just the given solution. Running example. Consider the following magic square:\n1 4 13 16 14 15 2 3 8 5 12 9 11 10 7 6\n(3)\n\u03c3inv \u25e6\u03c3180 is not an internal symmetry contained within this solution:\n1 4 13 16 14 15 2 3 8 5 12 9 11 10 7 6\n\u21d4 \u03c3inv \u25e6 \u03c3180\n11 10 7 6 8 5 12 9 14 15 2 3 1 4 13 16\nHowever, \u03c3inv \u25e6\u03c3180 is an internal symmetry found within the following solution:\n1 8 12 13 14 11 7 2 15 10 6 3 4 5 9 16\n(4)\nThus we can conclude that \u03c3inv \u25e6\u03c3180 is an internal symmetry contained within some but not all solutions of the normal magic squares problem. In fact, 48 out of the 880 distinct normal magic squares of order 4 contain this internal symmetry. On the other hand, \u03c3inv \u25e6\u03c3180 is a solution symmetry of normal magic square problems of every size.\nA solution containing an internal symmetry can often be described by a subset of assignments and one or more symmetries acting on this subset that generate a complete set of assignments. Given a set of symmetries \u03a3, we write \u03a3\u2217 for the closure of \u03a3. That is, \u03a30 = \u03a3, \u03a3i = {\u03c31 \u25e6 \u03c32 | \u03c31 \u2208 \u03a3, \u03c32 \u2208 \u03a3 i\u22121}, \u03a3\u2217 = \u22c3 i\u03a3 i. Given a solution A, we say the subset B of A and the symmetries \u03a3 generate A iff A = B \u222a \u03a3\u2217(B). In this case, we also describe A as containing the internal symmetries \u03a3.\nRunning example. Consider again the solution (4) which contains the internal symmetry \u03c3inv \u25e6 \u03c3180. Half this magic square and \u03c3inv \u25e6 \u03c3180 generate the whole solution:\n1 8 12 13 14 11 7 2 - - - - - - - -\n\u21d4 \u03c3inv \u25e6 \u03c3180\n- - - - - - - -\n15 10 6 3 4 5 9 16\nIn fact, (4) can be generated from just the first quadrant and two symmetries: \u03c3inv \u25e6 \u03c3180 and a symmetry \u03c4 which constructs a 180\u25e6 rotation of the first quadrant in the second quadrant, decrementing those squares on the leading diagonal and incrementing those on the trailing diagonal (the same symmetry constructs the third quadrant from the fourth). More precisely, \u03c4 makes the following mappings:\na b - - c d - - - - - - - - - -\n\u21d2 \u03c4\n- - d+1 c-1 - - b-1 a+1 - - - - - - - -\nThe example hints at how we can exploit internal symmetries within solutions. We will limit search to a subset of the decision variables that generates a complete set of assignments and construct the rest of the solution using the generating symmetries."}, {"heading": "Theoretical properties", "text": "We identify some properties of internal symmetries that will be used to help find solutions.\nSet of internal symmetries within a solution Like solution symmetries, the internal symmetries within a solution form a group. A solution A contains a set of internal symmetries \u03a3 (or equivalently\u03a3 are internal symmetries within the solution) iff A contains \u03c3 for every \u03c3 \u2208 \u03a3.\nProposition 1. The set of internal symmetries \u03a3 within a solution A form a group under composition.\nProof: The identity symmetry is trivially an internal symmetry. Internal symmetries are also trivially closed under composition, Finally, consider any \u03c3 \u2208 \u03a3. As \u03c3(A) = A, \u03c3\u22121(\u03c3(A)) = \u03c3\u22121(A). That is A = \u03c3\u22121(A). Hence, the inverse of \u03c3 is an internal symmetry. \u2737\nSymmetries within and between solutions In general, there is no relationship between the solution symmetries of a problem and the internal symmetries within a solution of that problem. There are solution symmetries of a problem which are not internal symmetries within any solution of that problem, and vice versa. The problem Z1 6= Z2 has the solution symmetry that swaps Z1 with Z2, but no solutions of Z1 6= Z2 contain this internal symmetry. On the other hand, the solution Z1 = Z2 = 0 of Z1 \u2264 Z2 contains the internal symmetry that swaps Z1 and Z2, but this is not a solution symmetry of Z1 \u2264 Z2 (since Z1 = 0, Z2 = 1 is a solution but its symmetry is not). When all solutions of a problem contain the same internal symmetry, we can be sure that this is a solution symmetry of the problem itself.\nProposition 2. If all solutions of a problem contain an internal symmetry then this is a solution symmetry.\nProof: Consider any solution A. As all solutions of the problem contain the internal symmetry \u03c3, \u03c3(A) = A. Hence \u03c3 maps A onto itself, and \u03c3(A) is also a solution. \u2737\nBy modus tollens, it follows that if \u03c3 is not a solution symmetry of a problem then there exists at least one solution which does not contain the internal symmetry \u03c3."}, {"heading": "Symmetries of symmetric solutions", "text": "We next consider internal symmetries contained within symmetric solutions. In general, the symmetry of a solution contains the conjugate of any internal symmetry contained within the original solution.\nProposition 3. If the solution A contains the internal symmetry \u03c3 and \u03c4 is any (other) symmetry then \u03c4(A) contains the internal symmetry \u03c4 \u25e6 \u03c3 \u25e6 \u03c4\u22121.\nProof: Consider the action of \u03c4 \u25e6 \u03c3 \u25e6 \u03c4\u22121 on \u03c4(A). Now \u03c4(\u03c3(\u03c4\u22121(\u03c4(A)))) = \u03c4(\u03c3(A)). But as A contains the internal symmetry \u03c3, \u03c3(A) = A. Hence \u03c4(\u03c3(A)) = \u03c4(A). Thus \u03c4 \u25e6 \u03c3 \u25e6 \u03c4\u22121 maps \u03c4(A) onto itself. \u2737\nIn the special case that symmetries commute, the symmetry of a solution contains the same internal symmetries as the original problem. Two symmetries \u03c3 and \u03c4 commute iff \u03c3 \u25e6 \u03c4 = \u03c4 \u25e6 \u03c3.\nProposition 4. If the solution A contains the internal symmetry \u03c3 and \u03c4 commutes with \u03c3 then \u03c4(A) also contains the internal symmetry \u03c3.\nProof: By Proposition 3, \u03c4(A) contains the internal symmetry \u03c4\u25e6\u03c3 \u25e6 \u03c4\u22121. But \u03c4 \u25e6 \u03c3 \u25e6 \u03c4\u22121 = \u03c4 \u25e6 \u03c4\u22121 \u25e6 \u03c3 = \u03c3. \u2737"}, {"heading": "Symmetry breaking", "text": "Finally, we consider the compatibility of eliminating symmetric solutions and focusing search on those solutions that contain particular internal symmetries. In general, the two techniques are incompatible. Symmetric breaking may eliminate all those solutions which contain a given internal symmetry.\nRunning example. Consider again the solution (3). This contains the internal symmetry \u03c3v \u25e6\u03c3inv that inverts all values and reflects the square in the vertical axis:\n1 4 13 16 14 15 2 3 8 5 12 9 11 10 7 6\n\u03c3inv \u21d2 \u21d0 \u03c3v\n16 13 4 1 3 2 15 14 9 12 5 8 6 7 10 11\nNote that this internal symmetry can only occur within magic squares of even order or of order 1.\nSuppose symmetry breaking eliminates all solutions in the same symmetry class as (3) except for a symmetric solution which is a 90\u25e6 clockwise rotation of (3). This solution does not contain the internal symmetry \u03c3v \u25e6 \u03c3inv . In fact, this rotation of (3) contains the internal symmetry that inverts all values and reflects the square in the horizontal axis.\n11 8 14 1 10 5 15 4 7 12 2 13 6 9 3 16\n\u21d4 \u03c3v \u25e6 \u03c3inv\n16 3 9 6 13 2 12 7 4 15 5 10 1 14 8 11\nWe can identify a special case where symmetry breaking does not change any internal symmetry within solutions. Suppose symmetry breaking only eliminates symmetries which commute with the internal symmetry contained within a particular solution. In this case, whilst symmetry breaking may eliminate the given solution, it must leave a symmetric solution containing the given internal symmetry. Given a set of constraints C with solution symmetries \u03a3, we say that a set of symmetry breaking constraints S is sound iff for every solution of C there exists at least one solution of C \u222a S in the same symmetry class. Proposition 5. Given a set of constraints C with solution symmetries \u03a3, a sound set of symmetry breaking constraints S, and a solution A containing the internal symmetry \u03c3, if \u03c3 commutes with every symmetry in \u03a3 then there exists a solution of C \u222a S in the same symmetry class as A also containing the internal symmetry \u03c3. Proof: As S is sound, there exists a solution B of C\u222aS and \u03c4 \u2208 \u03a3 with B = \u03c4(A). Now \u03c4 commutes with \u03c3. Therefore by Proposition 4, B contains the internal symmetry \u03c3. \u2737 Running example. Consider the internal symmetry \u03c3inv \u25e6 \u03c3180 contained within some (but not all) normal magic squares. This particular symmetry commutes with every rotation, reflection and inversion solution symmetry of the problem. Hence, if there is a solution with the internal symmetry \u03c3inv \u25e6 \u03c3180, this remains true after breaking the rotational, reflection and inversion symmetries. However, as in the last example, there are internal symmetries contained within some solutions (like reflection in the vertical axis) which do not commute with all symmetries of the square.\nExploiting symmetries within solutions The exploitation of internal symmetries involves two steps: finding internal symmetries, and then restricting search to solutions containing just these internal symmetries. The first step appears challenging. The definition of an internal symmetry is rather weak. There will be many uninteresting internal symmetries contained within a solution. We want to find internal symmetries that are likely to be contained within as yet unsolved instances of our problem. Although we do not yet have an efficient set of automated methods to do this, we can focus on simple symmetries (like the solution symmetries of the problem) and on small and already solved instances of a problem. This may suggest internal symmetries which might be contained in solutions of larger (perhaps open) problems.\nOnce we have identified an internal symmetry which we conjecture may be contained in solutions of other (perhaps larger) instances of the problem, it is a simple matter to restrict search of a constraint solver to solutions of this form. In general, if we want to find solutions containing the internal symmetry \u03c3, we post symmetry constraints of the form:\nZi = j \u21d2 \u03c3(Zi = j)\nIn addition, we can limit branching decisions to a subset of the decisions variables that generates a complete set of assignments. This can significantly reduce the size of the search space. Propagation of the problem and symmetry constraints may prune the search space even further.\nRunning example. Consider again the problem of finding normal magic squares. We coded this problem in BProlog on a Pentium 4 3.2 GHz processor with 3GB of memory. In addition to the problem constraints, we used symmetry breaking constraints that eliminated most of the rotation, reflection and inversion solution symmetries:\nX1,1 < min(X1,n, Xn,1, Xn,n), X1,n < Xn,1,\nX1,1 \u2264 n 2 + 1\u2212 max(X1,1, X1,n, Xn,1, Xn,n) (5)\nWe also used symmetry constraints to ensure a simple internal symmetry was within the solution. Even and odd order magic squares often contain different internal symmetries so we used different symmetry constraints for even and odd n. For even n, we looked for solutions containing \u03c3v \u25e6 \u03c3inv . Recall that this internal symmetry cannot be contained in solutions with odd n (except n = 1). For odd n, we looked instead for solutions containing \u03c3inv \u25e6 \u03c3180. Hence, we used the following symmetry constraints for 1 \u2264 i, j \u2264 n:\nodd(n) \u2192 Xn+1\u2212j,n+1\u2212i = n 2 + 1\u2212Xi,j\neven(n) \u2192 Xn+1\u2212i,j = n 2 + 1\u2212Xi,j (6)\nIn the following table, we report backtracks (b) and time (t) in seconds to find an order n normal magic square using the default branching heuristic, the problem constraints (P ), the symmetry breaking constraints (5) and the internal symmetry constraints (6).\nn P : b/t P + 5: b/t P + 6: b/t P + 5, 6: b/t 3 2/0.00 1/0.00 1/0.00 1/0.00 4 18/0.00 72/0.00 13/0.00 12/0.00 5 6656/0.13 5693/0.12 2287/0.03 38/0.00 6 4.47 \u00b7 109/ 1.92 \u00b7 108/ 959018/ 959018/\n2.43 \u00b7 105 6618.38 28.08 28.63\nWe see that both symmetry breaking and internal symmetry constraints speed up search. In addition, the combination of the two is usually better than either on their own."}, {"heading": "Van der Waerden numbers", "text": "We illustrate the use of internal symmetries within solutions with two applications where we have been able to extend the state of the art. In the first, we found new lower bound certificates for Van der Waerden numbers. Such numbers are an important concept in Ramsey theory. In the second application, we increased the size of graceful labellings known for a family of graphs. Graceful labelling has practical applications in areas like communication theory.\nThe Van der Waerden number, W (k, l) is the smallest integer n such that if the integers 1 to n are colored with k colors then there are always at least l integers in arithmetic progression. For instance, W (2, 3) is 9 since the two sets\n{1, 4, 5, 8} and {2, 3, 6, 7} contain no arithmetic progression of length 3, but every partitioning of the integers 1 to 9 into two sets contains an arithmetic progression of length 3 or more. The certificate that W (2, 3) > 8 can be represented with the following blocks:\n1 2 3 4 5 6 7 8\nFinding such certificates can be encoded as a constraint satisfaction problem. To test if W (k, l) > n, we introduce the Boolean variable xi,j where i \u2208 [0, k), j \u2208 [0, n) and constraints that each integer takes one color ( \u2228 i\u2208[0,k) xi,j ), and that no row of colors contains an arithmetic progression of length l (xi,a \u2227 . . . \u2227 xi,a+d(l\u22122) \u2192 \u00acxi,a+d(l\u22121)). This problem has a number of solution symmetries. For example, we can reverse any certificate and get another symmetric certificate. We can also permute the colors and get another symmetric certificate:\nIndividual certificates also often contain internal symmetry. For example, the second half of the last certificate repeats the first half:\n\u00d72\nHence, this certificate contains the internal symmetry that maps xi,j onto xi,j+4 mod 8.\nIn fact, many known certificates can be generated from some simple symmetry operations on just the colors assigned to the first two or three integers. For instance, the first construction method for Van der Waerden certificates (Rabung 1979) made use of the observation that the largest possible certificates for the known numbers W (k, l)1 consist of a repetition of l\u2212 1 times a base pattern. All these certificates, as well as all best lower bounds, have a base pattern of size m = n\nl\u22121 . This first method only worked for certificates for which m is prime. An improved construction method (Herwig et al. 2007) generalises it for non-primem.\nAn important concept in both construction methods is the primitive root2 of m denoted by r. Let p be the largest prime factor of m, then r is the smallest number for which:\nri(mod m) 6= rj(mod m) for 1 \u2264 i < j < q (7) We identified four internal symmetries: \u03c3+m: Apply to all elements xi,j := xi,j +m (mod n) \u03c3+p: Apply to all elements xi,j := xi,j + p (mod m) \u03c3\u00d7r: Apply to all elements xi,j := xi,j \u00d7 r (mod m) \u03c3\u00d7rt : At least one subset maps onto itself after applying\nxi,j := xi,j \u00d7 r t (mod m) for a t \u2208 {1, . . . , k}\nConsider the largest known certificate for W (5, 3) which has 170 elements. For this certificate, m = 85, p = 17, and r = 3. Below the base pattern is shown the first 85 elements. Notice that for this certificate A, \u03c3+p(A) and \u03c3\u00d7r(A) are also certificates. In fact, after sorting the elements and permuting the subsets, this certificate is mapped onto itself after applying these symmetries.\n1Except for W (3, 3) 2Our use slightly differs from the conventional definition\n18 20 24 26 33 36 38 44 65 66 74 76 79 80 5 13 17\n22 30 34 35 37 41 43 50 53 55 61 82 83 6 8 11 12\n23 25 28 29 39 47 51 52 54 58 60 67 70 72 78 14 15\n31 32 40 42 45 46 56 64 68 69 71 75 77 84 2 4 10\n19 21 27 48 49 57 59 62 63 73 81 85 1 3 7 9 16\n\u21d1 \u03c3+p\n1 3 7 9 16 19 21 27 48 49 57 59 62 63 73 81 85\n5 13 17 18 20 24 26 33 36 38 44 65 66 74 76 79 80\n6 8 11 12 22 30 34 35 37 41 43 50 53 55 61 82 83\n14 15 23 25 28 29 39 47 51 52 54 58 60 67 70 72 78\n2 4 10 31 32 40 42 45 46 56 64 68 69 71 75 77 84\n\u21d3 \u03c3\u00d7r\n3 9 21 27 48 57 63 81 59 62 1 7 16 19 49 73 85\n15 39 51 54 60 72 78 14 23 29 47 25 28 52 58 67 70\n18 24 33 36 66 5 17 20 26 38 44 65 74 80 13 76 79\n42 45 69 75 84 2 32 56 68 71 77 4 10 31 40 46 64\n6 12 30 8 11 35 41 50 53 83 22 34 37 43 55 61 82\nGiven these symmetries, we can easily construct a complete certificate. We place the first and last elements (1 and 85) in the first subset and apply \u03c3\u00d7r to generate all elements in this subset. We apply \u03c3+p to partition the elements {1, . . . , 85}. Finally, we obtain a complete certificate by applying \u03c3+m. We generalised this into a construction method. To find a larger certificate W (k, l, n), we test with a constraint solver for increasing n \u2261 0 (mod l \u2212 1) whether a certificate can be obtained using the following steps:\n\u2022 break solution symmetry by forcing that the first subset of the partition maps onto itself after applying \u03c3\u00d7rt \u2022 choose t \u2208 {1, . . . , k}, q \u2208 {1, . . . , m p }\n\u2022 place elements q and m in the first subset \u2022 apply the symmetries \u03c3\u00d7rt , \u03c3\u00d7r , \u03c3+p, and \u03c3+m, to con-\nstruct a certificate A with n\u2032 elements \u2022 check with a constraint solver if A lacks an arithmetic\nprogression of length l\nUsing this method we significantly improved some of the best known lower bounds3:\n\u2022 W (3, 7) > 48811. The old bound was 43855. \u2022 W (4, 7) > 420217. The old bound was 393469."}, {"heading": "Graceful graphs", "text": "Our second application of internal symmetries is graceful labelling. A graph with e edges is called graceful if its vertices can be labelled with the distinct values {0, . . . , e} in such a way that each edge gets a unique label when it is assigned the absolute difference of the vertices it connects. Graceful labelling has a wide range of applications in areas like radio astronomy, cryptography, communication networks and circuit design. Whilst various classes of graphs are known to be graceful (Gallian 1998), there are others where it is not known but is conjectured that they are graceful. One such\n3See www.st.ewi.tudelft.nl/sat/\u02dcwaerden.php\nclass is the class of double wheel graphs. The graph DWn consists of two cycles of size n and a hub connected all the vertices. The largest double wheel graph that we have seen graceful labelled in the literature4 has size 10.\n0\n9\n33\n16\n37\n1534\n14\n39\n11\n38 1\n3\n7\n12\n18 31 8\n40\n10\n36\nThe problem of finding a graceful labelling can be specified using 2n + 1 variables Xi with domain {0, . . . , e}. This problem has 16n2 solution symmetries (Petrie and Smith 2003): \u2022 Rotation of the vertices (n2 symmetries) \u2022 Inversion of the order of the vertices (4 symmetries) \u2022 Swapping of the inner and outer wheel (2 symmetries) \u2022 Inversion of the labels, Xi := 4n\u2212Xi (2 symmetries)\nTo identify internal symmetries, we generated all graceful labellings for DW4. This is the smallest double wheel graph with a graceful labelling. We observed two internal symmetries within the 44 solutions of DW4:\n\u03c34n: In 31 solutions, the hub had label 4n or 0 (\u03c3inv). \u03c3+2: If 1 \u2264 Xi \u2264 n\u2212 2, then Xi+2 := Xi + 2\nAlthough we observed \u03c3+2, we restrict this internal symmetry to 1 \u2264 Xi \u2264 n\u2212 4 because it proved more effective.\nWhen both symmetries are applied, the computational costs to find a graceful labelling is significantly reduced. Consider DW24. To construct a graceful labelling, we first assign the hub to value 96 (applying \u03c34n). Second, we label the first vertex of the outer wheel with 1 and label the first vertex of the inner wheel with 2. Third, we apply symmetry \u03c3+2 to label n-1 vertices with the labels {1, . . . , n\u2212 1}. Finally, we use a constraint solver to label the remaining vertices. Using this method we found the first known graceful labeling for DW24 (see overleaf).\nThe following table gives the runtime (in seconds) for our constraint solver to find graceful labellings of DWn for the original problem (P ) with and without symmetry breaking (SB) constraints (Petrie and Smith 2003). The last column shows the results when we force internal symmetries within solutions. This also breaks the solution symmetries.\nn P P + SB P + \u03c34n, \u03c3+2 4 0.04 0.03 0.03 8 0.24 0.23 0.21 12 20.42 18.34 0.91 16 554.30 259.75 11.31 20 > 7200 2634.67 117.08 24 > 7200 > 7200 602.09\n4See www.comp.leeds.ac.uk/bms/Graceful/\n96\n1 0\n3\n62\n5\n51\n7\n34\n9\n80\n11 6513 63\n15\n78\n17\n28\n19\n58\n21\n56\n41 54\n2 45\n4\n30\n6\n29\n8\n40\n10\n32\n12 31\n14 26\n16\n23\n18\n67\n20\n24\n22\n82\n88 60"}, {"heading": "Related work", "text": "Several forms of symmetry have been identified and exploited in search. For instance, Brown, Finkelstein and Purdom defined symmetry as a permutation of the variables leaving the set of solutions invariant (Brown, Finkelstein, and Purdom. 1988). This is a subset of the solution symmetries. For the propositional calculus, Krishnamurthy was one of the first to exploit symmetry (Krishnamurthy 1985). He defined symmetry as a permutation of the variables leaving the set of clauses unchanged. Benhamou and Sais extended this to a permutation of the literals preserving the set of clauses (Benhamou and Sais 1992). Perhaps closest to this work is Puget\u2019s symmetry breaking method that considers symmetries which stabilize the current partial set of assignments (Puget 2003). By comparison, we consider only those symmetries which stabilize a complete set of assignments."}, {"heading": "Conclusions", "text": "We have defined the concept of an internal symmetry within a single solution of a constraint satisfaction problem. We compared this with the existing notion of symmetry between different solutions of the same problem. We demonstrated that we can exploit both types of symmetry when solving constraint satisfaction problems. We illustrated the potential of exploiting internal symmetry on two benchmark domains: Van der Waerden numbers and graceful graphs. By identifying internal symmetries, we were able to extend the state of the art in both cases. With Van der Waerden numbers, we improved two lower bounds by around 10%. With graceful graphs, we more than doubled the size of the largest known double wheel graph with a graceful labelling."}, {"heading": "Acknowledgments", "text": "The authors are supported by the Dutch Organization for Scientific Research (NWO) under grant 617.023.611, the Australian Government\u2019s Department of Broadband, Communications and the Digital Economy and the ARC."}], "references": [{"title": "and Sais", "author": ["B. Benhamou"], "venue": "L.", "citeRegEx": "Benhamou and Sais 1992", "shortCiteRegEx": null, "year": 1992}, {"title": "Backtrack searching in the presence of symmetry", "author": ["Finkelstein Brown", "C. Purdom. 1988] Brown", "L. Finkelstein", "P. Purdom"], "venue": "In Proc. of AAECC-6,", "citeRegEx": "Brown et al\\.,? \\Q1988\\E", "shortCiteRegEx": "Brown et al\\.", "year": 1988}, {"title": "Symmetry definitions for constraint satisfaction problems", "author": ["Cohen"], "venue": null, "citeRegEx": "Cohen,? \\Q2006\\E", "shortCiteRegEx": "Cohen", "year": 2006}, {"title": "Symmetry breaking predicates for search problems", "author": ["Crawford"], "venue": "In Proc. of KR", "citeRegEx": "Crawford,? \\Q1996\\E", "shortCiteRegEx": "Crawford", "year": 1996}, {"title": "Breaking row and column symmetry in matrix models", "author": ["Flener"], "venue": "In Principles and Practice of Constraint Programming", "citeRegEx": "Flener,? \\Q2002\\E", "shortCiteRegEx": "Flener", "year": 2002}, {"title": "Global Constraints for Lexicographic Orderings", "author": ["Frisch"], "venue": "In Principles and Practice of Constraint Programming", "citeRegEx": "Frisch,? \\Q2002\\E", "shortCiteRegEx": "Frisch", "year": 2002}, {"title": "1998", "author": ["Gallian", "J. A"], "venue": "A dynamic survey of graph labelling. The Electronic Journal of Combinatorics 5: DS6. Updated in", "citeRegEx": "Gallian 1998", "shortCiteRegEx": null, "year": 2009}, {"title": "and Walsh", "author": ["I. Gent"], "venue": "T.", "citeRegEx": "Gent and Walsh 1999", "shortCiteRegEx": null, "year": 1999}, {"title": "M", "author": ["Herwig, P.", "Heule"], "venue": "J.; van Lambalgen, M.; and van Maaren, H.", "citeRegEx": "Herwig et al. 2007", "shortCiteRegEx": null, "year": 2007}, {"title": "Breaking symmetry of interchangeable variables and values", "author": ["Law"], "venue": "In Principles and Practice of Constraint Programming", "citeRegEx": "Law,? \\Q2007\\E", "shortCiteRegEx": "Law", "year": 2007}, {"title": "B", "author": ["K.E. Petrie", "Smith"], "venue": "M.", "citeRegEx": "Petrie and Smith 2003", "shortCiteRegEx": null, "year": 2003}, {"title": "J", "author": ["Rabung"], "venue": "R.", "citeRegEx": "Rabung 1979", "shortCiteRegEx": null, "year": 1979}, {"title": "General Symmetry Breaking Constraints", "author": ["T. Walsh 2006a] Walsh"], "venue": "In Principles and Practice of Constraint Programming", "citeRegEx": "Walsh,? \\Q2006\\E", "shortCiteRegEx": "Walsh", "year": 2006}, {"title": "Symmetry Breaking using Value Precedence", "author": ["T. Walsh 2006b] Walsh"], "venue": "In Proc. of ECAI-2006,", "citeRegEx": "Walsh,? \\Q2006\\E", "shortCiteRegEx": "Walsh", "year": 2006}, {"title": "Breaking Value Symmetry", "author": ["T. Walsh"], "venue": "In Principles and Practice of Constraint Programming", "citeRegEx": "Walsh,? \\Q2007\\E", "shortCiteRegEx": "Walsh", "year": 2007}], "referenceMentions": [], "year": 2013, "abstractText": "We define the concept of an internal symmetry. This is a symmety within a solution of a constraint satisfaction problem. We compare this to solution symmetry, which is a mapping between different solutions of the same problem. We argue that we may be able to exploit both types of symmetry when finding solutions. We illustrate the potential of exploiting internal symmetries on two benchmark domains: Van der Waerden numbers and graceful graphs. By identifying internal symmetries we are able to extend the state of the art in both cases.", "creator": "LaTeX with hyperref package"}}}