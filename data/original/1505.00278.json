{"id": "1505.00278", "review": {"conference": "arxiv", "VERSION": "v1", "DATE_OF_SUBMISSION": "1-May-2015", "title": "Automatic Observer Script for StarCraft: Brood War Bot Games (technical report)", "abstract": "This short report describes an automated BWAPI-based script developed for live streams of a StarCraft Brood War bot tournament, SSCAIT. The script controls the in-game camera in order to follow the relevant events and improve the viewer experience. We enumerate its novel features and provide a few implementation notes.", "histories": [["v1", "Fri, 1 May 2015 20:41:19 GMT  (14kb)", "http://arxiv.org/abs/1505.00278v1", null]], "reviews": [], "SUBJECTS": "cs.AI", "authors": ["bj\\\"orn persson mattsson", "tom\\'a\\v{s} vajda", "michal \\v{c}ertick\\'y"], "accepted": false, "id": "1505.00278"}, "pdf": {"name": "1505.00278.pdf", "metadata": {"source": "CRF", "title": null, "authors": ["Bj\u00f6rn Persson Mattsson", "Tom\u00e1\u0161 Vajda"], "emails": ["bjorn.pm@plankter.se", "thomas.vajda@gmail.com", "certicky@agents.fel.cvut.cz"], "sections": [{"heading": null, "text": "ar X\niv :1\n50 5.\n00 27\n8v 1\n[ cs\n.A I]\ndeveloped for live streams of a StarCraft Brood War bot tournament, SSCAIT. The script controls the in-game camera in order to follow the relevant events and improve the viewer experience. We enumerate its novel features and provide a few implementation notes."}, {"heading": "1 Introduction", "text": "Since 2010, multiple competitions for StarCraft: Brood War BWAPI1 bots have been founded, including long-term SSCAIT: Student StarCraft AI Tournament2 and Brood War Bots Ladder3 as well as short-term events organized as parts of research conferences AIIDE and CIG. The growing community behind StarCraft AI research and increasing interest of the public has lead the organizers of the long-term tournaments to stream the games publicly. The need to stream the bot games 24 hours a day raises two automation-related challenges:\n1. The games need to be started, ended and evaluated automatically. 2. The in-game camera needs to automatically follow all the interesting events\nto make the stream attractive for the viewers.\nTo solve the first challenge, one can simply use the open-source Tournament Manager Software4 developed at University of Alberta (SSCAIT tournament uses a modification of this tool). For the second challenge, however, this tool has proven to be insufficient. Even though it comes with an auto-observer module capable of moving the in-game camera around, this module has proven to be too simplistic. After numerous complaints by the stream viewers, we decided to implement a new observer module for SSCAIT tournament.\n1 http://github.com/bwapi/bwapi 2 http://sscaitournament.com/ 3 http://bots-stats.krasi0.com/ 4 http://webdocs.cs.ualberta.ca/~cdavid/starcraftaicomp/tm.shtml\n2"}, {"heading": "2 SSCAIT Observer", "text": "The SSCAIT observer is implemented in the C++ framework BWAPI and compiled as a part of the \u201ctournament module\u201d DLL (which provides additional, camera-unrelated functionality). It runs an automated spectating behaviour that is based primarily on game events, priorities and timers. It accomplishes this by setting the game screen position to the in-game location that should be shown. For the remainder of the text, this behaviour will be termed as \u201cmoving the camera\u201d.\nThe camera will always try to focus on game events that are deemed important for the viewers (e.g. units attacking each other, the creation of new units, and so on). If several events happen simultaneously, the camera uses a set of predefined priorities to determine which event to focus on. In order to improve the viewing experience, timers are used to make sure that the camera does not move too often."}, {"heading": "2.1 Time Limits and Priorities", "text": "Two time limits are used by the SSCAIT observer: one defining the minimum time (tmin) that must pass before the camera is allowed to focus on a higher prioritized event, and another defining the time (tmax) that must pass before the camera will focus on any new event (even one with lower priority).\nExample 1. Let us say that tmin = 50 and tmax = 150 (the time values are specified in logical game frames). Here is an example of how this mechanism works:\n\u2013 At time t = 0, event e1 with priority 1 occurs. \u2192 camera focuses on event e1. \u2013 At time t = 40, event e2 with priority 2 occurs. \u2192 since less time than tmin has passed since the last event, the camera remains focused on e1. \u2013 At time t = 60, event e3 with priority 0 occurs. \u2192 since e3 has lower priority than the current focus e1 and less time than tmax has passed, the camera remains focused on e1. \u2013 At time t = 160, event e4 with priority 0 occurs. \u2192 more time than tmax has passed since the last focus change, so the camera focuses on event e4. \u2013 At time t = 220, event e5 with priority 3 occurs. \u2192 e5 has higher priority than the current focus e4 and more time than tmin has passed, so the camera focuses on event e5."}, {"heading": "2.2 Smooth Camera Movement", "text": "When the camera of the SSCAIT observer focuses on an event, it does not simply \u201cteleport\u201d the camera to the focus position. Instead, it always moves the camera smoothly towards the desired location by the simple update rule:\nposn+1 = m \u00b7 (fPos\u2212 posn)\n3 where pos is the current position of the camera, fPos is the desired focus position, and m is a movement factor between 0 and 1. A movement factor of m = 0.1 would mean that the camera moves 10% of the distance between the current camera position and the focus position. The SSCAIT observer currently uses m = 0.1 and updates the camera position on every game frame.\nAnother feature of the SSCAIT observer is that the camera not only can focus on a position. It can also focus on a unit. This functionality means that the camera can follow units (e.g. an army or a scouting worker) around the map instead of remaining still at a position that the relevant unit might have moved away from."}, {"heading": "2.3 Events", "text": "The types of game events that the camera focuses on and the priorities currently associated with each of them are:\n\u2013 A unit is under attack. Priority: 3 \u2013 A unit is performing an attack. Priority: 3 \u2013 A worker is scouting.\n- If scout worker is close to a potential enemy base, priority: 2 - Otherwise, priority: 0\nNote: A worker is only counted as a scout if it is not in its own main base and if the frame count is less than 7500 (approximately 8 minutes in terms of in-game time). \u2013 A drop is performed. Priority: 2 Note: Here, a drop is counted as a non-empty transport unit that is close to a potential enemy base. \u2013 A group of army units are positioned closely together. Priority: 1 Note: A definition of \u201carmy unit\u201d can be found below. \u2013 A unit is created. Priority: 1\nSome of these events are detected by looping over all accessible units and checking if the condition is fulfilled, while others are purely event-based, in the sense that the game notifies the observer module as the event happens."}, {"heading": "2.4 Groups of Army Units", "text": "In order to detect armies in a good way, a definition of \u201carmy unit\u201d needed to be formed. Since a group of workers gathering resources should not be classified as an \u201carmy\u201d, the observer excludes workers when searching for army units. Other unit types that are not counted as army units are structures, larvae, overlords and spider mines.\nThe reason to exclude overlords and spider mines might need an explanation: some of the Zerg bots playing in the SSCAIT tournament tend to clump overlords together in a corner of the map, while some Terran bots use the strategy of creating very dense minefields. Most viewers would probably agree that watching a minefield for large parts of a match is not the most thrilling experience.\n4"}, {"heading": "2.5 Dynamic screen resolution", "text": "When StarCraft was originally released in 1998, it used a constant screen resolution of 640\u00d7480 px. Modern displays have much higher resolutions and different aspect ratios. Consequently, StarCraft is only able to make use of a small part of the screen. Fortunatelly, it is possible to use various \u201cresolution hacks\u201d to force the game to run on higher screen resolutions, displaying a larger part of the map. Even though this is considered cheating by human players, bots are not affected by the field of view in any way and gain no advantage from higher resolutions. At the same time, increasing the screen size makes up for more attractive and modern looking streams. The SSCAIT observer is compatible with resolution hacks and provides a support for any screen resolution (specified in the configuration file). Such compatibility is a simple matter of dynamically determining the screen center and showing the events there."}, {"heading": "3 Conclusion", "text": "Thanks to the custom observer script described in this text, the SSCAIT tournament currently broadcasts a visually attractive live stream of all its bot games at high-definition, widescreen resolution. It selects the most interesting in-game situations, and transitions between them smoothly to improve the viewer experience. The stream can be watched at the tournament\u2019s website5.\nWe are planning to release the script as an open-source software in the near future. In the meantime, it is available on-demand.\n5 http://sscaitournament.com/"}], "references": [], "referenceMentions": [], "year": 2015, "abstractText": "This short report describes an automated BWAPI-based script developed for live streams of a StarCraft Brood War bot tournament, SSCAIT. The script controls the in-game camera in order to follow the relevant events and improve the viewer experience. We enumerate its novel features and provide a few implementation notes.", "creator": "LaTeX with hyperref package"}}}