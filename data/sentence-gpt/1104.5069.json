{"id": "1104.5069", "review": {"conference": "NIPS", "VERSION": "v1", "DATE_OF_SUBMISSION": "27-Apr-2011", "title": "Synthesizing Robust Plans under Incomplete Domain Models", "abstract": "Most current planners assume complete domain models and focus on generating correct plans. Unfortunately, domain modeling is a laborious and error-prone task. While domain experts cannot guarantee completeness, often they are able to circumscribe the incompleteness of the model by providing annotations as to which parts of the domain model may be incomplete. In such cases, the goal should be to generate plans that are robust with respect to any known incompleteness of the domain. In this paper, we first introduce annotations expressing the knowledge of the domain incompleteness, and formalize the notion of plan robustness with respect to an incomplete domain model. We then propose an approach to compiling the problem of finding robust plans to the conformant probabilistic planning problem. We present experimental results with Probabilistic-FF, a state-of-the-art planner, showing the promise of our approach.\n\n\n\nIn the end, we present a method that allows us to model an object that is non-implementationable and satisfies all common functions. We have chosen a form of a model that can be built with no assumptions and can generate a simple plan that has minimal errors that are possible when applied. This model can be built with a fully valid plan that can be built with no assumptions and can not be built with assumptions or errors that are possible when applied. The model must be built with a full valid plan that is non-implementationable and is not a failure, the condition must be not satisfied and there must be no problems, and the condition must be not satisfied.\nWe present a program that can be built with non-implementationable and satisfies all common functions. This model can be built with a fully valid plan that can be built with no assumptions and can not be built with assumptions or errors that are possible when applied. This model can be built with a full valid plan that is non-implementationable and is not a failure, the condition must be not satisfied and there must be no problems, and the condition must be not satisfied and there must be no problems, and the condition must be not satisfied and there must be no problems, and the condition must be not satisfied and there must be no problems, and the condition must be not satisfied and there must be no problems, and the condition must be not satisfied and there must be no problems, and the condition must be not satisfied and there must be no problems, and the condition must be not satisfied and there must be no problems, and the condition must be not satisfied and there", "histories": [["v1", "Wed, 27 Apr 2011 04:05:19 GMT  (356kb)", "http://arxiv.org/abs/1104.5069v1", null]], "reviews": [], "SUBJECTS": "cs.AI", "authors": ["tuan anh nguyen 0001", "subbarao kambhampati", "minh binh do"], "accepted": true, "id": "1104.5069"}, "pdf": {"name": "1104.5069.pdf", "metadata": {"source": "CRF", "title": "Synthesizing Robust Plans under Incomplete Domain Models", "authors": ["Tuan A. Nguyen"], "emails": ["natuan@asu.edu", "rao@asu.edu", "minh.do@parc.com"], "sections": [{"heading": null, "text": "ar X\niv :1\n10 4.\n50 69\nv1 [\ncs .A\nI] 2\n7 A\npr 2\n01 1"}, {"heading": "1. Introduction", "text": "In the past several years, significant strides have been made in scaling up plan synthesis techniques. We now have technology to routinely generate plans with hundreds of actions. All this work, however, makes a crucial assumption\u2013that a complete model of the domain is specified in advance. While there are domains where knowledge-engineering such detailed models is necessary and feasible (e.g., mission planning domains in NASA and factory-floor planning), it is increasingly recognized (c.f. (Hoffmann, Weber, and Kraft 2010; Kambhampati 2007)) that there are also many scenarios where insistence on correct and complete models renders the current planning technology unusable. What we need to handle such cases is a planning technology that can get by with partially specified domain models, and yet generate plans that are \u201crobust\u201d in the sense that they are likely to execute successfully in the real world.\nThis paper addresses the problem of formalizing the notion of plan robustness with respect to an incomplete domain model, and connects the problem of generating a robust plan under such model to conformant probabilistic planning (Kushmerick, Hanks, and Weld 1995; Hyafil and Bacchus 2003; Bryce, Kambhampati, and Smith 2006; Domshlak and Hoffmann 2007). Following Garland &\nLesh (2002), we shall assume that although the domain modelers cannot provide complete models, often they are able to provide annotations on the partial model circumscribing the places where it is incomplete. In our framework, these annotations consist of allowing actions to have possible preconditions and effects (in addition to the standard necessary preconditions and effects).\nAs an example, consider a variation of the Gripper domain, a well-known planning benchmark domain. The robot has one gripper that can be used to pick up balls, which are of two types light and heavy, from one room and move them to another room. The modeler suspects that the gripper may have an internal problem, but this cannot be confirmed until the robot actually executes the plan. If it actually has the problem, the execution of the pick-up action succeeds only with balls that are not heavy, but if it has no problem, it can always pickup all types of balls. The modeler can express this partial knowledge about the domain by annotating the action with a statement representing the possible precondition that balls should be light.\nIncomplete domain models with such possible preconditions/effects implicitly define an exponential set of complete domain models, with the semantics that the real domain model is guaranteed to be one of these. The robustness of a plan can now be formalized in terms of the cumulative probability mass of the complete domain models under which it succeeds. We propose an approach that compiles the problem of finding robust plans into the conformant probabilistic planning problem. We present experimental results showing scenarios where the approach works well, and also discuss aspects of the compilation that cause scalability issues."}, {"heading": "2. Related Work", "text": "Although there has been some work on reducing the \u201cfaults\u201d in plan execution (e.g. the work on k-fault plans for nondeterministic planning (Jensen, Veloso, and Bryant 2004)), it is based in the context of stochastic/non-deterministic actions rather than incompletely specified ones. The semantics of the possible preconditions/effects in our incomplete domain models differ fundamentally from non-deterministic and stochastic effects. Executing different instances of the same pick-up action in the Gripper example above would either all fail or all succeed, since there is no uncertainty but the information is unknown at the time the model is built. In\ncontrast, if the pick-up action\u2019s effects are stochastic, then trying the same picking action multiple times increases the chances of success.\nGarland & Lesh (2002) share the same objective with us on generating robust plans under incomplete domain models. However, their notion of robustness, which is defined in terms of four different types of risks, only has tenuous heuristic connections with the likelihood of successful execution of plans. Robertson & Bryce (2009) focuses on the plan generation in Garland & Lesh model, but their approach still relies on the same unsatisfactory formulation of robustness. The work by Fox et al (2006) also explores robustness of plans, but their focus is on temporal plans under unforeseen execution-time variations rather than on incompletely specified domains. Our work can also be categorized as one particular instance of the general model-lite planning problem, as defined in (Kambhampati 2007), in which the author points out a large class of applications where handling incomplete models is unavoidable due to the difficulty in getting a complete model."}, {"heading": "3. Problem Formulation", "text": "We define an incomplete domain model D\u0303 as D\u0303 = \u3008F,A\u3009, where F = {p1, p2, ..., pn} is a set of propositions,A is a set of actions that might be incompletely specified. We denote T and F as the true and false truth values of propositions. A state s \u2286 F is a set of propositions. In addition to proposition sets that are known as its preconditions Pre(a) \u2286 F , add effects Add(a) \u2286 F and delete effects Del(a) \u2286 F , each action a \u2208 A also contains:\n\u2022 Possible precondition set P\u0303 re(a) \u2286 F contains propositions that action a might need as its preconditions.\n\u2022 Possible add (delete) effect set A\u0303dd(a) \u2286 F (D\u0303el(a) \u2286 F ) contains propositions that the action a might add (delete, respectively) after its execution.\nIn addition, each possible precondition, add and delete effect p of the action a is associated with a weight wprea (p), wadda (p) and w del a (p) (0 < w pre a (p), w add a (p), w del a (p) < 1) representing the domain modeler\u2019s assessment of the likelihood that p will actually be realized as a precondition, add and delete effect of a (respectively) during plan execution. Possible preconditions and effects whose likelihood of realization is not given are assumed to have weights of 12 .\nGiven an incomplete domain model D\u0303, we define its completion set \u3008\u3008D\u0303\u3009\u3009 as the set of complete domain models whose actions have all the necessary preconditions, adds and deletes, and a subset of the possible preconditions, possible adds and possible deletes. Since any subset of P\u0303 re(a), A\u0303dd(a) and D\u0303el(a) can be realized as preconditions and effects of action a, there are exponentially large number of possible complete domain models Di \u2208 \u3008\u3008D\u0303\u3009\u3009 = {D1,D2, ...,D2K}, where K = \u2211 a\u2208A(|P\u0303 re(a)|+\n|A\u0303dd(a)|+ |D\u0303el(a)|). For each complete model Di, we denote the corresponding sets of realized preconditions and effects for each action a as Prei(a), Addi(a) and Deli(a); equivalently, its complete sets of preconditions and effects\nare Pre(a) \u222a Prei(a), Add(a) \u222a Addi(a) and Del(a) \u222a Deli(a).\nThe projection of a sequence of actions \u03c0 from an initial state I according to an incomplete domain model D\u0303 is defined in terms of the projections of \u03c0 from I according to each complete domain model Di \u2208 \u3008\u3008D\u0303\u3009\u3009:\n\u03b3(\u03c0, I, D\u0303) = \u22c3\nDi\u2208\u3008\u3008D\u0303\u3009\u3009\n\u03b3(\u03c0, I,Di) (1)\nwhere the projection over complete models is defined in the usual STRIPS way, with one important difference. The result of applying an action a in a state s where the preconditions of a are not satisfied is taken to be s (rather than as an undefined state).1\nA planning problem with incomplete domain is P\u0303 = \u3008D\u0303, I, G\u3009 where I \u2286 F is the set of propositions that are true in the initial state, and G is the set of goal propositions. An action sequence \u03c0 is considered a valid plan for P\u0303 if \u03c0 solves the problem in at least one completion of \u3008\u3008D\u0303\u3009\u3009. Specifically, \u2203Di\u2208\u3008\u3008D\u0303\u3009\u3009\u03b3(\u03c0, I,Di) |= G.\nModeling Issues in Annotating Incompleteness: From the modeling point of view, the possible precondition and effect sets can be modeled at either the grounded action or action schema level (and thus applicable to all grounded actions sharing the same action schema). From a practical point of view, however, incompleteness annotations at ground level hugely increase the burden on the domain modeler. To offer a flexible way in modeling the domain incompleteness, we allow annotations that are restricted to either specific variables or value assignment to variables of an action schema. In particular:\n\u2022 Restriction on value assignment to variables: Given variables xi with domains Xi, one can indicate that p(xi1 , ..., xik) is a possible precondition/effect of an action schema a(x1, ..., xn) when some variables xj1 , ..., xjl have values cj1 \u2208 Xj1 , ..., cjl \u2208 Xjl ({i1, ..., ik}, {j1, ..., jl} \u2286 {1, ..., n}). Those possible preconditions/effects can be specified with the annotation p(xi1 , ..., xik) : when (xj1 = c1 \u2227 ... \u2227 xjl = cl) for the action schema a(x1, ..., xn). More generally, we allow the domain writer to express a constraint C on the variables xj1 , ..., xjl in the : when construct. The annotation p(xi1 , ..., xik ) : when (C) means that p(ci1 , ..., cik) is a possible precondition/effect of an instantiated action a(c1, ..., cn) (ci \u2208 Xi) if and only if the assignment (xj1 := cj1 , ..., xjl := cjl) satisfies the constraint C. This syntax subsumes both the annotations at the ground level when l = n, and at the schema level if l = 0 (or the : when construct is not specified).\n\u2022 Restriction on variables: Instead of constraints on explicit values of variables, we also allow the possible preconditions/effects p(xi1 , ..., xik) of an action schema\n1We shall see that this change is necessary so that we can talk about increasing the robustness of a plan by adding additional actions.\na(x1, ..., xn) to be dependent on some specific variables xj1 , ..., xjl without any knowledge of their restricted values. This annotation essentially requires less amount of knowledge of the domain incompleteness from the domain writer. Semantically, the possible precondition/effect p(xi1 , ..., xik ) : depends (xj1 , ..., xjl) of an action schema a(x1, ..., xn) means that (1) there is at least one instantiated action a(c1, ..., cn) (ci \u2208 Xi) having p(ci1 , ..., cik) as its precondition, and (2) for any two assignments (x1 := c1, ..., xn := cn), (x1 := c\u20321, ..., xn := c\u2032n) such that cjt = c \u2032 jt\n(1 \u2264 t \u2264 l), either both p(ci1 , ..., cik) and p(c \u2032 i1 , ..., c\u2032ik) are preconditions of the corresponding actions, or they are not. Similar to the : when above, the : depend construct also subsumes the annotations at the ground level when l = n, and at the schema level if l = 0 (or the : depend field is not specified). Another interesting modeling issue is the correlation among the possible preconditions and effects across actions. In particular, the domain writer might want to say that two actions (or action schemas) will have specific possible preconditions and effects in tandem. For example, we might say that the second action will have a particular possible precondition whenever the first one has a particular possible effect. We note that annotations at the lifted level introduce correlations among possible preconditions and effects at the ground level.\nAlthough our notion of plan robustness and approach to generating robust plans (see below) can be adapted to allow such flexible annotations and correlated incompleteness, for ease of exposition we limit our discussion to uncorrelated possible precondition and effect annotations specified at the schema level (i.e. without using the : when and : depend constructs)."}, {"heading": "4. A Robustness Measure for Plans", "text": "Given an incomplete domain planning problem P\u0303 = \u3008D\u0303, I, G\u3009, a valid plan (by our definition above) need only to succeed in at least one completion of D\u0303. Given that \u3008\u3008D\u0303\u3009\u3009 can be exponentially large in terms of possible preconditions and effects, validity is too weak to guarantee on the quality of the plan. What we need is a notion that \u03c0 succeeds in most of the highly likely completions of D\u0303. We do this in terms of a robustness measure.\nThe robustness of a plan \u03c0 for the problem P\u0303 is defined as the cumulative probability mass of the completions of D\u0303 under which \u03c0 succeeds (in achieving the goals). More formally, let Pr(Di) be the probability distribution representing the modeler\u2019s estimate of the probability that a given model in \u3008\u3008D\u0303\u3009\u3009 is the real model of the world (such that\u2211\nDi\u2208\u3008\u3008D\u0303\u3009\u3009 Pr(Di) = 1). The robustness of \u03c0 is defined\nas follows:\nR(\u03c0, P\u0303 : \u3008D\u0303, I, G\u3009) def \u2261\n\u2211\nDi\u2208\u3008\u3008D\u0303\u3009\u3009,\u03b3(\u03c0,I,Di)|=G\nPr(Di) (2)\nIt is easy to see that if R(\u03c0, P\u0303) > 0, then \u03c0 is a valid plan for P\u0303 .\nNote that given the uncorrelated incompleteness assumption, the probability Pr(Di) for a model Di \u2208 \u3008\u3008D\u0303\u3009\u3009 can be computed as the product of the weights wprea (p), w add a (p), and wdela (p) for all a \u2208 A and its possible preconditions/effects p if p is realized in the model (or the product of their \u201ccomplement\u201d 1 \u2212 wprea (p), 1 \u2212 w add a (p), and 1\u2212 wdela (p) if p is not realized).\nExample: Figure 1 shows an example with an incomplete domain model D\u0303 = \u3008F,A\u3009 with F = {p1, p2, p3} and A = {a1, a2} and a solution plan \u03c0 = (a1, a2) for the problem P\u0303 = \u3008D\u0303, I = {p2}, G = {p3}\u3009. The incomplete model is: Pre(a1) = \u2205, P\u0303 re(a1) = {p1}, Add(a1) = {p2, p3}, A\u0303dd(a1) = \u2205, Del(a1) = \u2205, D\u0303el(a1) = \u2205; Pre(a2) = {p2}, P\u0303 re(a2) = \u2205, Add(a2) = \u2205, A\u0303dd(a2) = {p3}, Del(a2) = \u2205, D\u0303el(a2) = {p1}. Given that the total number of possible preconditions and effects is 3, the total number of completions (|\u3008\u3008D\u0303\u3009\u3009|) is 23 = 8, for each of which the plan \u03c0 may succeed or fail to achieve G, as shown in the table. The robustness value of the plan is R(\u03c0) = 34 if Pr(Di) is the uniform distribution. However, if the domain writer thinks that p1 is very likely to be a precondition of a1 and provides wprea1 (p1) = 0.9, the robustness of \u03c0 decreases to R(\u03c0) = 2\u00d7 (0.9\u00d70.5\u00d70.5)+4\u00d7 (0.1\u00d70.5\u00d70.5) = 0.55 (as intutively, the last four models with which \u03c0 succeeds are very unlikely to be the real one). Note that under the STRIPS model where action failure causes plan failure, the plan \u03c0 would considered failing to achieve G in the first two complete models, since a2 is prevented from execution."}, {"heading": "4.1 A Spectrum of Robust Planning Problems", "text": "Given this set up, we can now talk about a spectrum of problems related to planning under incomplete domain models:\nRobustness Assessment (RA): Given a plan \u03c0 for the problem P\u0303 , assess the robustness of \u03c0.\nMaximally Robust Plan Generation (RG\u2217): Given a problem P\u0303 , generate the maximally robust plan \u03c0\u2217.\nGenerating Plan with Desired Level of Robustness (RG\u03c1): Given a problem P\u0303 and a robustness threshold \u03c1 (0 < \u03c1 \u2264 1), generate a plan \u03c0 with robustness greater than or equal to \u03c1.\nCost-sensitive Robust Plan Generation (RG\u2217c): Given a problem P\u0303 and a cost bound c, generate a plan \u03c0 of maximal robustness subject to cost bound c (where the cost of a plan \u03c0 is defined as the cumulative costs of the actions in \u03c0).\nIncremental Robustification (RIc): Given a plan \u03c0 for the problem P\u0303 , improve the robustness of \u03c0, subject to a cost budget c.\nThe problem of assessing robustness of plans, RA, can be tackled by compiling it into a weighted model-counting problem. For plan synthesis problems, we can talk about either generating a maximally robust plan, RG\u2217, or finding a plan with a robustness value above the given threshold, RG\u03c1. A related issue is that of the interaction between plan cost and robustness. Often, increasing robustness involves using additional (or costlier) actions to support the desired goals, and thus comes at the expense of increased plan cost. We can also talk about cost-constrained robust plan generation problem RG\u2217c . Finally, in practice, we are often interested in increasing the robustness of a given plan (either during iterative search, or during mixed-initiative planning). We thus also have the incremental variant RIc.\nIn this paper, we will focus on RG\u03c1, the problem of synthesizing plan with at least a robustness value of \u03c1."}, {"heading": "5. Compilation to Conformant Probabilistic Planning", "text": "In this section, we will show that the problem of generating plan with at least \u03c1 robustness, RG\u03c1, can be compiled into an equivalent conformant probabilistic planning problem. The most robust plan can then be found with a sequence of increasing threshold values."}, {"heading": "5.1 Conformant Probabilistic Planning", "text": "Following the formalism in (Domshlak and Hoffmann 2007), a domain in conformant probabilistic planning (CPP) is a tuple D\u2032 = \u3008F \u2032, A\u2032\u3009, where F \u2032 and A\u2032 are the sets of propositions and probabilistic actions, respectively. A belief state b : 2F \u2032\n\u2192 [0, 1] is a distribution of states s \u2286 F \u2032 (we denote s \u2208 b if b(s) > 0). Each action a\u2032 \u2208 A\u2032 is specified by a set of preconditions Pre(a\u2032) \u2286 F \u2032 and conditional effects E(a\u2032). For each e = (cons(e),O(e)) \u2208 E(a\u2032), cons(e) \u2286 F \u2032 is the condition set and O(e) determines the set of outcomes \u03b5 = (Pr(\u03b5), add(\u03b5), del(\u03b5)) that will add and delete proposition sets add(\u03b5), del(\u03b5) into and from the resulting state with the probability Pr(\u03b5) (0 \u2264 Pr(\u03b5) \u2264 1 , \u2211\n\u03b5\u2208O(e) Pr(\u03b5) = 1). All condition sets of the effects in E(a\u2032) are assumed to be mutually exclusive and exhaustive. The action a\u2032 is applicable in a belief state b if Pre(a\u2032) \u2286 s\nfor all s \u2208 b, and the probability of a state s\u2032 in the resulting belief state is ba\u2032(s\u2032) = \u2211 s\u2287Pre(a\u2032) b(s) \u2211 \u03b5\u2208O\u2032(e) Pr(\u03b5), where e \u2208 E(a\u2032) is the conditional effect such that cons(e) \u2286 s, and O\u2032(e) \u2286 O(e) is the set of outcomes \u03b5 such that s\u2032 = s \u222a add(\u03b5) \\ del(\u03b5).\nGiven the domain D\u2032, a problem P \u2032 is a quadruple P \u2032 = \u3008D\u2032, bI , G\u2032, \u03c1\u2032\u3009, where bI is an initial belief state, G\u2032 is a set of goal propositions and \u03c1\u2032 is the acceptable goal satisfaction probability. A sequence of actions \u03c0\u2032 = (a\u20321, ..., a \u2032 n) is a solution plan for P \u2032 if a\u2032i is applicable in the belief state bi (assuming b1 \u2261 bI ), which results in bi+1 (1 \u2264 i \u2264 n), and it achieves all goal propositions with at least \u03c1\u2032 probability."}, {"heading": "5.2 Compilation", "text": "Given an incomplete domain model D\u0303 = \u3008F,A\u3009 and a planning problem P\u0303 = \u3008D\u0303, I, G\u3009, we now describe a compilation that translates the problem of synthesizing a solution plan \u03c0 for P\u0303 such that R(\u03c0, P\u0303) \u2265 \u03c1 to a CPP problem P \u2032. At a high level, the realization of possible preconditions p \u2208 P\u0303 re(a) and effects q \u2208 A\u0303dd(a), r \u2208 D\u0303el(a) of an action a \u2208 A can be understood as being determined by the truth values of hidden propositions pprea , q add a and rdela that are certain (i.e. unchanged in any world state) but unknown. Specifically, the applicability of the action in a state s \u2286 F depends on possible preconditions p that are realized (i.e. pprea = T), and their truth values in s. Similarly, the values of q and r are affected by a in the resulting state only if they are realized as add and delete effects of the action (i.e., qadda = T, r del a = T). There are totally 2|P\u0303 re(a)|+|A\u0303dd(a)|+|D\u0303el(a)| realizations of the action a, and all of them should be considered simultaneously in checking the applicability of the action and in defining corresponding resulting states.\nWith those observations, we use multiple conditional effects to compile away incomplete knowledge on preconditions and effects of the action a. Each conditional effect corresponds to one realization of the action, and can be fired only if p = T whenever pprea = T, and adding (removing) an effect q (r) into (from) the resulting state depending on the values of qadda (r del a , respectively) in the realization.\nWhile the partial knowledge can be removed, the hidden propositions introduce uncertainty into the initial state, and therefore making it a belief state. Since the action a may be applicable in some but rarely all states of a belief state, certain preconditions Pre(a) should be modeled as conditions of all conditional effects. We are now ready to formally specify the resulting domain D\u2032 and problem P \u2032.\nFor each action a \u2208 A, we introduce new propositions pprea , q add a , r del a and their negations np pre a , nq add a , nr del a for each p \u2208 P\u0303 re(a), q \u2208 A\u0303dd(a) and r \u2208 D\u0303el(a) to determine whether they are realized as preconditions and effects of a in the real domain.2 Let Fnew be the set of those new propositions, then F \u2032 = F \u222a Fnew is the proposition set of D\u2032.\n2These propositions are introduced once, and re-used for all actions sharing the same schema with a.\nEach action a\u2032 \u2208 A\u2032 is made from one action a \u2208 A such that Pre(a\u2032) = \u2205, and E(a\u2032) consists of\n2|P\u0303 re(a)|+|A\u0303dd(a)|+|D\u0303el(a)| conditional effects e. For each conditional effect e:\n\u2022 cons(e) is the union of the following sets:\n\u2013 the certain preconditions Pre(a), \u2013 the set of possible preconditions of a that are realized,\nand hidden propositions representing their realization: Pre(a) \u222a {pprea |p \u2208 Pre(a)} \u222a {np pre a |p \u2208 P\u0303 re(a) \\\nPre(a)}, \u2013 the set of hidden propositions corresponding to the real-\nization of possible add (delete) effects of a: {qadda |q \u2208 Add(a)} \u222a {nqadda |q \u2208 A\u0303dd(a) \\ Add(a)} ({r del a |r \u2208 Del(a)}\u222a{nrdela |r \u2208 D\u0303el(a)\\Del(a)}, respectively);\n\u2022 the single outcome \u03b5 of e is defined as add(\u03b5) = Add(a)\u222a Add(a), del(\u03b5) = Del(a) \u222aDel(a), and Pr(\u03b5) = 1,\nwhere Pre(a) \u2286 P\u0303 re(a), Add(a) \u2286 A\u0303dd(a) and Del(a) \u2286 D\u0303el(a) represent the sets of realized preconditions and effects of the action. In other words, we create a conditional effect for each subset of the union of the possible precondition and effect sets of the action a. Note that the inclusion of new propositions derived fromPre(a), Add(a), Del(a) and their \u201ccomplement\u201d sets P\u0303 re(a)\\Pre(a), A\u0303dd(a)\\Add(a), D\u0303el(a) \\ Del(a) makes all condition sets of the action a\u2032 mutually exclusive. As for other cases (including those in which some precondition in Pre(a) is excluded), the action has no effect on the resulting state, they can be ignored. The condition sets, therefore, are also exhaustive.\nThe initial belief state bI consists of 2|Fnew| states s\u2032 \u2286 F \u2032 such that p \u2208 s\u2032 iff p \u2208 I (\u2200p \u2208 F ), each represents a complete domain model Di \u2208 \u3008\u3008D\u0303\u3009\u3009 and with the probability Pr(Di). The goal is G\u2032 = G, and the acceptable goal satisfaction probability is \u03c1\u2032 = \u03c1.\nTheorem 1. Given a plan \u03c0 = (a1, ..., an) for the problem P\u0303 , and \u03c0\u2032 = (a\u20321, ..., a \u2032 n) where a \u2032 k is the compiled version of ak (1 \u2264 k \u2264 n) in P \u2032. Then R(\u03c0, P\u0303) \u2265 \u03c1 iff \u03c0\u2032 achieves all goals with at least \u03c1 probability in P \u2032.\nProof (sketch). According to the compilation, there is oneto-one mapping between each complete model Di \u2208 \u3008\u3008D\u0303\u3009\u3009 in P\u0303 and a (complete) state s\u2032i0 \u2208 bI in P\n\u2032. Moreover, if Di has a probability of Pr(Di) to be the real model, then s\u2032i0 also has a probability of Pr(Di) in the belief state bI of P \u2032.\nGiven our projection over complete model Di, executing \u03c0 from the state I with respect to Di results in a sequence of complete state (si1, ..., si(n+1)). On the other hand, executing \u03c0\u2032 from {s\u2032i0} in P\n\u2032 results in a sequence of belief states ({s\u2032i1}, ..., {s \u2032 i(n+1)}). With the note that p \u2208 s \u2032 i0 iff p \u2208 I (\u2200p \u2208 F ), by induction it can be shown that p \u2208 s\u2032ij iff p \u2208 sij (\u2200j \u2208 {1, ..., n + 1}, p \u2208 F ). Therefore, si(n+1) |= G iff s\u2032i(n+1) |= G = G\n\u2032. Since all actions a\u2032i are deterministic and s \u2032 i0 has a probability of Pr(Di) in the belief state bI of P \u2032, the probability\npick\u2212up and their nega-\ntions can be interpreted as whether the action requires light balls and makes balls dirty. Newly introduced and relevant propositions are marked in bold.\nthat \u03c0\u2032 achieves G\u2032 is \u2211\ns\u2032 i(n+1)\n|=GPr(Di), which is equal\nto R(\u03c0, P\u0303) as defined in Equation 2. This proves the theorem.\nExample: Consider the action pick-up(?b - ball,?r - room) in the Gripper domain as described above. In addition to the possible precondition (light ?b) on the weight of the ball ?b, we also assume that since the modeler is unsure if the gripper has been cleaned or not, she models it with a possible add effect (dirty ?b) indicating that the action might make the ball dirty. Figure 2 shows both the original and the compiled specification of the action."}, {"heading": "6. Experimental Results", "text": "We tested the compilation with Probabilistic-FF (PFF), a state-of-the-art planner, on a range of domains in the International Planning Competition.We first discuss the results on the variants of the Logistics and Satellite domains, where domain incompleteness is deliberately modeled on the preconditions and effects of actions (respectively). Our purpose here is to observe how generated plans are robustified to satisfy a given robustness threshold, and how the amount of incompleteness in the domains affects the plan generation phase. We then describe the second experimental setting\nin which we randomly introduce incompleteness into IPC domains, and discuss the feasibility of our approach in this setting.3\nDomains with deliberate incompleteness Logistics: In this domain, each of the two cities C1 and C2 has an airport and a downtown area. The transportation between the two distant cities can only be done by two airplanes A1 and A2. In the downtown area of Ci (i \u2208 {1, 2}), there are three heavy containersPi1, ..., Pi3 that can be moved to the airport by a truck Ti. Loading those containers onto the truck in the city Ci, however, requires moving a team of m robots Ri1, ..., Rim (m \u2265 1), initially located in the airport, to the downtown area. The source of incompleteness in this domain comes from the assumption that each pair of robots R1j and R2j (1 \u2264 j \u2264 m) are made by the same manufacturer Mj , both therefore might fail to load a heavy container.4 The actions loading containers onto trucks using robots made by a particular manufacturer (e.g., the action schema load-truck-with-robots-of-M1 using robots of manufacturerM1), therefore, have a possible precondition requiring that containers should not be heavy. To simplify discussion (see below), we assume that robots of different manufacturers may fail to load heavy containers, though independently, with the same probability of 0.7. The goal is to transport all three containers in the city C1 to C2, and vice versa. For this domain, a plan to ship a container to another city involves a step of loading it onto the truck, which can be done by a robot (after moving it from the airport to the downtown). Plans can be made more robust by using additional robots of different manufacturer after moving them into the downtown areas, with the cost of increasing plan length. Satellite: In this domain, there are two satellites S1 and S2 orbiting the planet Earth, on each of which there are m instruments Li1, ..., Lim (i \u2208 {1, 2}, m \u2265 1) used to take images of interested modes at some direction in the space. For each j \u2208 {1, ...,m}, the lenses of instruments Lij\u2019s were made from a type of material Mj , which might have an error affecting the quality of images that they take. If the material Mj actually has error, all instruments Lij\u2019s produce mangled images. The knowledge of this incompleteness is modeled as a possible add effect of the action taking images using instruments made from Mj (for instance, the action schema take-image-with-instruments-M1 using instruments of type M1) with a probability of pj , asserting that images taken might be in a bad condition. A typical plan to take an image using an instrument, e.g. L14 of type M4 on the satellite S1, is first to switch on L14, turning the satellite S1 to a ground direction from which L14 can be calibrated, and then taking image. Plans can be made more robust by using additional instruments, which might be on a different satel-\n3The experiments were conducted using an Intel Core2 Duo 3.16GHz machine with 4Gb of RAM, and the time limit is 15 minutes.\n4The uncorrelated incompleteness assumption applies for possible preconditions of action schemas specified for different manufacturers. It should not be confused here that robots R1j and R2j of the same manufacturer Mj can independently have fault.\nlite, but should be of different type of materials and can also take an image of the interested mode at the same direction.\nTable 1 and 2 shows respectively the results in the Logistics and Satellite domains with \u03c1 \u2208 {0.1, 0.2, ..., 0.9} and m = {1, 2, ..., 5}. The number of complete domain models in the two domains is 2m. For Satellite domain, the probabilities pj\u2019s range from 0.25, 0.3,... to 0.45 when m increases from 1, 2, ... to 5. For each specific value of \u03c1 and m, we report l/t where l is the length of plan and t is the running time (in seconds). Cases in which no plan is found within the time limit are denoted by \u201c\u2013\u201d, and those where it is provable that no plan with the desired robustness exists are denoted by \u201c\u22a5\u201d.\nObservations on fixed value of m: In both domains, for a fixed value of m we observe that the solution plans tend to be longer with higher robustness threshold \u03c1, and the time to synthesize plans is also larger. For instance, in Logistics with m = 5, the plan returned has 48 actions if \u03c1 = 0.3, whereas 66-length plan is needed if \u03c1 increases to 0.4. Since loading containers using the same robot multiple times does not increase the chance of success, more robots of different manufacturers need to move into the downtown area for loading containers, which causes an increase in plan length. In the Satellite domain with m = 3, similarly, the returned plan has 37 actions when \u03c1 = 0.5, but requires 53 actions if \u03c1 = 0.6\u2014more actions need to calibrate an instrument of different material types in order to increase the chance of having a good image of interested mode at the same direction.\nSince the cost of actions is currently ignored in the compilation approach, we also observe that more than the needed number of actions have been used in many solution plans. In\nthe Logistics domain, specifically, it is easy to see that the probability of successfully loading a container onto a truck using robots of k (1 \u2264 k \u2264 m) different manufacturers is (1\u2212 0.7k). As an example, however, robots of all five manufacturers are used in a plan when \u03c1 = 0.4, whereas using those of three manufacturers is enough.\nObservations on fixed value of \u03c1: In both domains, we observe that the maximal robustness value of plans that can be returned increases with higher number of manufacturers (though the higher the value of m is, the higher number of complete models is). For instance, when m = 2 there is not any plan returned with at least \u03c1 = 0.6 in the Logistics domain, and with \u03c1 = 0.4 in the Satellite domain. Intuitively, more robots of different manufacturers offer higher probability of successfully loading a container in the Logistics domain (and similarly for instruments of different materials in the Satellite domain).\nFinally, it may take longer time to synthesize plans with the same length when m is higher\u2014in other words, the increasing amount of incompleteness of the domain makes the plan generation phase harder. As an example, in the Satellite domain, with \u03c1 = 0.6 it takes 216.7 seconds to synthesize a 37-length plan when there are m = 5 possible add effects at the schema level of the domain, whereas the search time is only 94.1 seconds when m = 4. With \u03c1 = 0.7, no plan is found within the time limit when m = 5, although a plan with robustness of 0.7075 exists in the solution space. It is the increase of the branching factors and the time spent on satisfiability test and weighted model-counting used inside the planner that affect the search efficiency.\nDomains with random incompleteness We built a program to generate an incomplete domain model from a deterministic one by introducingM new propositions into each domain (all are initially T). Some of those new propositions were randomly added into the sets of possible preconditions/effects of actions. Some of them were also randomly made certain add/delete effects of actions. With this strategy, each solution plan in an original deterministic domain is also a valid plan, as defined earlier, in the corresponding incomplete domain. Our experiments with the Depots, Driverlog, Satellite and ZenoTravel domains indicate that because the annotations are random, there are often fewer opportunities for the PFF planner to increase the robustness of a plan prefix during the search. This makes it hard to generate plans with a desired level of robustness under given time constraint.\nIn summary, our experiments on the two settings above suggest that the compilation approach based on the PFF planner would be a reasonable method for generating robust plans in domains and problems where there are chances for robustifying existing action sequences in the search space."}, {"heading": "7. Conclusion and Future Work", "text": "In this paper, we motivated the need for synthesizing robust plans under incomplete domain models. We introduced annotations for expressing domain incompleteness, formalized the notion of plan robustness, and showed an approach to compile the problem of generating robust plans into confor-\nmant probabilistic planning. We presented empirical results showing the promise of our approach. For future work, we are developing a planning approach that directly takes the incompleteness annotations into account during the search, and compare it with our current compilation method. We also plan to consider the problem of robustifying a given plan subject to a provided cost bound.\nAcknowledgement: This research is supported in part by ONR grants N00014-09-1-0017 and N00014-07-1-1049, the NSF grant IIS-0905672, and by DARPA and the U.S. Army Research Laboratory under contract W911NF-11-C-0037. The content of the information does not necessarily reflect the position or the policy of the Government, and no official endorsement should be inferred. We thank William Cushing for several helpful discussions."}], "references": [{"title": "Sequential monte carlo in probabilistic planning reachability heuristics", "author": ["Kambhampati Bryce", "D. Smith 2006] Bryce", "S. Kambhampati", "D. Smith"], "venue": "Proceedings of ICAPS06", "citeRegEx": "Bryce et al\\.,? \\Q2006\\E", "shortCiteRegEx": "Bryce et al\\.", "year": 2006}, {"title": "Probabilistic planning via heuristic forward search and weighted model counting", "author": ["Domshlak", "C. Hoffmann 2007] Domshlak", "J. Hoffmann"], "venue": null, "citeRegEx": "Domshlak et al\\.,? \\Q2007\\E", "shortCiteRegEx": "Domshlak et al\\.", "year": 2007}, {"title": "Exploration of the robustness of plans", "author": ["Howey Fox", "M. Long 2006] Fox", "R. Howey", "D. Long"], "venue": null, "citeRegEx": "Fox et al\\.,? \\Q2006\\E", "shortCiteRegEx": "Fox et al\\.", "year": 2006}, {"title": "Plan evaluation with incomplete action descriptions", "author": ["Garland", "A. Lesh 2002] Garland", "N. Lesh"], "venue": null, "citeRegEx": "Garland et al\\.,? \\Q2002\\E", "shortCiteRegEx": "Garland et al\\.", "year": 2002}, {"title": "Conformant probabilistic planning via CSPs", "author": ["Hyafil", "N. Bacchus 2003] Hyafil", "F. Bacchus"], "venue": "In Proceedings of the Thirteenth International Conference on Automated Planning and Scheduling,", "citeRegEx": "Hyafil et al\\.,? \\Q2003\\E", "shortCiteRegEx": "Hyafil et al\\.", "year": 2003}, {"title": "Fault tolerant planning: Toward probabilistic uncertainty models in symbolic non-deterministic planning", "author": ["Veloso Jensen", "R. Bryant 2004] Jensen", "M. Veloso", "R. Bryant"], "venue": "In ICAPS", "citeRegEx": "Jensen et al\\.,? \\Q2004\\E", "shortCiteRegEx": "Jensen et al\\.", "year": 2004}, {"title": "An algorithm for probabilistic planning", "author": ["Hanks Kushmerick", "N. Weld 1995] Kushmerick", "S. Hanks", "D. Weld"], "venue": "Artificial Intelligence", "citeRegEx": "Kushmerick et al\\.,? \\Q1995\\E", "shortCiteRegEx": "Kushmerick et al\\.", "year": 1995}, {"title": "Reachability heuristics for planning in incomplete domains. In ICAPS\u201909 Workshop on Heuristics for Domain Independent Planning", "author": ["Robertson", "J. Bryce 2009] Robertson", "D. Bryce"], "venue": null, "citeRegEx": "Robertson et al\\.,? \\Q2009\\E", "shortCiteRegEx": "Robertson et al\\.", "year": 2009}], "referenceMentions": [], "year": 2011, "abstractText": "Most current planners assume complete domain models and focus on generating correct plans. Unfortunately, domain modeling is a laborious and error-prone task. While domain experts cannot guarantee completeness, often they are able to circumscribe the incompleteness of the model by providing annotations as to which parts of the domain model may be incomplete. In such cases, the goal should be to generate plans that are robust with respect to any known incompleteness of the domain. In this paper, we first introduce annotations expressing the knowledge of the domain incompleteness, and formalize the notion of plan robustness with respect to an incomplete domain model. We then propose an approach to compiling the problem of finding robust plans to the conformant probabilistic planning problem. We present experimental results with Probabilistic-FF, a state-ofthe-art planner, showing the promise of our approach.", "creator": "LaTeX with hyperref package"}}}