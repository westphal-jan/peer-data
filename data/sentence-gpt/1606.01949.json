{"id": "1606.01949", "review": {"conference": "arxiv", "VERSION": "v1", "DATE_OF_SUBMISSION": "6-Jun-2016", "title": "Assisted Energy Management in Smart Microgrids", "abstract": "Demand response provides utilities with a mechanism to share with end users the stochasticity resulting from the use of renewable sources. Pricing is accordingly used to reflect energy availability, to allocate such a limited resource to those loads that value it most. However, the strictly competitive mechanism can result in service interruption in presence of competing demand. To solve this issue we investigate on the use of forward contracts, i.e., service level agreements priced to reflect the expectation of future supply and demand curves. Given the limited resources of microgrids, service interruption is an opposite objective to the one of service availability. We firstly design policy-based brokers and identify then a learning broker based on artificial neural networks. We show the latter being progressively minimizing the reimbursement costs and maximizing the overall profit. For instance, by comparing services with distributed services, the allocation and allocation of their respective services can be reduced, thus avoiding service interruption. We also show the latter being significantly more efficient. We have shown that the allocation of services may not be sufficient to support the increased market demands of microgrids in a timely fashion and the optimal service response. In particular, the allocation and allocation of services may be limited by the allocation of services which may be required to be available as a proportion of the cost of running services on the distributed network.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n", "histories": [["v1", "Mon, 6 Jun 2016 21:36:02 GMT  (832kb,D)", "http://arxiv.org/abs/1606.01949v1", null]], "reviews": [], "SUBJECTS": "cs.AI cs.SY", "authors": ["andrea monacchi", "wilfried elmenreich"], "accepted": false, "id": "1606.01949"}, "pdf": {"name": "1606.01949.pdf", "metadata": {"source": "CRF", "title": "Assisted Energy Management in Smart Microgrids", "authors": ["Andrea Monacchi", "Wilfried Elmenreich"], "emails": [], "sections": [{"heading": "1 Introduction", "text": "Demand response has been advocated as potential solution to compensate the growing instability caused by energy generation from renewable sources and the current shift towards electric mobility. A microgrid is defined as a small power system built from the aggregation of energy sources and small loads, and is able to operate as an independent power island when needed [CN09]. As such, microgrids provide a potential solution to the problem of remote electrification, where the connection to the main power grid is technically or economically unfeasible. Consequently, microgrids might be employed for electrification of rural villages, campuses, smart buildings, such as residential and office spaces, and are typically composed of: i) electrical loads, ii) energy storage elements to accumulate excessive energy and iii) a gateway running the controller that regulates the power flow between the local and the main power grids. Management of energy resources in power grids is normally performed by means of electricity\nLoad1 Loadn\nEnergy price Powerline\nBrokerLoad max_supply, [price1, \u2026 , pricen]\n[amount1, \u2026, amountn]\nLocal Generation\nSmart Meter\nStorage\nPower\nPrice\nget\nfit\nP re\nP grid + P re\nP shift\n1 t\n5 t\n10 t\nAvailable power\nAvailable contracts\nfed into grid\nallocated\nt+1 t+3\n75%\n50%\n25%\nt\nP\n50W\n100W\nused\nused\nused\npricen\nprice2\nprice1 Day of year Hour of day\nPre\nPgrid\nft\nget\npricen\nprice2 price1 Pre\nPgrid\nft\nget\nSunlight int.\npricen\nprice2\nprice1\nPre\nPgrid\nft\n[Pgrid]\npricen\nprice2\nprice1Sunlight int.\nDay of year Hour of day\n[get] get\n[ft]\n[Pre]\nPre\nPgrid\nft\n[get] get\n[ft]\n[Pre]\n[Pgrid]\nFigure 1: A smart microgrid\nmarkets. We can distinguish in i) wholesale electricity markets in which generators compete\n1\nar X\niv :1\n60 6.\n01 94\n9v 1\n[ cs\n.A I]\n6 J\nun 2\n01 6\nto supply their output to retailers and ii) retail electricity markets in which end-use customers can select their supplier from a pool of competing retailers. For final customers this consists in selecting the utility that provides the best provisioning tariff. Energy trading between generators and retailers is a complex problem which can result in high price volatility. This is due to the uncertainty resulting from the involved generation facilities (e.g., fuel costs and weather), as well the difficulty of retailers to effectively predict consumers\u2019 demand for more than a few days in the future. Forward contracts offer a way of protection towards price volatility, which in turn allows generators for better planning investments on generation plants. In addition, the employment of demand response as a congestion pricing scheme can share such uncertainty also with end customers. A price signal can be used to reflect the availability of the shared and scarce resource, to consequently allocate it to the users that value it most. This in turn limits the need for adaptation at generation side, which would otherwise imply over-dimensioning of generation capability, the use of fossil fuels, or costly storage facilities. In a microgrid, such a real-time market can coordinate the operation of loads, thus avoiding blackouts and contributing to flattening the demand (i.e., the peak-to-average ratio). Loads can strategically decide their purchases, as well as curtail their demand and allocate a shorter duration than actually needed. Moreover, the notion of money exchange provides an understandable means to communicate the results of the energy management system as well as easily capture users\u2019 preferences [MEDT13]. However, requirements for microgrids are more stringent than for main power grids. In larger grids, wholesale markets are commonly held for hourly intervals on a day-aheady basis, due to the physical limits for the actuation of generators. While this offers a good solution to plan resources, it becomes a critical issue to timely react in presence of a relevant portion of renewable energy generation. Moreover, the more limited amount of electricity and customers involved in microgrids requires the scheduling of power at a finer time resolution. This is important to avoid underuse of resources. A state of an electrical appliance could demand provisioning over seconds rather than hours. Sizing of the allocation interval reproduces the problems of internal and external fragmentation experienced in dynamic memory allocation [SGG08]. Dividing a shared resource in predefined-size partitions limits the size of the process to be run and thus the degree of multiprogramming. Specifically, while a large allocation interval can be used to suit any load state this would often lead to underuse (i.e., internal fragmentation). On the contrary, small allocation intervals could be used to timely react to system changes, although this would cause operation interruption. In [MZE14] we implemented a market mechanism with a short allocation time of 1 second to highlight this problem. The mechanism reallocates power at each trading cycle, which results in service interruptions with competing demand. To mitigate such issues we investigate on the use of forward contracts in microgrids in this study. We propose the use of a power broker, which is able to formulate prices based on his model of future demand and supply. We consider a scenario with photovoltaic power generation as this was shown in [MEDT13] being the most employed renewable energy source in domestic settings. The broker is able to formulate prices for multiple service-level agreements, each defining a different duration for power provisioning. In this way, the multiple prices reflect differences in terms of generation uncertainty and planned congestion, thus offering different levels of quality of service.\nThe remainder of this paper is structured as follows: a survey of previous work on marketbased energy management opens the discussion in Sect. 2. The brokerage problem is formalized as a cost minimization function in Sect. 3. We introduce service-level agreements to mitigate the uncertainty and service interruptions which motivate this study. An experiment is set up to assess effects on system-wide performance. In particular, Sect. 4 reports the evaluation metrics and the modeled scenario. The effect of provisioning agreements on the selected metrics is discussed in Sect. 5. The following Sect. 6 reports an extensive evaluation of candidate broker designs. Finally, Sect. 7 summarizes our contribution and lists open questions to be further investigated in future."}, {"heading": "2 Related work", "text": "The use of market-based approaches for the decentralized control of Distributed Energy Resources (DER) is not a novel practice. An early work about scheduling household appliances using computational markets was presented by Ygge in [YA96]. A survey of demand response solutions is presented in [PD11], while challenges towards the development of market platforms and intelligent agents for smart grid control are discussed in [RVRJ12, KWK05, LBF10]. So far different mechanisms have been used to trade energy [SHPB12], cooperative games [ARR13], as well as based on cost-minimization and non-cooperative games [KWK05, AW14, CYN14, MRWJ+10] especially double auctions (DA) [VRV+10, IDSKG12, WSH+14]. While energy trading in power grids has been widely used as a way of coordinating energy resources beforehand, a methodology to trade and therefore manage energy in smaller systems, such as microgrids and smart buildings, is yet to be investigated. In particular, there has been little research in designing systems considering users\u2019 behavior and preferences. In [BSG+11], a system is designed to determine preferred time of use of appliances to minimize running costs and activity disruptions. More recent works, such as iDR [CGW+14], DRSim [WBG+13] and the HEMS simulator [MZE14], aim at extracting users\u2019 consumption behavior and preferences in order to minimize the discomfort produced by control strategies. This work differentiates from previous studies, by addressing the stringent requirements and high volatility in power supply and demand typical of microgrids."}, {"heading": "3 Problem statement", "text": "This study concerns the design of a microgrid controller, that is, an agent controlling the energy being exchanged with and throughout the local power system."}, {"heading": "3.1 Modeling electrical loads", "text": "An electrical load is described by a price sensitivity model \u03c8 denoting the maximum price per kWh users are willing to pay to operate the device. Each appliance is a collection of services, each described by an operation model and a usage model [MZE14, EMKE15]. The operation model describes the coordinated execution of the system components in terms of a state sequence, in which a state \u03c3i is defined as a peak power level Pi \u2208 N+ and a duration di \u2208 N+ in seconds. In addition, each state is associated to a start delay sensitivity modeling the maximum tolerated start delay in seconds and an interruption sensitivity \u03c7i defining the severity under which the state operation can be interrupted. The start delay sensitivity models the device start delay sensitivity \u03c7s for the initial state, and the state start delay sensitivity \u03c7s otherwise. Those values respectively affect user\u2019s comfort and the correct device operation. It is also important to remark that appliance services, based on their start delay sensitivity, are classified as flexible or inflexible. Delayed start results in a much higher utility loss for inflexible devices, as resulting from an unconstrained price sensitivity. The usage model defines the time of use proability, namely the probability to start the device at a specific time of the day. Such willingness value \u03c9\u2217 \u2208 [0, 1] is associated to a willingness decay \u03bb \u2208 R, which updates the probability based on concluded device operations. As shown in [MZE14], those values can be either statically defined or directly extracted from a consumption dataset using appropriate tools such as [ME14]. In [MEE+14], a Bayesian network was used to model appliance usage behavior in an Austrian household. Appliances which miss a network interface or are not subject to flexible control are subsumed as inflexible devices and will be charged under the grid price. This offers an incentive for coordination and allows for handling a mixture of smart and nonsmart device. In order to achieve a more efficient energy management, [EMKE15] show how to detect non-smart (legacy) devices and automatically fill a machine-readable profile."}, {"heading": "3.2 Designing a power broker", "text": "Energy brokerage is the problem of formulating a price describing the cost associated to the provisioning of the currently available power. We consider the power grid and the local generators as truth-telling agents, whose reservation price is given by the grid-energy tariff and the feed-in tariff, hereby represented as get and fit. For the broker, the cost p to supply the local grid at a given instant with a required power Ps is thus given by the power drawn from the local generator, Pre, and the power requested from the energy grid, as in Eq. 1.\np(Ps) = { fit if Ps \u2264 Pre Pre\u00b7fit+(Ps\u2212Pre)\u00b7get\nPs if Ps > Pre\n(1)\nwhere Ps = Pre + Pgrid. Fig. 2 shows a scenario with 3000W provided by the power grid,\nunder a 0.05 AC/kWh feed-in tariff and a 0.5 AC/kWh grid energy tariff. The price is computed for different levels of Pre. Clearly, a higher amount of renewable power lowers the portion of grid power being used, with a consequent lower price to supply the local grid. However, as previously discussed the broker is required to also minimize service interruptions by providing multiple provisioning durations or service-level agreements (SLA). Trading different durations as different products can better reflect demand differences for the service agreements. For instance, with a majority of loads with long states this would imply higher costs to purchase long-term service agreements, which would favour the purchase of short-term contracts and the mitigation of fragmentation. The example shows three loads of same type, and consequently same demand (i.e., 50W ), competing for the allocation of power at time t. At time t + 1 the running loads cause a 150W demand, while the remaining power is fed into the grid. As time passes and no new allocations are matched, the service-level agreements are shifted to the left, thus resulting in the situation showed in the second and third example. The broker\u2019s objective is to maximize the profit, indicated as difference between its income and costs (i.e., to buy energy from the grid and the local generator). This includes a profit \u03a0uGrid resulting from power sold throughout the microgrid, as well as \u03a0feedin resulting from power injected back to the main power grid. Similarly, we distinguish in a procurement cost Csupply and a compensation cost Creimbursement. Agreements that can not be satisfied due to insufficient supply are reimbursed.\nLoad1 Loadn Energy price Powerline BrokerLoad max_supply, [price1, \u2026 , pricen] [amount1, \u2026, amountn] Local Generation Smart Meter Storage Power Price get fit P re P grid + P re P shift 1 t 5 t 10 t Available power Available contracts\npricen price2 price1 Day of year Hour of day Pre Pgrid ft get pricen price2 price1 Pre Pgrid ft get Sunlight int.\npricen price2 price1 Pre Pgrid ft [Pgrid] pricen price2 price1Sunlight int. Day of year Hour of day [get] get [ft] [Pre] Pre Pgrid ft [get] get [ft] [Pre] [Pgrid]\nSpecifically, the broker refunds involved loads with the supply cost for the remaining portion of the SLA. The overall broker profit \u03a0 is thus given as:\n\u03a0 = (\u03a0uGrid + \u03a0feedin)\u2212 (Csupply + Creimbursement) (2)"}, {"heading": "3.3 Efficient Power allocation", "text": "To identify the load that best suits the formulated price vector, i.e., the one that associates highest value to the available power, we can employ market-based mechanisms. One possibility is to consider the formulated price vector as reservation price and use a price-ascending auction to select the load that values the resource most. Price-ascending auctions work on multiple rounds where the price is increased as long as the demand is more than available supply. Bidding over multiple iterations sharing a tentative unit price allows for a progressive reduction of price uncertainty, a property called price discovery. Given that a customer rationally drops out the auction at a certain price, we can estimate its utility to better act in future markets. This consequently results in a lighter cognitive process to decide the quantity to purchase [AC04]. To focus on the broker design, we do not employ any market-based allocation at the current stage. We directly allocate a SLA for those customers willing to pay the price formulated by the broker. This removes the burden, in terms of both communication and time, to run an auction over multiple consecutive rounds. In addition, this eases the design of bidders. Whilst strategic bidding is necessary to achieve user-centric control and effectively meet comfort levels, we focus hereby on system-wide performance achievable through the broker. Each load is thus a reactive agent which is given a price vector and replies with a quantity vector (see Fig. 4). The quantity vector models the demand of the load for those SLAs whose duration suits the one of the operational state. Specifically, the load selects a pool of candidate SLAs among those respecting its utility (i.e., sensitivity price), sorts them by price and selects the best candidate according to a policy. In particular, we employ a best-fit strategy in which the load aims at allocating the shortest SLA which is big enough to contain the state.\nLoad1 Loadn Energy price Powerline\nBrokerLoad max_supply, [price1, \u2026 , pricen]\n[amount1, \u2026, amountn]\nLocal Generation Smart Meter\nStorage\nPower\nPrice\nget\nfit\nP re\nP grid + P re\nP shift\n1 t\n5 t\n10 t\nAvailable power\nAvailable contracts\nfed into grid\nallocated\nt+1 t+3\n75%\n50%\n25%\nt\nP\n50W\n100W\nused\nused\nused\npricen price2 price1 Day of year Hour of day Pre Pgrid ft get\npricen\nprice2 price1 Pre\nPgrid\nft\nget\nSunlight int.\npricen price2 price1 Pre\nPgrid\nft\n[Pgrid]\npricen\nprice2\nprice1Sunlight int.\nDay of year Hour of day\n[get] get\n[ft] [Pre]\nPre\nPgrid\nft\n[get] get\n[ft]\n[Pre]\n[Pgrid]\nFigure 4: The allocation mechanism"}, {"heading": "4 Experiment", "text": ""}, {"heading": "4.1 Evaluation metrics", "text": "In this study we seek to compare the performance of different brokerage schemes. In particular, we have identified the following metrics:\nPeak-to-average ratio The PAR is computed as ratio of the peak power to the average over the considered time window. This factor describes the proportion of power peaks over the overall demand and directly affects the loss of load probability. It is thus desirable to keep this value as low as possible, as a high PAR determines a lower system reliability and consequently inefficiency [LYH+14].\nService availability The availability is the proportion of time in which a system is in a working condition. For clarity we distinguish in two more measures: the Mean Time Between Failures (MTBF) which models the average uptime between consecutive failures, and the Mean Time To Recover (MTTR) describing the average downtime due to a service recovery. The MTBF is directly related to the failure rate (i.e, the frequency of service interruption) as \u03bb = 1\nMT BF . The availability is computed as A = MT BF MT BF +MT T R , while the unavail ility is U = 1\u2212 A = MT T R\nMT BF +MT T R .\nSystem reactivity The reactivity of a system describes its degree of responsiveness, which in the context of energy management can be defined for a load as the probability of having enough power to operate. We can thus distinguish in: i) CBP number of times the load could make an offer to get enough power and ii) CNBP number of times the load could not make an offer to get enough power. These values can be collected for each load once for each trading day. Consequently, we can compute R = CBP\nCBP +CNBP . Clearly, the presence of longer service agreements increases the proportion of CNBP with respect to CBP , thus lowering R.\nEconomic profit (\u03a0) The profit in economical terms is computed as difference between retail revenues and production costs. Profit maximization is the driving force of capitalistic markets. This is directly proportional to a firm\u2019s market power, the ability to raise the price of a good or service over its marginal cost. Clearly, this is high in monopolies and oligopolies, and absent in perfectly competitive markets. In this study, the broker operates in a pure monopoly and determines the price of the commodity to steer the system. Consequently, the economic profit represents a good quality measure of the broker\u2019s performance."}, {"heading": "4.2 Research questions", "text": "As previously introduced, the broker seeks profit maximization by correctly formulating the retail price of multiple provisioning durations. For costs are fixed by the get and fit plans, this translates into the correct reflection of future supply costs and expected demand into the retail price. This directly leads to distinguish in: i) a pessimistic broker that charges SLAs proportionally to their duration (the longer the reservaton, the higher the price), and ii) an optimistic broker that keeps the same price for all SLA durations. These strategies are useful as baseline\nreference. Accordingly, the pessimistic broker matches mostly single-unit SLAs (i.e., the shortest available). This highlights the problems of market competition and service interruption that motivate this study. On the opposite side, the optimistic broker attributes same uncertainty to all SLA durations. Intuitively, such a naive price formulation might lead to economic losses for the broker. Moreover, this can result in the a high number of long-term SLAs, which reduces market competition and consequently affects the reactivity of the allocation mechanism. This study assesses multiple brokerage approaches for microgrids, by addressing the following questions:\n1. Does the use of service-level agreements actually mitigate service interruption? A pool of provisioning durations shall be selected to model service-level agreements for a microgrid. The effect of using SLAs over the rate of service interruption is analyzed and discussed.\n2. How does the system reactivity change given the availability of service-level agreements? Provisioning agreements engage the system by reserving future available supply. The cost of this approach in terms of system reactivity should be further analyzed.\n3. How does a model of supply and demand improve power pricing? As already shortly introduced, a model of the environment could be exploited by the broker to better price available power. In fact, the model can be learned from previous interactions within the microgrid. Possible representations and their effectiveness in terms of market profit should thus be investigated."}, {"heading": "4.3 Setup", "text": "The performance of our approach depend on the consumption scenario involved, that is, the number and type of loads, their usage model, and so on. Our scenario models a small Austrian household with a pool of appliances and a photovoltaic power generator [MEDT13]. The household is connected to a 5 kWp photovoltaic plant. To fully control the simulation and assess different scenarios, we use synthetic power data computed through models from the RAPSim [PKE14]. In detail, the calculation considers latitude, longitude, area and efficiency of the equipment, as well as a cloud coverage model to compute the sunlight intensity. Consumption data are derived from building 2 of [MEE+14] which models the usage behavior of a retired couple with an adult son. In particular we selected the following devices: television, dishwasher, tumble dryer, washing machine, fridge and coffee machine. A low-pass filter was applied to the measurements and edge-detection techniques were employed to identify device starting events (See Fig. 5). Each load operation was ultimately described as a sequence of states (Table 1) accompanied by an external usage timeserie. For simplicity, the fridge was modeled as a periodic device with \u03c9\u2217 = 0.8 and \u03bb = 0.5. All models were then implemented\nin the HEMS simulation package [MZE14], an extension of the FREVO framework for evolutionary design [SFE12]. This allows for a quick implementation of the scenario and the later employment of an artificial neural network for our forecasting purposes."}, {"heading": "5 The value of coordination and provisioning contracts", "text": "To evaluate the optimistic and pessimistic brokers we firstly disable the market-based allocation by setting the price sensitivity of all loads to 0.9 AC/kWh. Selected provisioning durations are: a unitary agreement occupying 1 time instant, and respectively 10, 30, 60, 120, 600 and 1800 seconds. The scenario was simulated according to the power measurements of building 2 in the first week of 2015 (i.e., Jan 1st to 7th). We then varied the amount of Pgrid available to the broker: Plan1: 0 kW, Plan2: 1.5 kW, Plan3: 3 kW in 6 a.m. to 6 p.m. and 1 kW otherwise, Plan4: 3 kW and Plan5: 6 kW. The photovoltaic plant was sized to 3.3 kWp. The production depends on two different weather models (See Fig. 6): i) a clear-sky sunlight intensity based solely on the sun position, and ii) a 15-minute-resolution illuminance timeseries collected from a weather station at the University of Klagenfurt1, Austria. The current Austrian energy pricing system does not implement time-based tariffs to reflect energy shortage, mainly for the absence of digital meters. To model a future scenario, we assumed time-based tariffs similar to the Italian tariffs with get being 0.29 AC/kWh in the interval 6 a.m. to 9 p.m and 0.15 AC/kWh otherwise. The feed-in tariff fit is 0.04 AC/kWh from 6 a.m. to 9 p.m. and 0.02 AC/kWh otherwise. As visible in Fig. 7, lowering Pgrid causes the postponement of loads to off peak periods, but also prevents some loads to run at all. While the former reduces the peak power demand, the latter also decreases the average power demand, thus leading to the PAR reported. The postponement of devices is not directly reflected on the availability A, as this captures only the performance of operating loads. For instance, the fridge and the entertainment system are the only operating loads in the first scenario. Hence, lowering Pgrid has the effect of preventing the operation of certain high-power demanding loads, which results in a lower profit \u03a0uGrid. Moreover, it is remarkable that availability and reliability are two opposite objectives to be\n1http://wetter-cms.aau.at/info.php\noptimized. Specifically, with a low Pgrid the sale of long-term provisioning agreements results in resource monopolization (i.e., R ' 0). The absence of a connection to the main power grid, as in the first scenario, makes the system more sensitive to variations of Pre. The broker reimburses involved loads with the supply cost of the remaining portion of the SLA. The very low values are due to the pricing of the SLA, which in absence of Pgrid is charged under the fit tariff (See Eq. 1). As visible from the overall profit and income values, this issue gets even more accentuated with more realistic weather models (i.e., W1). The weather stochasticity is reflected on the produced power, which causes higher reimbursement and supply costs to fulfill the SLAs. This demands approaches able to dynamically tune the amount of saleable provisioning agreements."}, {"heading": "6 Modeling supply and demand to improve profit", "text": ""}, {"heading": "6.1 Broker modeling and training", "text": "As seen, to effectively seek profit maximization the power broker needs to adapt its behavior to the expected sequence of events going to occurr in the microgrid. For each neuron i, the learning process consists in the optimization of the weights wji associated to the incoming connection from each neuron j, as well as the bias bi. The broker\u2019s input layer includes Pre, fit, Pgrid and get. The output of a neuron i can be computed for a generic step k using the activation function as:\noi(k) = F ( n\u2211\nj=0 wjioj(k \u2212 1) + bi) (3)\nIn this study, F is a simple linear threshold function:\nF (x) =  \u22121.0, ifx \u2264 \u22121.0, x, if \u2212 1.0 < x < 1.0, 1.0, otherwise\n(4)\nThe output layer includes a price for each provisioning duration, namely for the unitary agreement, as well as for the SLAs lasting respectively 10, 30, 60, 120, 600 and 1800 seconds.\nThe first design criteria concerns the representation of contextual information, which in presence of photovoltaics is related to sunlight availability. One possibility to model seasonal patterns is to use i) an input for the hour of the day and ii) one for the day of the year (Fig. 9). This can be modeled using gaussian or sinusoidal functions. In particular, we used a simple\nLoad1 Loadn\nEnergy price Powerline\nBrokerLoad max_supply, [price1, \u2026 , pricen]\n[amount1, \u2026, amountn]\nLocal Generation\nSmart Meter\nStorage\nPower\nPrice\nget\nfit\nP re P grid + P re\nP shift\n1 t\n5 t\n10 t\nAvailable power\nAvailable contracts\nfed into grid\nallocated\nt+1 t+3\n75%\n50%\n25%\nt\nP\n50W\n100W\nused\nused\nused\npricen\nprice2\nprice1 Day of year Hour of day\nPre\nPgrid\nft\nget\npricen\nprice2 price1 Pre\nPgrid\nft\nget\nSunlight int.\npricen\nprice2\nprice1\nPre\nPgrid\nft\n[Pgrid]\npricen\nprice2\nprice1Sunlight int.\nDay of year Hour of day\n[get] get\n[ft]\n[Pre]\nPre\nPgrid\nft\n[get] get\n[ft]\n[Pre]\n[Pgrid]\nFigure 9: Proposed ANN interface\nmodel to reflect the higher availability of light in the central part of the day: sin(\u03c0 \u00b7 t tmax ), with t used to indicate either the hour of the day or the day of the year. A neural network was trained using evolutionary algorithms (See Table 2), for each of the scenario previously used to assess the rule-based brokers. This includes: ideal and real weather conditions, different season and different grid provisioning plan.\nIn particular, the networks were trained on 1 day simulation data (see Fig. 6) at 1 Hz resolution. The evolution is driven by the economic profit, as in Eq. 2. We initially limited the training to 800 generations. However, since we noticed stabilization of the fitness already before 500 generations we shortened the simulation for time issues. Given the predefined fit and get price models, the broker can seek profit maximization by modeling the expectation of future resource availability. We therefore further penalize the reimbursement ost Creimbursement by multiplying it to a reimbursement penalty \u03b4r which we empirically set to 100000. While artificial neural\nTable 2: Parameters of the evolutionary algorithm\nPopulation size 50 Number of generations 500 Elite selection rate [%] 15 Mutation rate [%] 40 Crossover rate [%] 30 Random-creation rate [%] 5 Random-selection rate [%] 10\nnetworks are universal function approximators, their ability to learn a function is in fact greatly affected by their topology. The number of neurons in the hidden layer affects the ability to generalize their experience, leading to overfitting when using fewer neurons and underfitting when using too many. The optimal number of hidden neurons depends on the complexity of the function to be approximated, and, therefore, indirectly on the number of input and output nodes [ZE15]. There exist empirically derived rules-of-thumb for selecting the number of hidden neurons providing a range of possible configurations [Blu92, Swi96, BL97, BG97, CB92]. In this work we selected the number of hidden neurons based on a experiments within the suggested range of 2,3, and 4 neurons, where 2 neurons showed best behavior. Moreover, we applied two different representations: three-layered ANNs and fully connected ANNs. This allows for the assessment of both simple feedforward and more expressive recurrent structures."}, {"heading": "6.2 Brokers for specific scenarios", "text": "In the first experiment, we assess the fitness landscape over different scenarios, namely: i) different grid energy provisioning plans and ii) different season and weather conditions. Fig. 10\n12\nshows the fitness landscape for the proposed model over the winter (Fig. 10a) and summer season (Fig. 10b). Differences in the availability of both renewable and grid-supplied energy determine different fitness for the broker. The experiment continues by evaluating the different\nbrokerage models in each training scenario, using the selected performance measures. This allows for a comparison of the learned brokers against the rule-based brokers. Accordingly, we selected the best candidate network (i.e., in the last generation) for use over respectively 1 day and 1 week time. Moreover, the learned brokers were placed under both ideal and real weather conditions (i.e., as in their simulation enviroment). Fig. 11 show the main performance metrics. For each grid plan the points on the left and on the right to the label represent respectively results for the winter and the summer season. Moreover, the symbols correspond to: i) ideal weather for 1 day (circle), ii) ideal weather for 1 week (star), iii) real weather for 1 day (plus) and iv) real weather for 1 week (triangle). As for the rule-based brokers, higher amount of power resulting from the main grid or renewable sources allows for higher market volume and consequently profit. Accordingly, in Fig. 11a the high PAR for the Plan0 is due to the absence of Pgrid, which makes not possible the operation of certain loads and results in Pmax = 2kW and Pavg = 10W . Similar differences are encountered for the summer weather as opposed to the winter weather, as well as the ideal weather with respect to the actual weather. A further remark is that the brokers correctly learned to minimize the reimbursement costs, as compared to their rule-based counterparts (see Fig. 12d). To observe the different behavior of learned brokers for the different scenarios we report in Table 3 the number of sold provisioning durations, respectively for 1 day and 7 days long simulation. The first part reports the results of the winter weather, whilst the second for the summer. Given the aggressive trading attitude of designed loads (i.e., independent from their price sensitivity), the brokers\u2019 pricing mechanism has more evident effects in the resource constrained settings, as in Plan0 and Plan1. Therein the effects of real weather conditions significantly affect the global power availability, which makes shorter SLAs favorite. Contrarily, in other provisioning plans even with very stochastic weather the power supplied by the main grid is normally enough to back the loads. Effects can therefore be observed on an economical basis, with the broker increasing the price for the resource proportionally to the grid energy tariff. Consequently, the pricing of SLAs depends\nstrictly on the expectation of future demand. By setting the price sensitivity to 0.9 (AC / kWh) we simulated the worst possible congestion scenario, in which depending on the employed usage model all loads desire to operate regardless of the SLA pricing. In fact, users will assign different price sensitivity models to the loads, according to the delivered utility. This has the favourable effect of determining an ordering over the loads, and consequently more favourable conditions for the broker and the resulting SLA prices."}, {"heading": "7 Conclusions and future work", "text": "Power management in microgrids is an important problem because of the limitations and volatility of resources involved. A broker is an agent controlling the energy exchanged with and throughout the local power system. The power broker can be used by both humans and autonomous load controllers to improve operation planning in microgrids. As opposed to centralised scheduling tools, the broker takes care of price formulation and let the loads to autonomously decide whether to operate. Consequently, the communication complexity is limited to broadcasting the price across the microgrid. A power broker is an effective coordinator for the microgrid demand, as: i) it prevents loads from running when not enough power is available, consequently reducing the overall PAR, ii) it prices power based based on the proportion produced from renewable sources Pre, and iii) it prices provisioning durations to optimize service availability (i.e., optimistic broker) or system reactivity (i.e., pessimistic broker). Simulations were performed to assess the performance of rule-based brokers on actual demand previously measured in an Austrian household. We showed the pessimistic and the optimistic brokers respectively yielding service interruption and resource monopolization, as well as economic losses. This demands solutions able to consider the uncertainty of future supply and demand on the price of provisioning agreements. This study showed the possibility of exploiting a model of demand and supply to minimize service interruption and operational costs. In particular,\nthe broker is modeled as an artificial neural network which is progressively evolved based on its gathered economic profit. Results showed the brokers correctly minimizing reimbursement costs. In particular, tests were performed against consecutive days previously unused for the training phase and findings were assessed with respect to the initial rule-based solutions. While we showed clear advantages from this approach, different architectures and interfaces should be assessed in further studies. Moreover, the designer should be released from the burden of designing both the architecture and the sensory input. A possibility is to evolve the neural architecture beside the synaptic weights, as in the neuroevolution of augmenting topologies (NEAT) [SM02]. This would allow for a form of phenotypic plasticity, which would give the broker the possibility to also optimize its topology. Another aspect to be considered is the possibility to increase the number of hidden layers, as in the so called deep learning. While this would complicate the learning process, it might allow the broker for learning more sophisticated abstractions over its sensory input. In conclusion, this study undertook a production-centric vision of the microgrid power management problem. Whilst the selected approach can learn from the encountered demand, further studies should also assess the actual discomfort caused by the resulting control strategies. Essentially, those control strategies depend on both employed market mechanisms and strategic-bidding agents. Therefore, we envisage a full integration of the brokerage tool with the HEMS energy market simulator, so as to integrate the training of both appliance controllers and power brokers."}], "references": [{"title": "Auctioning many divisible goods", "author": ["Lawrence M. Ausubel", "Peter Cramton"], "venue": "Journal of the European Economics Association,", "citeRegEx": "Ausubel and Cramton.,? \\Q2004\\E", "shortCiteRegEx": "Ausubel and Cramton.", "year": 2004}, {"title": "Cooperative energy exchange for the efficient use of energy and resources in remote communities", "author": ["Muddasser Alam", "Sarvapali D. Ramchurn", "Alex Rogers"], "venue": "In Proc. of the 2013 International Conference on Autonomous Agents and Multiagent Systems,", "citeRegEx": "Alam et al\\.,? \\Q2013\\E", "shortCiteRegEx": "Alam et al\\.", "year": 2013}, {"title": "Autonomous appliance scheduling for household energy management", "author": ["C.O. Adika", "Lingfeng Wang"], "venue": "IEEE Transactions on Smart Grid,", "citeRegEx": "Adika and Wang.,? \\Q2014\\E", "shortCiteRegEx": "Adika and Wang.", "year": 2014}, {"title": "Knowledge extraction from artificial neural network models", "author": ["Z. Boger", "H. Guterman"], "venue": "In Systems, Man, and Cybernetics,", "citeRegEx": "Boger and Guterman.,? \\Q1997\\E", "shortCiteRegEx": "Boger and Guterman.", "year": 1997}, {"title": "Data Mining Techniques: For Marketing, Sales, and Customer Support", "author": ["M.J. Berry", "G. Linoff"], "venue": "Database management / Wiley. Wiley,", "citeRegEx": "Berry and Linoff.,? \\Q1997\\E", "shortCiteRegEx": "Berry and Linoff.", "year": 1997}, {"title": "Neural Networks in C++: An Object-Oriented Framework for Building Connectionist Systems", "author": ["A. Blum"], "venue": "Wiley, 1 edition,", "citeRegEx": "Blum.,? \\Q1992\\E", "shortCiteRegEx": "Blum.", "year": 1992}, {"title": "User-sensitive scheduling of home appliances", "author": ["Tanuja Bapat", "Neha Sengupta", "Sunil Kumar Ghai", "Vijay Arya", "Yedendra Babu Shrinivasan", "Deva Seetharam"], "venue": "In Proceedings of the 2Nd ACM SIGCOMM Workshop on Green Networking,", "citeRegEx": "Bapat et al\\.,? \\Q2011\\E", "shortCiteRegEx": "Bapat et al\\.", "year": 2011}, {"title": "Understanding Neural Networks; Computer Explorations", "author": ["M. Caudill", "C. Butler"], "venue": null, "citeRegEx": "Caudill and Butler.,? \\Q1992\\E", "shortCiteRegEx": "Caudill and Butler.", "year": 1992}, {"title": "idr: Consumer and grid friendly demand response system", "author": ["Vikas Chandan", "Tanuja Ganu", "Tri Kurniawan Wijaya", "Marilena Minou", "George Stamoulis", "George Thanos", "Deva P. Seetharam"], "venue": "In Proceedings of the 5th International Conference on Future Energy Systems, e-Energy", "citeRegEx": "Chandan et al\\.,? \\Q2014\\E", "shortCiteRegEx": "Chandan et al\\.", "year": 2014}, {"title": "Nehrir. A review of challenges to real-time power management of microgrids", "author": ["M.H.C.M. Colson"], "venue": "In Power Energy Society General Meeting,", "citeRegEx": "Colson,? \\Q2009\\E", "shortCiteRegEx": "Colson", "year": 2009}, {"title": "A distributed algorithm of appliance scheduling for home energy management system", "author": ["P. Chavali", "Peng Yang", "A. Nehorai"], "venue": "IEEE Transactions on Smart Grid,", "citeRegEx": "Chavali et al\\.,? \\Q2014\\E", "shortCiteRegEx": "Chavali et al\\.", "year": 2014}, {"title": "Integration of legacy appliances into home energy management systems", "author": ["Dominik Egarter", "Andrea Monacchi", "Tamer Khatib", "Wilfried Elmenreich"], "venue": "Journal of Ambient Intelligence and Humanized Computing,", "citeRegEx": "Egarter et al\\.,? \\Q2015\\E", "shortCiteRegEx": "Egarter et al\\.", "year": 2015}, {"title": "An energy market for trading electricity in smart grid neighbourhoods", "author": ["D. Ilic", "P.G. Da Silva", "S. Karnouskos", "M. Griesemer"], "venue": "In Proc. of the 6th IEEE International Conference on Digital Ecosystems Technologies (DEST),", "citeRegEx": "Ilic et al\\.,? \\Q2012\\E", "shortCiteRegEx": "Ilic et al\\.", "year": 2012}, {"title": "Powermatcher: Multiagent control in the electricity infrastructure", "author": ["J.K. Kok", "C.J. Warmer", "I.G. Kamphuis"], "venue": "In Proc. of the Fourth International Joint Conference on Autonomous Agents and Multiagent Systems,", "citeRegEx": "Kok et al\\.,? \\Q2005\\E", "shortCiteRegEx": "Kok et al\\.", "year": 2005}, {"title": "An agent-based market platform for smart grids", "author": ["Steffen Lamparter", "Silvio Becher", "Jan-Gregor Fischer"], "venue": "In Proc. of the 9th International Conference on Autonomous Agents and Multiagent Systems: Industry Track,", "citeRegEx": "Lamparter et al\\.,? \\Q2010\\E", "shortCiteRegEx": "Lamparter et al\\.", "year": 2010}, {"title": "Peak-to-average ratio constrained demand-side management with consumer\u2019s preference in residential smart grid", "author": ["Yi Liu", "Chau Yuen", "Shisheng Huang", "N. Ul Hassan", "Xiumin Wang", "Shengli Xie"], "venue": "IEEE Journal of Selected Topics in Signal Processing,", "citeRegEx": "Liu et al\\.,? \\Q2014\\E", "shortCiteRegEx": "Liu et al\\.", "year": 2014}, {"title": "Home energy market simulator: The appliance usage model manager", "author": ["Andrea Monacchi", "Wilfried Elmenreich"], "venue": "Technical report,", "citeRegEx": "Monacchi and Elmenreich.,? \\Q2014\\E", "shortCiteRegEx": "Monacchi and Elmenreich.", "year": 2014}, {"title": "Strategies for energy conservation in carinthia and friuli-venezia giulia", "author": ["Andrea Monacchi", "Wilfried Elmenreich", "Salvatore D\u2019Alessandro", "Andrea M. Tonello"], "venue": "In Proc. of the 39th Annual Conference of the IEEE Industrial Electronics Society, Vienna, Austria,", "citeRegEx": "Monacchi et al\\.,? \\Q2013\\E", "shortCiteRegEx": "Monacchi et al\\.", "year": 2013}, {"title": "GREEND: an energy consumption dataset of households in Italy and Austria", "author": ["Andrea Monacchi", "Dominik Egarter", "Wilfried Elmenreich", "Salvatore D\u2019Alessandro", "Andrea M. Tonello"], "venue": "In Proc. of IEEE International Conference on Smart Grid Communications", "citeRegEx": "Monacchi et al\\.,? \\Q2014\\E", "shortCiteRegEx": "Monacchi et al\\.", "year": 2014}, {"title": "Autonomous demand-side management based on game-theoretic energy consumption scheduling for the future smart grid", "author": ["A.-H. Mohsenian-Rad", "V.W.S. Wong", "J. Jatskevich", "R. Schober", "A. LeonGarcia"], "venue": "Smart Grid, IEEE Transactions on,", "citeRegEx": "Mohsenian.Rad et al\\.,? \\Q2010\\E", "shortCiteRegEx": "Mohsenian.Rad et al\\.", "year": 2010}, {"title": "Hems: a home energy market simulator", "author": ["Andrea Monacchi", "Sergii Zhevzhyk", "Wilfried Elmenreich"], "venue": "Computer Science - Research and Development,", "citeRegEx": "Monacchi et al\\.,? \\Q2014\\E", "shortCiteRegEx": "Monacchi et al\\.", "year": 2014}, {"title": "Demand side management: Demand response, intelligent energy systems, and smart loads", "author": ["P. Palensky", "D. Dietrich"], "venue": "IEEE Trans. on Ind. Informat.,", "citeRegEx": "Palensky and Dietrich.,? \\Q2011\\E", "shortCiteRegEx": "Palensky and Dietrich.", "year": 2011}, {"title": "The microgrid simulation tool RAPSim: description and case study", "author": ["Manfred P\u00f6chacker", "Tamer Khatib", "Wilfried Elmenreich"], "venue": "In Proc. of the 2014 IEEE Innovative Smart Grid Technologies (ISGT) Conference - Asia,", "citeRegEx": "P\u00f6chacker et al\\.,? \\Q2014\\E", "shortCiteRegEx": "P\u00f6chacker et al\\.", "year": 2014}, {"title": "Putting the \u2019smarts\u2019 into the smart grid: A grand challenge for artificial intelligence", "author": ["Sarvapali D. Ramchurn", "Perukrishnen Vytelingum", "Alex Rogers", "Nicholas R. Jennings"], "venue": "Commun. ACM,", "citeRegEx": "Ramchurn et al\\.,? \\Q2012\\E", "shortCiteRegEx": "Ramchurn et al\\.", "year": 2012}, {"title": "FREVO: A tool for evolving and evaluating self-organizing systems", "author": ["A. Sobe", "I. Fehervari", "W. Elmenreich"], "venue": "In Proc. of the IEEE Sixth International Conference on Self-Adaptive and Self-Organizing Systems Workshops (SASOW),", "citeRegEx": "Sobe et al\\.,? \\Q2012\\E", "shortCiteRegEx": "Sobe et al\\.", "year": 2012}, {"title": "Game-theoretic methods for the smart grid: An overview of microgrid systems, demand-side management, and smart grid communications", "author": ["W. Saad", "Zhu Han", "H.V. Poor", "T. Basar"], "venue": "Signal Processing Magazine,", "citeRegEx": "Saad et al\\.,? \\Q2012\\E", "shortCiteRegEx": "Saad et al\\.", "year": 2012}, {"title": "Evolving neural networks through augmenting topologies", "author": ["Kenneth O. Stanley", "Risto Miikkulainen"], "venue": "Evolutionary Computation,", "citeRegEx": "Stanley and Miikkulainen.,? \\Q2002\\E", "shortCiteRegEx": "Stanley and Miikkulainen.", "year": 2002}, {"title": "Applying Neural Networks: A Practical Guide", "author": ["K. Swingler"], "venue": null, "citeRegEx": "Swingler.,? \\Q1996\\E", "shortCiteRegEx": "Swingler.", "year": 1996}, {"title": "Trading agents for the smart electricity grid", "author": ["Perukrishnen Vytelingum", "Sarvapali D. Ramchurn", "Thomas D. Voice", "Alex Rogers", "Nicholas R. Jennings"], "venue": "In Proc. of the 9th International Conference on Autonomous Agents and Multiagent Systems (AAMAS", "citeRegEx": "Vytelingum et al\\.,? \\Q2010\\E", "shortCiteRegEx": "Vytelingum et al\\.", "year": 2010}, {"title": "Drsim: A cyber physical simulator for demand response systems", "author": ["T.K. Wijaya", "D. Banerjee", "T. Ganu", "D. Chakraborty", "S. Battacharya", "T. Papaioannou", "D.P. Seetharam", "K. Aberer"], "venue": "In Proc. of the IEEE International Conference on Smart Grid Communications (SmartGridComm),", "citeRegEx": "Wijaya et al\\.,? \\Q2013\\E", "shortCiteRegEx": "Wijaya et al\\.", "year": 2013}, {"title": "A game-theoretic approach to energy trading in the smart grid", "author": ["Yunpeng Wang", "W. Saad", "Zhu Han", "H.V. Poor", "T. Basar"], "venue": "IEEE Transactions on Smart Grid,", "citeRegEx": "Wang et al\\.,? \\Q2014\\E", "shortCiteRegEx": "Wang et al\\.", "year": 2014}, {"title": "Power load management as a computational market", "author": ["Fredrik Ygge", "Hans Akkermans"], "venue": "In Second International Conference on Multiagent Systems (ICMAS),", "citeRegEx": "Ygge and Akkermans.,? \\Q1996\\E", "shortCiteRegEx": "Ygge and Akkermans.", "year": 1996}, {"title": "Comparison of metaheuristic algorithms for evolving a neural controller for an autonomous robot", "author": ["S. Zhevzhyk", "W. Elmenreich"], "venue": "Transactions on Machine Learning and Artificial Intelligence,", "citeRegEx": "Zhevzhyk and Elmenreich.,? \\Q2015\\E", "shortCiteRegEx": "Zhevzhyk and Elmenreich.", "year": 2015}], "referenceMentions": [], "year": 2016, "abstractText": "Demand response provides utilities with a mechanism to share with end users the stochasticity resulting from the use of renewable sources. Pricing is accordingly used to reflect energy availability, to allocate such a limited resource to those loads that value it most. However, the strictly competitive mechanism can result in service interruption in presence of competing demand. To solve this issue we investigate on the use of forward contracts, i.e., service-level agreements priced to reflect the expectation of future supply and demand curves. Given the limited resources of microgrids, service interruption is an opposite objective to the one of service availability. We firstly design policy-based brokers and identify then a learning broker based on artificial neural networks. We show the latter being progressively minimizing the reimbursement costs and maximizing the overall profit.", "creator": "LaTeX with hyperref package"}}}