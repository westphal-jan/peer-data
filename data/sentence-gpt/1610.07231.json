{"id": "1610.07231", "review": {"conference": "arxiv", "VERSION": "v1", "DATE_OF_SUBMISSION": "23-Oct-2016", "title": "Template Matching Advances and Applications in Image Analysis", "abstract": "In most computer vision and image analysis problems, it is necessary to define a similarity measure between two or more different objects or images. Template matching is a classic and fundamental method used to score similarities between objects using certain mathematical algorithms. In this paper, we reviewed the basic concept of matching, as well as advances in template matching and applications such as invariant features or novel applications in medical image analysis. Additionally, deformable models and templates originating from classic template matching were discussed. These models have broad applications in image registration, and they are a fundamental aspect of novel machine vision or deep learning algorithms, such as convolutional neural networks (CNN), which perform shift and scale invariant functions followed by classification. In general, although template matching methods have restrictions which limit their application, they are recommended for use with other object recognition methods as pre- or post-processing steps. Combining a template matching technique such as normalized cross-correlation or dice coefficient with a robust decision-making algorithm yields a significant improvement in the accuracy rate for object detection and recognition.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n", "histories": [["v1", "Sun, 23 Oct 2016 20:48:17 GMT  (575kb,D)", "http://arxiv.org/abs/1610.07231v1", null]], "reviews": [], "SUBJECTS": "cs.CV cs.AI", "authors": ["nazanin sadat hashemi", "roya babaie aghdam", "atieh sadat bayat ghiasi", "parastoo fatemi"], "accepted": false, "id": "1610.07231"}, "pdf": {"name": "1610.07231.pdf", "metadata": {"source": "CRF", "title": "Template Matching Advances and Applications in Image Analysis", "authors": ["Nazanin Sadat Hashemi", "Roya Babaei Aghdam", "Atieh Sadat Bayat Ghiasi", "Parastoo Fatemi"], "emails": ["nazaninhshmi@yahoo.com"], "sections": [{"heading": null, "text": "I. INTRODUCTION\nIn the majority of object detection problems in computer vision and image processing, it is often necessary to determine a measure of the similarities between different scenes that have been presented to the system. The detection and recognition of objects in images is a key research topic in the computer vision community [4]. A very common approach to detecting objects and finding the similarity measurement is template matching. Template matching tries to answer one of the most basic questions about an image: if there is a certain object in a given image, and where it is found [12]. The template is a description of that object (and hence is an image itself), and it is used to search the image by computing a difference measure between the template and all possible portions of the image that could match the template. If any of these steps produces a small difference, then it is viewed as a possible occurrence of the object. Template matching is a high-level machine vision technique that allows for the identification of those parts of an image that match the given image pattern. Some of its wide-spread applications, including matching object to location and edge detection of images, may be employed to plot a route for mobile robots and in image registration techniques, which also have applications in medical imaging. In other words, image\n1 Islamic Azad University, North Tehran Branch, Faculty of Engineering, Department of Information Technology\n\u2217 Corresponding Author: Nazanin Sadat Hashemi nazaninhshmi@yahoo.com\nKeywords: Template Matching, Image Processing, Image Analysis\nmatching is a fundamental aspect of many issues in computer vision, including object or scene recognition, solving for 3D structure from multiple images, stereo correspondence, and motion tracking. The distinction between different matching primitives is probably the most prominent difference between the various matching algorithms. Template matching is a technique for finding areas of an image that match (or are similar) to a template image which requires two images. Source image (I): The image in which we expect to find a match to the template image. Template image (T): The patch image which will be compared to the template image. The ultimate goal is to detect the best technique for the highest matching area [1] [15] [10]."}, {"heading": "II. METHODS AND MATHEMATICS", "text": "Measures of match and template matching in two or three dimensional images require a measure of match between two images that indicates the degree of similarity or dissimilarity between them [4]. Matching algorithm selection depends on target and template images. On particular method categorizes template or image matching approaches into template- or area-based approaches and feature-based approaches."}, {"heading": "A. Featured-based Approach", "text": "A featured-based approach is appropriate when both reference and template images contain more correspondence with respect to features and control points. In this case, features include points, curves, or a surface model to perform template matching. In this category, the final goal is to locate the pair-wise connections between the target or so-called reference and the template image using spatial relations or features. In this approach, spatial relations, invariant descriptors, pyramids, wavelets and relaxation methods play an important role in extracting matching measures."}, {"heading": "B. Area-based Approach", "text": "Area-based methods, which are usually known as correlation methods or template matching, were developed for the first time by Fonseca et al. [6] and are based on a combined algorithm of feature detection and feature matching. This method functions very well when the templates have no strong features with an image, since they operate directly on the pixel values. Matches are measured using the intensity values of both image and template. The matching scores are extracted by calculating squared differences in fixed intensities, correction-based methods, optimization methods and mutual information [10]. In some template matching problems, direct matching between template and target images is impossible. Therefore, the eigenvalue and eigenspace\nar X\niv :1\n61 0.\n07 23\n1v 1\n[ cs\n.C V\n] 2\n3 O\nct 2\n01 6\nof given images are utilized in template matching. These values provide the details needed to match images under various conditions, such as illumination, colour contrast or adequate matching poses. For instance, a specimen in a given image is searched; the eigenspace may consist of templates of the specimen in different positions to a camera using various lighting conditions or expressions. It is possible for the matching image to be occluded by an object or problems involved in motion and become ambiguous. One of the possible solutions for this is to split the template into multiple sub-images and perform matching on these sub-images."}, {"heading": "C. Na\u0131\u0308ve Template Matching", "text": "Nave template matching is one of the basic methods of extracting a given which is identical to the template from the image target. In this approach, with or without scaling (usually without scaling), the target image is scanned by the template, and the similarity measures are calculated. Finally, the positions with the strongest similarities are identified as potential pattern positions. Figure 1 illustrates the famous image of Lena. As shown, the sub-images are considered as templates, and the nave matching method is performed in order to extract the templates and patterns from the target images. Because sub-images are originally from the target image without any scaling or manipulation, this straightforward matching algorithm works efficiently. One of the error metrics which is used to calculate the differences between target and template images is the sum of squared differences 1.\nSSD = \u2211 x,y [f(x, y)\u2212 t(x\u2212 u, y \u2212 v)]2 (1)\nIn intensity difference measures, root mean square distance\n(RMS), sum of the absolute values differences (SAVD), variance of the difference (VOD), variance of the square differences (VOSD) and variance of the absolute valued differences (VOAD) can also be measured depending upon the images intensity distribution.\nD. Image Correlation Matching\nIn this classic template matching method, the similarity metric between the target and the template is measured. Unlike the nave template matching algorithm, the target\nand the template might have different image intensities or noise levels. However, those images must be aligned. The similarity metric used in this approach is based on the correlation between the target and the template.\n1) Cross-Correlation: In image processing, crosscorrelation is a measure of the similarity of two images where the images are of different sizes. By sliding the first image (template) over the second image (target), the correlation between the two images is measured. The crosscorrelation method is similar in nature to the convolution of two functions. Additionally, cross-correlation of a given signal or image with itself is called auto-correlation [12].\n2) Normalized Cross-Correlation: Normalized crosscorrelation is an updated version of the cross-correlation approach that has been improved for the following two reasons:\n1) The results of normalized cross-correlation are invariant to the global brightness changes, and theoretically, the image intensity variations have less effect on this metric compared to the classic method. 2) The correlation value obtained for a given sliding window is normalized to [\u22121,+1] interval. Therefore, the normalized cross-correlation values for two similar images trend to +1, and those values for two completely different images trend to \u22121.\nNormalized cross-correlation (NCC) is widely used as an operational resemblance measure for template matching problems. NCC is invariant to linear brightness and contrast variations, and its straightforward implementation has expanded its usage for real-time applications. However, this method is still sensitive to rotation and scale changes, which cause some limitations for deformable templates [4] [12] [10].\nNCC = \u2211 x,y[f(x, y)\u2212 fu,v][t(x\u2212 u, y \u2212 v)\u2212 t]\u2211\nx,y[f(x, y)\u2212 fu,v]2 \u2211 x,y[(x\u2212 u, y \u2212 v)\u2212 t 2 ]0.5\n(2) Equation 2 shows the normalized cross-correlation, where () is the original image; f is the mean of image intensity in the region under the template; is the template; and t represents the mean of image intensity in the template. Here () () represent pixel coordinates [14] [13].\n3) Matching Filters: Extensive search template matching methods can be explained as a matching filter of sorts, where template f(x, y) must be detected in a given area of s(x, y). This filter is developed to produce a maximal response where a region of the search area matches the template.\nz(x, y) = s(x, y) \u2217 h(x, y) (3)"}, {"heading": "E. Sequential Similarity Detection Algorithms", "text": "Sequential similarity detection algorithms (SSDAs) are a more efficient alternative to correlation-based methods, including matched filters for translational registration. The measure of match is indirectly calculated based on an error for corresponding pixels in f and g in the images under comparison at any stage of the registration process [4]."}, {"heading": "F. Distortion Measures", "text": "These measures are similar to distortion measures used to evaluate the performance of image compression or image reconstruction techniques. They are also similar to fractal image compression or vector quantisation (VQ), as image matching is used to specify the fractal mappings and to select the VQ codebook. A function space model to derive a reconstruction filter is optimal where the original and reconstructed images are as similar as possible with respect to a particular similarity measure [11]."}, {"heading": "G. Dice Coefficient", "text": "Dice Coefficient (DC) has been commonly used in fMRI studies to evaluate the similarity of two spatial maps. Volume-overlap is a simple measure to assess how many of the supra threshold voxels from two t maps occur in the same location [14] [7]. Depending on the normalization factor, there are different variants of the overlap metric; the most common is the Dice Coefficient shown below.\nDC = 2\u00d7 |A \u2229B| |A|+ |B|\n(4)"}, {"heading": "H. Efficient Template Matching Methods", "text": "The algorithm complexity of each template matching algorithm should be calculated. This calculation explains the efficiency of the method in terms of time. Table I demonstrates the computational complexity of the measures of match for certain algorithms. The complexity provided below is defined in terms of the number of operations during calculation of match metric (i.e. cross-correlation) between two images with r rows and c columns. In order to compare the methods, we assumed the template f and image g are digital (digitized) rc images. The given image g is extracted from each position in a search area called s, which has R rows and C columns. The template matching is performed by means of an exhaustive search and translation of the template to each (R \u2212 r + 1)(C \u2212 c + 1) position in the image. Next, a measure of match between the template and the sample at the position of overlap is calculated. The number of operations required for a given template matching method was calculated by multiplying the numbers of operations required by the size of the search area. However, it is possible to increase efficiency because the template does not change during template matching. It is also possible to use redundancy in the calculation of terms for adjacent measures of match to improve efficiency [4].\nAdditionally, certain researchers have used template matching algorithms in frequency domain by mapping the template and target images to the frequency space using Fast Fourier Transform (FFT) [14] [13]. They revealed that crosscorrelation methods are more efficient than other techniques in frequency domain. However, the application of template matching in frequency domain is limited, as it does not often have any advantage over spatial domain.\nI. Invariant Features\nIn practice, one of the challenges of using any template matching techniques is to choose a measure of match that is invariant to image intensity and scale. To overcome this challenge, some scientists have experimented with different scales of a template as well as some rotated version of a template. However, it can only solve the scalability issue of template matching. The image intensity variations remain. Using local or global image intensity normalization, intensity variations in certain problems can be solved. However, this technique is not expandable to most template matching problems.\n1) Mean Intensity Level Invariance: For mean intensity level invariant template matching, a measure of match was developed that is based on the variance of the pixel-bypixel differences between the template and the sub-image of the target image. Equation 5 describes the mean intensity invariant measure of match.\nMvod = 1\n1 + \u03c32 (5)\n\u03c32 =\n\u2211 A[(fij \u2212 gij)\u2212 \u00b5d]\nn\u2212 1 (6)\n\u00b5d =\n\u2211 A(fij \u2212 gij)\nn (7)\nWhere \u03c32 is the variance of the differences (VOD) between the template and target images. Additionally, \u00b5d is the mean of the differences between the template and target images. Moreover, f and g are two-dimensional signals (images) [3].\n2) Scale Invariance: One of the major challenges in the generalization of template matching techniques is to provide a scale invariant operator in order to extract the template from the target image. Based on an assumption that target objects in the image are far apart from each other and the background is uniform, the Fourier Mellin (FM) transform can be utilized as a scale invariant representation or operator of the template and the sub-images at each position in the target image before calculating the measure of match [3]. The Fourier Mellin transform includes four steps, which are as follows:\n1) The Discrete Fourier Transform (DFT) of the image is calculated. The circular shift property of the DFT is a centre translation invariant representation of the original image. However, this implies that the translation limits are the borders of the images. 2) The magnitude image reconstructed from the DFT operation is normalised by its value at the origin in order to remove the multiplicative effect of scale changes in the original image. 3) The axes of the positive quadrant of the normalised image are warped onto a logarithmic scale. This converts scaling in the original image to translation. The continuous two-dimensional signal is considered as f(x, y). Let F\u0303 (u, v) be F (u, v) with logarithmically scaled axes.\nTABLE I COMPARISON OF TEMPLATE MATCHING ALGORITHMS FOR COMPUTATIONAL COMPLEXITY BASED ON MEASURE OF MATCH.\nMeasure of Match OperationsMultiplication Division Addition Subtraction Other Normalized Cross-Correlation 3rc+1 1 3(rc-1) 0 1 sqrt Cross Covariance 3rc+8 1 5rc-3 1 1 sqrt Root Mean Square rc+1 0 rc-1 rc 1 sqrt Sum Absolute Valued Diffs 0 0 rc-1 rc rc abs Variance of the Differences rc+2 1 2(rc-1) rc+1 0 Stochastic Sign Change r(c-1) 1 (r-1)(c-2) rc r(c-1) sgn Deterministic Sign Change r(c-1) 1 rc+(r-1)(c-2) rc r(c-1) sgn\nf(ax, bv)\u2190\u2192 1 |ab| F ( u a , v b ) (8)\nF\u0303u,v = F (lnu, lnv) (9)\n\u02dcFnorm(u, v) = Fnorm(lnu a , ln v b ) (10)\nFnorm(lnu\u2212 lna, lnv \u2212 lnb) (11)\nThe first equation shows the scaled Fourier transform of the 2D signal. In the second equation, the logarithmic representation of the signal is introduced. By combining the first and second equations, the third equation is obtained. The fourth equation clearly demonstrates a translation version of Fnorm(lnu, lnv). 4) The DFT magnitude of the logarithmically scaled image is calculated, providing a scale in-variant representation of the original image. The scale variations tolerated by the FM transform are limited by the resolution of the image and the size of the image window.\n3) Rotation Invariance: A rotation and scale invariant representation of the template and the sub-image can be generated by simply preceding the procedure described in the previous section with a polar coordinate transform. The origin is at the centre of the template or sub-image, and this converts rotation to a circular shift. The r axis in the polar coordinate system is then warped onto a logarithmic scale, and scaling becomes translation. The DFT magnitude is then calculated for a rotation and scale invariant representation of the image [2] [16]. Wechsler and Zimmerman [4] [3] describe a similar approach in terms of conformal complex log mapping. The image is mapped onto a complex plane, where each pixel is represented mathematically, as shown in Equation 12. The complex log mapping that transforms an image from rectangular to polar exponential coordinates is provided in Equation 13. Rotation and scaling become translation in the transform domain.\nz = x+ jy (12)\nw = ln(z) = ln(|z|) + j\u03b8z (13)"}, {"heading": "III. APPLICATIONS", "text": "Template matching algorithms contribute in various applications, from security-based to biomedical-based projects. Although the application of this technique is restricted because of some limitations in shift and scale invariant feature matching, template matching remains a powerful tool for extracting patterns in the pre- and post-processing steps of image analysis. Fast template matching and some deformable-based matching algorithms provide quick solutions for object recognition, while algorithm complexity is not very high [1]."}, {"heading": "A. Deformable Template Models", "text": "In computer vision, model-based shape matching is of interest to many scientists. The first research in this area basically focused on rigid shape matching, where the matched shapes were obtained by applying simple transformations such as translation, rotation, scaling, and affine transformation to the model template, which can be recovered using correlation-based matching or the Hough transform. The concept of deformable templates was simultaneously introduced in computer vision by Widrow [17] with rubber masks, and by Fischler and Elschlager [5] with spring-loaded templates. Deformable template matching is a more powerful technique because of its ability to address shape deformations and variations, as shown in Figure 2. Over the past decade, a high volume of research has been conducted on deformable template matching. These activities are divided into two groups. The freeform models represent any arbitrary shape as long as some general regularization constraint (continuity, smoothness, etc.) is satisfied. These restraints are called active contours. On the other hand, parametric deformable models are capable of encoding a specific characteristic shape and its variations. The shape can be characterized by a parametric formula or by using a prototype and deformation modes. An overview of various template matching techniques is provided in Figure 3 [8]."}, {"heading": "B. Face Detection", "text": "Face detection is a technique that is used to find an arbitrary sub-image representing the human face of a given and global image. This field of computer vision and image processing is broadly used in security applications, video\nsurveillance, tracking, etc., and it may represent all or only a part of such systems. The traditional method of extracting a given face from a global image is to apply a matching algorithm to the target image. One of the most important factors in face detection is a set of human facial features, which plays a crucial role in the process. Over the past decade, a high volume of research has been performed in the field of face detection, which resulted in the determination that the eyes, mouth and nose are the most important features in both face detection and recognition. Additionally, human faces have a variety of emotions, which are exemplified by many different expressions, and this system can detect the corner of the features in the case of neutral, sad, happy and surprised emotions. Template matching methods are also applied in facial feature extraction methods, which are sensitive to various non-idealities, such as variations in illumination, noise, orientation, time consumption and color space used. Additionally, strong feature extraction will increase the performance of a face recognition system, as shown in Figure 4 [12]."}, {"heading": "C. Eye Detection", "text": "Eye detection is a prerequisite for many applications, such as humancomputer interfaces, iris recognition, driver drowsiness detection, security, and biology systems. In this paper, template-based eye detection is described. The tem-\nplate is correlated with different regions of the facial image. The region of face which provides the maximum correlation with the template is the eye region. The method is simple and easy to implement. The effectiveness of the method is demonstrated in both open eyes as well as closed eyes through various simulation results, as shown in Figure 5 [12]."}, {"heading": "D. License Plate Recognition", "text": "An automatic license plate detection and recognition system is a special form of optical character recognition and has been an active research domain in the image processing field. In a practical sense, template matching is one of the algorithms that can be used to detect licence plates and extract digits or letters from the detected plate. Although the limitations of template matching have been discussed above, the limited styles of licence plates, digits and letters in a given region create the opportunity to use template matching in this popular computer vision problem. The license plate\nrecognition system is a complex image processing application that recognizes the characters on an auto license plate based on the given conditions and situation. The license plate recognition system is installed in many places with multiple purposes, and even law enforcement is using this application to detect speeding vehicles and conduct monitoring and surveillance from a distance. Jalil et al. developed a pipeline to detect and extract Malaysian (Figure 6) licence plates (Figure 7) [23]. In the template matching step of the pipeline\nshown in Figure 7, the size of each character image is normalized according to the template stored in the database. Each character is compared to its corresponding pixel in the template, and the highest coefficient result is identified as the character of the input. This method has demonstrated a high accuracy rate, but it requires an efficient searching method and requires large storage capabilities to save all of the number and character templates. Template matching is\nan effective algorithm for recognition of characters used in this pipeline. The character image is compared with those in the database, and the highest correlation value is selected. Correlation is an effective technique for image recognition. This method measure the degree of similarly corresponding pixel values of two images: the template image and the\ninput image. An image with the highest correlation value equates to a strong relationship between the input image and the template image, which will in turn produce the best match. Jalil et al. showed that by using 100 license plates containing 693 characters for validation of the pipeline, an overall accuracy rate of 92.78 percent for all characters was achieved."}, {"heading": "E. Automatic Bare PCB Board Testing", "text": "Another traditional application of template matching is in the detection of loose connections in electrical boards. A bare printed circuit board is a PCB without any placement of electronic components, and it is utilized with other components to produce electric instruments at the circuit level. In order to reduce spending in manufacturing caused by a defective bare PCB, the bare PCB must be inspected. Kanimozhi et al. demonstrated how a template matching-based algorithm is used to check all connections on a given PCB [9]. They proposed a novel hybrid approach to the automated inspection of printed circuit boards. A model based on the coordinates and connectivity analysis of the circles was formed using some new approaches to edge linking and the fusion of some edge-based and region-based algorithms. A modified Canny edge detector is used as an edge-based algorithm, while an unsupervised learning algorithm is used to differentiate between regions on the PCB. The researchers also defined a membership function, which fuses the above two results. The edge-linking algorithm extracts the connectivity information for the circles using a new approach that bases decisions on fixation points. In addition, Kanimozhi et al. developed certain methodologies for locating and identifying multiple objects in images used for surface mounting device inspection. One of the main challenges for surface mounting device inspection is component placement inspection. Component placement errors, which includes missing, misaligned or incorrectly rotated components, are a major cause of defects and must be detected before and after the solder reflow process. The focus of this work was on automated object-recognition techniques for locating multiple objects using grey-model fitting to produce a generalized template for a set of components. The work uses the normalized cross correlation (NCC) template-matching approach and examines a method for constraining the search space to reduce computational calculations. The search for template positions has been performed exhaustively using a genetic algorithm and the experimental results using a typical PCB image (Figure 8) are reported."}, {"heading": "F. Normal Breast and Mammogram Positioning", "text": "Over the past several years, the application of template matching in medical image processing and analysis has greatly expanded. Sulaiman et al. [18] proposed an expert image processing system based on template matching to locate and determine the symmetrical value between breast mammograms. They implemented a new template matching algorithm using a cross-correlation method. Their 2D crosscorrelation algorithm produced a highly accurate result in the\nmatching process. The correlation method is implemented using the Fast Fourier transform and is modified into a discrete correlation expression for computer usage. Discrete correlation is a mathematical comparison process in which one image is discretely compared to another. The resulting image is a two-dimensional expression of equivalence. In the mammogram viewing process shown in Figure 9, it is important to note the exact orientation of the image. Generally, the breasts are one of the humans symmetrical organs and are best viewed in symmetric orientation. Comparison of the right breast to the left breast is done for the evaluation of symmetry between both sides. In this method, the effectiveness of the proposed template matching system has been evaluated using the sample of breast images. Each sample included the left and right breasts one of each patient. These images are declared symmetrical breasts (normal breasts). For each sample, one side of a breast is established as the template, and another side is established as the search area. The resultant output image is in black and white pixels. The white pixels depict the similarity value, while the black pixels depict the difference value between both images. Therefore, the matching accuracy becomes higher when the white pixels appear more predominantly than the black pixel in the output image. By using the ROI technique, two sample images are created from the original images and are tested for accuracy evaluation of the system. By calculating the white pixels, researchers obtained an understanding of the accuracy of the method, as well as the similarity between the left and right breasts (Figure 9)."}, {"heading": "G. Brain Network Extraction and Optimization", "text": "Recently, researchers have shown great interest in using template matching techniques in medical imaging, with a particular focus on brain imaging. Sarraf et al. [14] [13] [20] used template matching techniques in order to extract a given brain network from magnetic resonance images and also developed a robust decision-making algorithm to optimize the results produced from the matching algorithm. They also experimented with their algorithm in both spatial\nand frequency domains. They used the functional magnetic resonance imaging (fMRI) modality, which revealed that certain neural structures are highly active during periods of rest, referred to as a resting-state fMRI. Several methods have been implemented in order to analyze resting-state fMRI data, and probabilistic independent component analysis (PICA) is currently the most popular technique. The major challenge of using PICA is that resting-state networks are split into several components, and visual extraction can be difficult. Sarraf et al. proposed a fast and precise algorithm based on advanced template matching in a spatial domain such as normalized cross correlation (NCC) adapted to functional images to automatically extract the default mode network (DMN), which is the task of the independent resting state network in the brain using PICA. To do so, the researchers created the DMN template and performed template matching. However, they used an arbitrary method to select the best matched network slices (Figure 10). In\ntheir second approach, Sarraf et al. proposed an adaptive pipeline, as shown in Figure 11, which extracts the brain\nand network slices as candidates, and by performing a semiiterative technique that optimizes the given network and constructs this network using a set of candidates. This robust methodology, which is still based on template matching techniques such as NCC, sum of squared differences (SSD) and dice coefficient (DC), enables researchers to compare the results from each method and choose either the algorithm reconstructed network or their favorite method. In this research scenario, after identifying components within the resting state, the decision-making pipeline selected the components within each method that had the highest matching scores to our DMN template. The final decision of selecting the most prototypical DMN components was made by a comparison between methods. This resulted in a DMN mask that was generated by the components chosen by our decision-making algorithm. To evaluate the accuracy of the decision-maker, a cross correlation between each final mask and the template was measured. Results indicated that the normalized cross correlation method, using both the spatial and frequency domains, and the dice coefficient method generated the optimal DMN mask. This demonstrates the utility of our algorithm in providing an objective method for network extraction (Figures 11 and 12) [19] [22] [21]. The results demonstrated\nthat NCC and dice coefficient methods extracted the most similar components and ultimately created the most accurate DMN mask. Matching based on the spatial domain versus the frequency domain resulted in a better match with the DMN template, suggesting that spatial domain leads to better performance of decision-making pipelines in the identification\nof brain networks."}, {"heading": "IV. CONCLUSION", "text": "In this work, the mathematical basics of template matching techniques and various matching algorithms were studied. Additionally, a wide range of template matching applications in image processing, computer vision, medical image analysis, and in particular brain imaging were reviewed. We also demonstrated that template matching algorithms, whether in spatial or frequency domains, should be accompanied with a post-classification or decision-making step in order to improve the accuracy of the matching system. We concluded that feature-based matching methods should be applied when the structural information matches rather than the intensity information. Furthermore, area-based approaches should be used if they do not have many prominent details and the characteristic information is apparent (colour/gray than shape/size). Finally, it is worth remembering that a given template and the input images must have either statistical dependence or intensity similarities. In the case of intensity similarities, the correlation methods can also be used. From a geometric point of view, only small amounts of shifts and rotations are allowed. Otherwise, the deformable model or shift and scale invariant features should be used.\nDISCLOSURE STATEMENT\nThe authors declare that there is no conflict of interest regarding the publication of this manuscript."}], "references": [{"title": "Faster image template matching in the sum of the absolute value of differences measure", "author": ["M.J. Atallah"], "venue": "IEEE Transactions on Image Processing, vol. 10, no. 4, pp. 659\u2013663, 2001.", "citeRegEx": "1", "shortCiteRegEx": null, "year": 2001}, {"title": "A novel two stage template matching method for rotation and illumination invariance", "author": ["M.-S. Choi", "W.-Y. Kim"], "venue": "Pattern recognition, vol. 35, no. 1, pp. 119\u2013129, 2002.", "citeRegEx": "2", "shortCiteRegEx": null, "year": 2002}, {"title": "Invariance in template matching", "author": ["G. Cox", "G. de Jager"], "venue": "Proc. of 4th South African Workshop on Pattern Recognition, pp. 152\u2013156, 1993.", "citeRegEx": "3", "shortCiteRegEx": null, "year": 1993}, {"title": "Template matching and measures of match in image processing", "author": ["G.S. Cox"], "venue": "University of Cape Town, South Africa, 1995.", "citeRegEx": "4", "shortCiteRegEx": null, "year": 1995}, {"title": "The representation and matching of pictorial structures", "author": ["M.A. Fischler", "R.A. Elschlager"], "venue": "IEEE Transactions on computers, vol. 22, no. 1, pp. 67\u201392, 1973.", "citeRegEx": "5", "shortCiteRegEx": null, "year": 1973}, {"title": "Registration techniques for multisensor remotely sensed imagery", "author": ["L.M. Fonseca", "B. Manjunath"], "venue": "PE & RS- Photogrammetric Engineering & Remote Sensing, vol. 62, no. 9, pp. 1049\u20131056, 1996.", "citeRegEx": "6", "shortCiteRegEx": null, "year": 1996}, {"title": "Single subject fmri test\u2013retest reliability metrics and confounding factors", "author": ["K.J. Gorgolewski", "A.J. Storkey", "M.E. Bastin", "I. Whittle", "C. Pernet"], "venue": "Neuroimage, vol. 69, pp. 231\u2013243, 2013.", "citeRegEx": "7", "shortCiteRegEx": null, "year": 2013}, {"title": "Deformable template models: A review", "author": ["A.K. Jain", "Y. Zhong", "M.-P. Dubuisson-Jolly"], "venue": "Signal processing, vol. 71, no. 2, pp. 109\u2013 129, 1998.", "citeRegEx": "8", "shortCiteRegEx": null, "year": 1998}, {"title": "A review on automatic bare pcb board testing", "author": ["S. Kanimozhi", "K.G. Krishnan"], "venue": "2013.", "citeRegEx": "9", "shortCiteRegEx": null, "year": 2013}, {"title": "Review article: an overview of template matching technique in image processing", "author": ["T. Mahalakshmi", "R. Muthaiah", "P. Swaminathan"], "venue": "Research Journal of Applied Sciences, Engineering and Technology, vol. 4, no. 24, pp. 5469\u20135473, 2012.", "citeRegEx": "10", "shortCiteRegEx": null, "year": 2012}, {"title": "A function space model for digital image sampling and its application in image reconstruction", "author": ["J.P. Oakley", "M.J. Cunningham"], "venue": "Computer vision, graphics, and image processing, vol. 49, no. 2, pp. 171\u2013197, 1990.", "citeRegEx": "11", "shortCiteRegEx": null, "year": 1990}, {"title": "An overview on template matching methodologies and its applications", "author": ["N. Perveen", "D. Kumar", "I. Bhardwaj"], "venue": "IJRCCT, vol. 2, no. 10, pp. 988\u2013995, 2013.", "citeRegEx": "12", "shortCiteRegEx": null, "year": 2013}, {"title": "Brain network extraction from probabilistic ica using functional magnetic resonance images and advanced template matching techniques", "author": ["S. Sarraf", "C. Saverino", "H. Ghaderi", "J. Anderson"], "venue": "Electrical and Computer Engineering (CCECE), 2014 IEEE 27th Canadian Conference on, pp. 1\u20136, IEEE, 2014.", "citeRegEx": "13", "shortCiteRegEx": null, "year": 2014}, {"title": "A robust and adaptive decision-making algorithm for detecting brain networks using functional mri within the spatial and frequency domain", "author": ["S. Sarraf", "C. Saverino", "A.M. Golestani"], "venue": "2016 IEEE- EMBS International Conference on Biomedical and Health Informatics (BHI), pp. 53\u201356, IEEE, 2016.", "citeRegEx": "14", "shortCiteRegEx": null, "year": 2016}, {"title": "A review: Semantic template matching using color-texture features", "author": ["R.K. Singh", "U.P. Singh", "S. Phulre"], "venue": "International Journal of Engineering and Innovative Technology, vol. 1, no. 3, pp. 197\u2013204, 2012.", "citeRegEx": "15", "shortCiteRegEx": null, "year": 2012}, {"title": "Using orientation codes for rotation-invariant template matching", "author": ["F. Ullah", "S. Kaneko"], "venue": "Pattern recognition, vol. 37, no. 2, pp. 201\u2013209, 2004.", "citeRegEx": "16", "shortCiteRegEx": null, "year": 2004}, {"title": "The rubber-mask techniquei. pattern measurement and analysis", "author": ["B. Widrow"], "venue": "Pattern recognition, vol. 5, no. 3, pp. 175IN1177\u2013 176IN2197, 1973.", "citeRegEx": "17", "shortCiteRegEx": null, "year": 1973}, {"title": "An expert image processing system on template matching", "author": ["S.N. Sulaiman", "M.F. Alias", "N.A.M. Isa", "M.F.A. Rahman"], "venue": "International Journal of Computer Science and Network Security, vol. 7, no. 7, pp. 234\u2013238, 2007.", "citeRegEx": "18", "shortCiteRegEx": null, "year": 2007}, {"title": "The associative memory deficit in aging is related to reduced selectivity of brain activity during encoding", "author": ["C. Saverino", "Z. Fatima", "S. Sarraf", "A. Oder", "S.C. Strother", "C.L. Grady"], "venue": "Journal of cognitive neuroscience, 2016.", "citeRegEx": "19", "shortCiteRegEx": null, "year": 2016}, {"title": "ADVANCES IN FUNCTIONAL BRAIN IMAGING: A COMPREHENSIVE SURVEY FOR ENGINEERS AND PHYSICAL SCIENTISTS", "author": ["S. Sarraf", "J. Sun"], "venue": "International Journal of Advanced Research, vol. 4, pp. 640\u2013660, aug 2016.", "citeRegEx": "20", "shortCiteRegEx": null, "year": 2016}, {"title": "Deepad: Alzheimer s disease classification via deep convolutional neural networks using mri and fmri", "author": ["S. Sarraf", "G. Tofighi"], "venue": "bioRxiv, p. 070441, 2016.", "citeRegEx": "21", "shortCiteRegEx": null, "year": 2016}, {"title": "Deep learning-based pipeline to recognize alzheimer s disease using fmri data", "author": ["S. Sarraf", "G. Tofighi"], "venue": "bioRxiv, p. 066910, 2016.", "citeRegEx": "22", "shortCiteRegEx": null, "year": 2016}, {"title": "The utilization of template matching method for license plate recognition: A case study in malaysia", "author": ["N.A. Jalil", "A. Basari", "S. Salam", "N.K. Ibrahim", "M.A. Norasikin"], "venue": "Advanced Computer and Communication Engineering Technology, pp. 1081\u20131090, Springer, 2015.", "citeRegEx": "23", "shortCiteRegEx": null, "year": 2015}], "referenceMentions": [{"referenceID": 3, "context": "The detection and recognition of objects in images is a key research topic in the computer vision community [4].", "startOffset": 108, "endOffset": 111}, {"referenceID": 11, "context": "Template matching tries to answer one of the most basic questions about an image: if there is a certain object in a given image, and where it is found [12].", "startOffset": 151, "endOffset": 155}, {"referenceID": 0, "context": "The ultimate goal is to detect the best technique for the highest matching area [1] [15] [10].", "startOffset": 80, "endOffset": 83}, {"referenceID": 14, "context": "The ultimate goal is to detect the best technique for the highest matching area [1] [15] [10].", "startOffset": 84, "endOffset": 88}, {"referenceID": 9, "context": "The ultimate goal is to detect the best technique for the highest matching area [1] [15] [10].", "startOffset": 89, "endOffset": 93}, {"referenceID": 3, "context": "Measures of match and template matching in two or three dimensional images require a measure of match between two images that indicates the degree of similarity or dissimilarity between them [4].", "startOffset": 191, "endOffset": 194}, {"referenceID": 5, "context": "[6] and are based on a combined", "startOffset": 0, "endOffset": 3}, {"referenceID": 9, "context": "intensities, correction-based methods, optimization methods and mutual information [10].", "startOffset": 83, "endOffset": 87}, {"referenceID": 11, "context": "Additionally, cross-correlation of a given signal or image with itself is called auto-correlation [12].", "startOffset": 98, "endOffset": 102}, {"referenceID": 3, "context": "However, this method is still sensitive to rotation and scale changes, which cause some limitations for deformable templates [4] [12] [10].", "startOffset": 125, "endOffset": 128}, {"referenceID": 11, "context": "However, this method is still sensitive to rotation and scale changes, which cause some limitations for deformable templates [4] [12] [10].", "startOffset": 129, "endOffset": 133}, {"referenceID": 9, "context": "However, this method is still sensitive to rotation and scale changes, which cause some limitations for deformable templates [4] [12] [10].", "startOffset": 134, "endOffset": 138}, {"referenceID": 13, "context": "Here () () represent pixel coordinates [14] [13].", "startOffset": 39, "endOffset": 43}, {"referenceID": 12, "context": "Here () () represent pixel coordinates [14] [13].", "startOffset": 44, "endOffset": 48}, {"referenceID": 3, "context": "for corresponding pixels in f and g in the images under comparison at any stage of the registration process [4].", "startOffset": 108, "endOffset": 111}, {"referenceID": 10, "context": "A function space model to derive a reconstruction filter is optimal where the original and reconstructed images are as similar as possible with respect to a particular similarity measure [11].", "startOffset": 187, "endOffset": 191}, {"referenceID": 13, "context": "Volume-overlap is a simple measure to assess how many of the supra threshold voxels from two t maps occur in the same location [14] [7].", "startOffset": 127, "endOffset": 131}, {"referenceID": 6, "context": "Volume-overlap is a simple measure to assess how many of the supra threshold voxels from two t maps occur in the same location [14] [7].", "startOffset": 132, "endOffset": 135}, {"referenceID": 3, "context": "It is also possible to use redundancy in the calculation of terms for adjacent measures of match to improve efficiency [4].", "startOffset": 119, "endOffset": 122}, {"referenceID": 13, "context": "Additionally, certain researchers have used template matching algorithms in frequency domain by mapping the template and target images to the frequency space using Fast Fourier Transform (FFT) [14] [13].", "startOffset": 193, "endOffset": 197}, {"referenceID": 12, "context": "Additionally, certain researchers have used template matching algorithms in frequency domain by mapping the template and target images to the frequency space using Fast Fourier Transform (FFT) [14] [13].", "startOffset": 198, "endOffset": 202}, {"referenceID": 2, "context": "Moreover, f and g are two-dimensional signals (images) [3].", "startOffset": 55, "endOffset": 58}, {"referenceID": 2, "context": "Based on an assumption that target objects in the image are far apart from each other and the background is uniform, the Fourier Mellin (FM) transform can be utilized as a scale invariant representation or operator of the template and the sub-images at each position in the target image before calculating the measure of match [3].", "startOffset": 327, "endOffset": 330}, {"referenceID": 1, "context": "The DFT magnitude is then calculated for a rotation and scale invariant representation of the image [2] [16].", "startOffset": 100, "endOffset": 103}, {"referenceID": 15, "context": "The DFT magnitude is then calculated for a rotation and scale invariant representation of the image [2] [16].", "startOffset": 104, "endOffset": 108}, {"referenceID": 3, "context": "Wechsler and Zimmerman [4] [3] describe a similar approach in terms of conformal complex", "startOffset": 23, "endOffset": 26}, {"referenceID": 2, "context": "Wechsler and Zimmerman [4] [3] describe a similar approach in terms of conformal complex", "startOffset": 27, "endOffset": 30}, {"referenceID": 0, "context": "Fast template matching and some deformable-based matching algorithms provide quick solutions for object recognition, while algorithm complexity is not very high [1].", "startOffset": 161, "endOffset": 164}, {"referenceID": 16, "context": "The concept of deformable templates was simultaneously introduced in computer vision by Widrow [17] with rubber masks, and by Fischler and Elschlager [5] with spring-loaded templates.", "startOffset": 95, "endOffset": 99}, {"referenceID": 4, "context": "The concept of deformable templates was simultaneously introduced in computer vision by Widrow [17] with rubber masks, and by Fischler and Elschlager [5] with spring-loaded templates.", "startOffset": 150, "endOffset": 153}, {"referenceID": 7, "context": "An overview of various template matching techniques is provided in Figure 3 [8].", "startOffset": 76, "endOffset": 79}, {"referenceID": 11, "context": "Additionally, strong feature extraction will increase the performance of a face recognition system, as shown in Figure 4 [12].", "startOffset": 121, "endOffset": 125}, {"referenceID": 11, "context": "The effectiveness of the method is demonstrated in both open eyes as well as closed eyes through various simulation results, as shown in Figure 5 [12].", "startOffset": 146, "endOffset": 150}, {"referenceID": 22, "context": "to detect and extract Malaysian (Figure 6) licence plates (Figure 7) [23].", "startOffset": 69, "endOffset": 73}, {"referenceID": 8, "context": "demonstrated how a template matching-based algorithm is used to check all connections on a given PCB [9].", "startOffset": 101, "endOffset": 104}, {"referenceID": 17, "context": "[18] proposed an expert image processing system based on template matching to", "startOffset": 0, "endOffset": 4}, {"referenceID": 13, "context": "[14] [13] [20] used template matching techniques in order to extract a given brain network from magnetic resonance images", "startOffset": 0, "endOffset": 4}, {"referenceID": 12, "context": "[14] [13] [20] used template matching techniques in order to extract a given brain network from magnetic resonance images", "startOffset": 5, "endOffset": 9}, {"referenceID": 19, "context": "[14] [13] [20] used template matching techniques in order to extract a given brain network from magnetic resonance images", "startOffset": 10, "endOffset": 14}, {"referenceID": 18, "context": "This demonstrates the utility of our algorithm in providing an objective method for network extraction (Figures 11 and 12) [19] [22] [21].", "startOffset": 123, "endOffset": 127}, {"referenceID": 21, "context": "This demonstrates the utility of our algorithm in providing an objective method for network extraction (Figures 11 and 12) [19] [22] [21].", "startOffset": 128, "endOffset": 132}, {"referenceID": 20, "context": "This demonstrates the utility of our algorithm in providing an objective method for network extraction (Figures 11 and 12) [19] [22] [21].", "startOffset": 133, "endOffset": 137}], "year": 2016, "abstractText": "In most computer vision and image analysis problems, it is necessary to define a similarity measure between two or more different objects or images. Template matching is a classic and fundamental method used to score similarities between objects using certain mathematical algorithms. In this paper, we reviewed the basic concept of matching, as well as advances in template matching and applications such as invariant features or novel applications in medical image analysis. Additionally, deformable models and templates originating from classic template matching were discussed. These models have broad applications in image registration, and they are a fundamental aspect of novel machine vision or deep learning algorithms, such as convolutional neural networks (CNN), which perform shift and scale invariant functions followed by classification. In general, although template matching methods have restrictions which limit their application, they are recommended for use with other object recognition methods as preor post-processing steps. Combining a template matching technique such as normalized cross-correlation or dice coefficient with a robust decision-making algorithm yields a significant improvement in the accuracy rate for object detection and recognition.", "creator": "LaTeX with hyperref package"}}}