{"id": "1705.01020", "review": {"conference": "ACL", "VERSION": "v1", "DATE_OF_SUBMISSION": "2-May-2017", "title": "Modeling Source Syntax for Neural Machine Translation", "abstract": "Even though a linguistics-free sequence to sequence model in neural machine translation (NMT) has certain capability of implicitly learning syntactic information of source sentences, this paper shows that source syntax can be explicitly incorporated into NMT effectively to provide further improvements. Specifically, we linearize parse trees of source sentences to obtain structural label sequences. On the basis, we propose three different sorts of encoders to incorporate source syntax into NMT: 1) Parallel RNN encoder that learns word and label annotation vectors parallelly; 2) Hierarchical RNN encoder that learns word and label annotation vectors in a two-level hierarchy; and 3) Mixed RNN encoder that stitchingly learns word and label annotation vectors over sequences where words and labels are mixed together (e.g., for a number of possible labels and labels).\n\n\n\n\nIn a previous paper, we presented an initial model which would be similar to the current model. The models were implemented in both Python and R for numerical-order evaluation. However, it was not possible to predict how many input input elements should fit into a given input sequence, and this model would fail to accurately predict what output elements would fit into the input sequence, but only predict which input elements should fit into the input sequence. However, the model was modified to support more flexible input selection. The result was a less complex model to provide support for the most commonly applied model, as it did not have all of the necessary data structures to implement the model, and is currently not suitable to make a complete model.\nOur results are consistent with what we previously reported in previous paper. One possible outcome is that the models are more accurate and will be useful for the purposes of a separate model. We believe the model is more accurate than that presented in the original paper because the model was not built as a whole. Furthermore, given the difficulty in generating the model, the model is much more complex.\nA more general problem is that the model is more accurate than the current model. An important limitation of our model is that it does not have the requisite data structures, which is not a real problem in many cases. In one example, an error condition for an input sequence could be found in the text on the right edge of the line and produce errors in the text. As a result, our model fails to provide adequate information about what output elements should fit into a given input sequence. As a result, our model fails to provide adequate information about what output elements should fit into the input sequence", "histories": [["v1", "Tue, 2 May 2017 15:21:46 GMT  (785kb,D)", "http://arxiv.org/abs/1705.01020v1", "Accepted by ACL 2017"]], "COMMENTS": "Accepted by ACL 2017", "reviews": [], "SUBJECTS": "cs.CL", "authors": ["junhui li", "deyi xiong", "zhaopeng tu", "muhua zhu", "min zhang", "guodong zhou"], "accepted": true, "id": "1705.01020"}, "pdf": {"name": "1705.01020.pdf", "metadata": {"source": "CRF", "title": "Modeling Source Syntax for Neural Machine Translation", "authors": ["Junhui Li", "Deyi Xiong", "Zhaopeng Tu", "Muhua Zhu", "Min Zhang", "Guodong Zhou"], "emails": ["gdzhou}@suda.edu.cn", "tuzhaopeng@gmail.com,", "muhuazhu@tencent.com"], "sections": [{"heading": "1 Introduction", "text": "Recently the sequence to sequence model (seq2seq) in neural machine translation (NMT) has achieved certain success over the state-ofthe-art of statistical machine translation (SMT)\n\u2217Work done at Huawei Noah\u2019s Ark Lab, HongKong.\non various language pairs (Bahdanau et al., 2015; Jean et al., 2015; Luong et al., 2015; Luong and Manning, 2015). However, Shi et al. (2016) show that the seq2seq model still fails to capture a lot of deep structural details, even though it is capable of learning certain implicit source syntax from sentence-aligned parallel corpus. Moreover, it requires an additional parsing-task-specific training mechanism to recover the hidden syntax in NMT. As a result, in the absence of explicit linguistic knowledge, the seq2seq model in NMT tends to produce translations that fail to well respect syntax. In this paper, we show that syntax can be well exploited in NMT explicitly by taking advantage of source-side syntax to improve the translation accuracy.\nIn principle, syntax is a promising avenue for translation modeling. This has been verified by tremendous encouraging studies on syntaxbased SMT that substantially improves translation by integrating various kinds of syntactic knowledge (Liu et al., 2006; Marton and Resnik, 2008;\nar X\niv :1\n70 5.\n01 02\n0v 1\n[ cs\n.C L\n] 2\nM ay\n2 01\n7\nShen et al., 2008; Li et al., 2013). While it is yet to be seen how syntax can benefit NMT effectively, we find that translations of NMT sometimes fail to well respect source syntax. Figure 1 (a) shows a Chinese-to-English translation example of NMT. In this example, the NMT seq2seq model incorrectly translates the Chinese noun phrase (i.e., \u65b0 \u751f/xinsheng \u94f6\u884c/yinhang) into a discontinuous phrase in English (i.e., new ... bank) due to the failure of capturing the internal syntactic structure in the input Chinese sentence. Statistics on our development set show that one forth of Chinese noun phrases are translated into discontinuous phrases in English, indicating the substantial disrespect of syntax in NMT translation.1 Figure 1 (b) shows another example with over translation, where the noun phrase \u4e24/liang \u4e2a/ge \u5973\u5b69/nvhai is translated twice in English. Similar to discontinuous translation, over translation usually happens along with the disrespect of syntax which results in the repeated translation of the same source words in multiple positions of the target sentence.\nIn this paper we are not aiming at solving any particular issue, either the discontinuous translation or the over translation. Alternatively, we address how to incorporate explicitly the source syntax to improve the NMT translation accuracy with the expectation of alleviating the issues above in general. Specifically, rather than directly assigning each source word with manually designed syntactic labels, as Sennrich and Haddow (2016) do, we linearize a phrase parse tree into a structural label sequence and let the model automatically learn useful syntactic information. On the basis, we systematically propose and compare several different approaches to incorporating the label sequence into the seq2seq NMT model. Experimentation on Chinese-to-English translation demonstrates that all proposed approaches are able to improve the translation accuracy."}, {"heading": "2 Attention-based NMT", "text": "As a background and a baseline, in this section, we briefly describe the NMT model with an attention mechanism by Bahdanau et al. (2015), which mainly consists of an encoder and a decoder, as shown in Figure 2.\nEncoder The encoding of a source sentence is for1Manually examining 200 random such discontinuously translated noun phrases, we find that 90% of them should be continuously translated according to the reference translation.\nmulated using a pair of neural networks, i.e., two recurrent neural networks (denoted bi-RNN): one reads an input sequence x = (x1, ..., xm) from left to right and outputs a forward sequence of hidden states ( \u2212\u2192 h1, ..., \u2212\u2192 hm), while the other operates from right to left and outputs a backward sequence ( \u2190\u2212 h1, ..., \u2190\u2212 hm). Each source word xj is represented as hj (also referred to as word annotation vector): the concatenation of hidden states \u2212\u2192 hj and \u2190\u2212 hj . Such bi-RNN encodes not only the word itself but also its left and right context, which can provide important evidence for its translation.\nDecoder The decoder is also an RNN that predicts a target sequence y = (y1, ..., yn). Each target word yi is predicted via a multi-layer perceptron (MLP) component which is based on a recurrent hidden state si, the previous predicted word yi\u22121, and a source-side context vector ci. Here, ci is calculated as a weighted sum over source annotation vectors (h1, ..., hm). The weight vector \u03b1i \u2208 Rm over source annotation vectors is obtained by an attention model, which captures the correspondences between the source and the target languages. The attention weight \u03b1ij is computed based on the previous recurrent hidden state si\u22121 and source annotation vector hj ."}, {"heading": "3 NMT with Source Syntax", "text": "The conventional NMT models treat a sentence as a sequence of words and ignore external knowledge, failing to effectively capture various kinds of inherent structure of the sentence. To leverage external knowledge, specifically the syntax in the source side, we focus on the parse tree of a sentence and propose three different NMT models that explicitly consider the syntactic structure into encoding. Our purpose is to inform the NMT model the structural context of each word in its corresponding parse tree with the goal that the learned annotation vectors (h1, ..., hm) encode not\nI love dogs\nonly the information of words and their surroundings, but also structural context in the parse tree. In the rest of this section, we use English sentences as examples to explain our methods."}, {"heading": "3.1 Syntax Representation", "text": "To obtain the structural context of a word in its parse tree, ideally the model should not only capture and remember the whole parse tree structure, but also discriminate the contexts of any two different words. However, considering the lack of efficient way to directly model structural information, an alternative way is to linearize the phrase parse tree into a sequence of structural labels and learn the structural context through the sequence. For example, Figure 3(c) shows the structural label sequence of Figure 3(b) in a simple way following a depth-first traversal order. Note that linearizing a parse tree in a depth-first traversal order into a sequence of structural labels has also been widely adopted in recent advances in neural syntactic parsing (Vinyals et al., 2015; Choe and Charniak, 2016), suggesting that the linearized sequence can be viewed as an alternative to its tree structure.2\n2We have also tried to include the ending brackets in the structural label sequence, as what (Vinyals et al., 2015; Choe\nhwj and\n\u2190\u2212\u2212\nhwj are the forward and\nbackward hidden states for word wj , \u2212\u2192 hli and \u2190\u2212 hli are for structural label li, ewj is the word embedding for word wj , and \u2295 is for concatenation operator.\nThere is no doubt that the structural label sequence is much longer than its word sequence. In order to obtain the structural label annotation vector for wi in word sequence, we simply look for wi\u2019s part-of-speech (POS) tag in the label sequence and view the tag\u2019s annotation vector as wi\u2019s label annotation vector. This is because wi\u2019s POS tag location can also represent wi\u2019s location in the parse tree. For example, in Figure 3, word w1 in (a) maps to l3 in (c) since l3 is the POS tag of w1. Likewise, w2 maps to l5 and w3 to l7. That is to say, we use l3\u2019s learned annotation vector as w1\u2019s label annotation vector.\nand Charniak, 2016) do. However, the performance gap is very small by adding the ending brackets or not."}, {"heading": "3.2 RNN Encoders with Source Syntax", "text": "In the next, we first propose two different encoders to augment word annotation vector with its corresponding label annotation vector, each of which consists of two RNNs 3: in one encoder, the two RNNs work independently (i.e., Parallel RNN Encoder) while in another encoder the two RNNs work in a hierarchical way (i.e., Hierarchical RNN Encoder). The difference between the two encoders lies in how the two RNNs interact. Then, we propose the third encoder with a single RNN, which learns word and label annotation vectors stitchingly (i.e., Mixed RNN Encoder). Since any of the above three approaches focuses only on the encoder as to generate source annotation vectors along with structural information, we keep the rest part of the NMT models unchanged.\nParallel RNN Encoder Figure 4 (a) illustrates our Parallel RNN encoder, which includes two parallel RNNs: i.e., a word RNN and a structural label RNN. On the one hand, the word RNN, as in conventional NMT models, takes a word sequence as input and output a word annotation vector for each word. On the other hand, the structural label RNN takes the structural label sequence of the word sequence as input and obtains a label annotation vector for each label. Besides, we concatenate each word\u2019s word annotation vector and its POS tag\u2019s label annotation vector as the final annotation vector for the word. For example, the final annotation vector for word love in Figure 4 (a) is [ \u2212\u2212\u2192 hw2; \u2190\u2212\u2212 hw2; \u2212\u2192 hl5; \u2190\u2212 hl5], where the first two subitems [ \u2212\u2212\u2192 hw2; \u2190\u2212\u2212 hw2] are the word annotation vector and the rest two subitems [ \u2212\u2192 hl5; \u2190\u2212 hl5] are its POS tag VBP\u2019s label annotation vector.\nHierarchical RNN Encoder Partially inspired by the model architecture of GNMT (Wu et al., 2016) which consists of multiple layers of LSTM RNNs, we propose a two-layer model architecture in which the lower layer is the structural label RNN while the upper layer is the word RNN, as shown in Figure 4 (b). We put the word RNN in the upper layer because each item in the word sequence can map into an item in the structural label sequence, while this does not hold if the order of the two RNNs is reversed. As shown in Figure 4 (b), for example, the POS tag VBP\u2019s label annotation vector [ \u2212\u2192 hl5, \u2190\u2212 hl5] is concatenated with word\n3Hereafter, we simplify bi-RNN as RNN.\nlove\u2019s word embedding ew2 to feed as the input to the word RNN.\nMixed RNN Encoder Figure 5 presents our Mixed RNN encoder. Similarly, the sequence of input is the linearization of its parse tree (as in Figure 3 (b)) following a depth-first traversal order, but being mixed with both words and structural labels in a stitching way. It shows that the RNN learns annotation vectors for both the words and the structural labels, though only the annotation vectors of words are further fed to decoding (e.g., ([ \u2212\u2192 h4, \u2190\u2212 h4], [ \u2212\u2192 h7, \u2190\u2212 h7], [ \u2212\u2192 h10, \u2190\u2212 h10])). Even though the annotation vectors of structural labels are not directly fed forward for decoding, the error signal is back propagated along the word sequence and allows the annotation vectors of structural labels being updated accordingly."}, {"heading": "3.3 Comparison of RNN Encoders with Source Syntax", "text": "Though all the three encoders model both word sequence and structural label sequence, the differences lie in their respective model architecture with respect to the degree of coupling the two sequences:\n\u2022 In the Parallel RNN encoder, the word RNN and structural label RNN work in a parallel way. That is to say, the error signal back propagated from the word sequence would not affect the structural label RNN, and vice versa. In contrast, in the Hierarchical RNN encoder, the error signal back propagated from the word sequence has a direct impact on the structural label annotation vectors, and thus on the structural label embeddings. Finally, the Mixed RNN encoder ties the structural label sequence and word sequence together in the closest way. Therefore, the degrees of coupling the word and structural\nlabel sequences in these three encoders are like this: Mixed RNN encoder > Hierarchical RNN encoder > Parallel RNN encoder.\n\u2022 Figure 4 and Figure 5 suggest that the Mixed RNN encoder is the simplest. Moreover, comparing to conventional NMT encoders, the difference lies only in the length of the input sequence. Statistics on our training data reveal that the Mixed RNN encoder approximately triples the input sequence length compared to conventional NMT encoders."}, {"heading": "4 Experimentation", "text": "We have presented our approaches to incorporating the source syntax into NMT encoders. In this section, we evaluate their effectiveness on Chinese-to-English translation."}, {"heading": "4.1 Experimental Settings", "text": "Our training data for the translation task consists of 1.25M sentence pairs extracted from LDC corpora, with 27.9M Chinese words and 34.5M English words respectively.4 We choose NIST MT 06 dataset (1664 sentence pairs) as our development set, and NIST MT 02, 03, 04, and 05 datasets (878, 919, 1788 and 1082 sentence pairs, respectively) as our test sets.5 To get the source syntax for sentences on the source-side, we parse the Chinese sentences with Berkeley Parser 6 (Petrov and Klein, 2007) trained on Chinese TreeBank 7.0 (Xue et al., 2005). We use the case insensitive 4-gram NIST BLEU score (Papineni et al., 2002) for the translation task.\nFor efficient training of neural networks, we limit the maximum sentence length on both source and target sides to 50. We also limit both the source and target vocabularies to the most frequent 16K words in Chinese and English, covering approximately 95.8% and 98.2% of the two corpora respectively. All the out-of-vocabulary words are mapped to a special token UNK. Besides, the word embedding dimension is 620 and the size of a hidden layer is 1000. All the other settings are the same as in Bahdanau et al.(2015).\n4The corpora include LDC2002E18, LDC2003E07, LDC2003E14, Hansards portion of LDC2004T07, LDC2004T08 and LDC2005T06.\n5http://www.itl.nist.gov/iad/mig/ tests/mt/\n6https://github.com/slavpetrov/ berkeleyparser\nThe inventory of structural labels includes 16 phrase labels and 32 POS tags. In both our Parallel RNN encoder and Hierarchical RNN encoder, we set the embedding dimension of these labels as 100 and the size of a hidden layer as 100. Besides, the maximum structural label sequence length is set to 100. In our Mixed RNN encoder, since we only have one input sequence, we equally treat the structural labels and words (i.e., a structural label is also initialized with 620 dimension embedding). Compared to the baseline NMT model, the only different setting is that we increase the maximum sentence length on source-side from 50 to 150.\nWe compare our method with two state-of-theart models of SMT and NMT:\n\u2022 cdec (Dyer et al., 2010): an open source hierarchical phrase-based SMT system (Chiang, 2007) with default configuration and a 4-gram language model trained on the target portion of the training data.7\n\u2022 RNNSearch: a re-implementation of the attentional NMT system (Bahdanau et al., 2015) with slight changes taken from dl4mt tutorial.8 For the activation function f of an RNN, RNNSearch uses the gated recurrent unit (GRU) recently proposed by (Cho et al., 2014b). It incorporates dropout (Hinton et al., 2012) on the output layer and improves the attention model by feeding the lastly generated word. We use AdaDelta (Zeiler, 2012) to optimize model parameters in training with the mini-batch size of 80. For translation, a beam search with size 10 is employed."}, {"heading": "4.2 Experiment Results", "text": "Table 1 shows the translation performances measured in BLEU score. Clearly, all the proposed NMT models with source syntax improve the translation accuracy over all test sets, although there exist considerable differences among different variants.\nParameters The three proposed models introduce new parameters in different ways. As a baseline model, RNNSearch has 60.6M parameters. Due to the infrastructure similarity, the Parallel RNN system and the Hierarchical RNN system introduce\n7https://github.com/redpony/cdec 8https://github.com/nyu-dl/\ndl4mt-tutorial\nthe similar size of additional parameters, resulting from the RNN model for structural label sequences (about 0.1M parameters) and catering either the augmented annotation vectors (as shown in Figure 4 (a)) or the augmented word embeddings (as shown in Figure 4 (b)) (the remain parameters). It is not surprising that the Mixed RNN system does not require any additional parameters since though the input sequence becomes longer, we keep the vocabulary size unchanged, resulting in no additional parameters.\nSpeed Introducing the source syntax slightly slows down the training speed. When running on a single GPU GeForce GTX 1080, the baseline model speeds 153 minutes per epoch with 14K updates while the proposed structural label RNNs in both Parallel RNN and Hierarchical RNN systems only increases the training time by about 6% (thanks to the small size of structural label embeddings and annotation vectors), and the Mixed RNN system spends 26% more training time to cater the triple sized input sequence.\nComparison with the baseline NMT model (RNNSearch) While all the three proposed NMT models outperform RNNSearch, the Parallel RNN system and the Hierarchical RNN system achieve similar accuracy (e.g., 36.6 v.s. 36.7). Besides, the Mixed RNN system achieves the best accuracy overall test sets with the only exception of NIST MT 02. Over all test sets, it outperforms RNNSearch by 1.4 BLEU points and outperforms the other two improved NMT models by 0.3\u223c0.4 BLEU points, suggesting the benefits of high degree of coupling the word sequence and the structural label sequence. This is very encouraging since the Mixed RNN encoder is the simplest, without introducing new parameters and with only slight additional training time.\nComparison with the SMT model (cdec) Table 1 also shows that all NMT systems outperform the SMT system. This is very consistent with other studies on Chinese-to-English translation (Mi et al., 2016; Tu et al., 2017b; Wang et al., 2017)."}, {"heading": "5 Analysis", "text": "As the proposed Mixed RNN system achieves the best performance, we further look at the RNNSearch system and the Mixed RNN system to explore more on how syntactic information helps in translation."}, {"heading": "5.1 Effects on Long Sentences", "text": "Following Bahdanau et al. (2015), we group sentences of similar lengths together and compute BLEU scores. Figure 6 presents the BLEU scores over different lengths of input sentences. It shows that Mixed RNN system outperforms RNNSearch over sentences with all different lengths. It also shows that the performance drops substantially\nwhen the length of input sentences increases. This performance trend over the length is consistent with the findings in (Cho et al., 2014a; Tu et al., 2016, 2017a). We also observe that the NMT systems perform surprisingly bad on sentences over 50 in length, especially compared to the performance of SMT system (i.e., cdec). We think that the bad behavior of NMT systems towards long sentences (e.g., length of 50) is due to the following two reasons: (1) the maximum source sentence length limit is set as 50 in training, 9 making the learned models not ready to translate sentences over the maximum length limit; (2) NMT systems tend to stop early for long input sentences."}, {"heading": "5.2 Analysis on Word Alignment", "text": "Due to the capability of carrying syntactic information in source annotation vectors, we conjecture that our model with source syntax is also beneficial for alignment. To test this hypothesis, we carry out experiments of the word alignment task on the evaluation dataset from Liu and Sun (2015), which contains 900 manually aligned Chinese-English sentence pairs. We force the decoder to output reference translations, as to get automatic alignments between input sentences and their reference translations. To evaluate alignment performance, we report the alignment error rate (AER) (Och and Ney, 2003) in Table 2.\nTable 2 shows that source syntax information improves the attention model as expected by maintaining an annotation vector summarizing structural information on each source word."}, {"heading": "5.3 Analysis on Phrase Alignment", "text": "The above subsection examines the alignment performance at the word level. In this subsection, we turn to phrase alignment analysis by moving from word unit to phrase unit. Given a source phrase XP, we use word alignments to examine if the phrase is translated continuously (Cont.), or dis-\n9Though the maximum source length limit in Mixed RNN system is set to 150, it approximately contains 50 words in maximum.\ncontinuously (Dis.), or if it is not translated at all (Un.).\nThere are some phrases, such as noun phrases (NPs), prepositional phrases (PPs) that we usually expect to have a continuous translation. With respect to several such types of phrases, Table 3 shows how these phrases are translated. From the table, we see that translations of RNNSearch system do not respect source syntax very well. For example, in RNNSearch translations, 57.3%, 33.6%, and 9.1% of PPs are translated continuously, discontinuously, and untranslated, respectively. Fortunately, our Mixed RNN system is able to have more continuous translation for those phrases. Table 3 also suggests that there is still much room for NMT to show more respect to syntax."}, {"heading": "5.4 Analysis on Over Translation", "text": "To estimate the over translation generated by NMT, we propose ratio of over translation (ROT):\nROT =\n\u2211 wi t(wi)\n|w| (1)\nwhere |w| is the number of words in consideration, t(wi) is the times of over translation for word wi. Given a word w and its translation e = e1e2 . . . en, we have:\nt(w) = |e| \u2212 |uniq(e)| (2)\nwhere |e| is the number of words in w\u2019s translation e, while |uniq(e)| is the number of unique words in e. For example, if a source word \u9999\n\u6e2f/xiangkang is translated as hong kong hong kong, we say it being over translated 2 times.\nTable 4 presents ROT grouped by some typical POS tags. It is not surprising that RNNSearch system has high ROT with respect to POS tags of NR (proper noun) and CD (cardinal number): this is due to the fact that the two POS tags include high percentage of unknown words which tend to be translated multiple times in translation. Words of DT (determiner) are another source of over translation since they are usually translated to multiple the in English. It also shows that by introducing source syntax, Mixed RNN system alleviates the over translation issue by 18%: ROT drops from 5.5% to 4.5%."}, {"heading": "5.5 Analysis on Rare Word Translation", "text": "We analyze the translation of source-side rare words that are mapped to a special token UNK. Given a rare word w, we examine if it is translated into a non-UNK word (non-UNK), UNK (UNK), or if it is not translated at all (Un.).\nTable 5 shows how source-side rare words are translated. The four POS tags listed in the table account for about 90% of all rare words in the test sets. It shows that in Mixed RNN system is more likely to translate source-side rare words into UNK on the target side. This is reasonable since the source side rare words tends to be translated into rare words in the target side. Moreover, it is hard to obtain its correct non-UNK translation when a source-side rare word is replaced as UNK.\nNote that our approach is compatible with with approaches of open vocabulary. Taking the sub-\nword approach (Sennrich et al., 2016) as an example, for a word on the source side which is divided into several subword units, we can synthesize subPOS nodes that cover these units. For example, if misunderstand/VB is divided into units of mis and understand, we construct substructure (VB (VB-F mis) (VB-I understand))."}, {"heading": "6 Related Work", "text": "While there has been substantial work on linguistically motivated SMT, approaches that leverage syntax for NMT start to shed light very recently. Generally speaking, NMT can provide a flexible mechanism for adding linguistic knowledge, thanks to its strong capability of automatically learning feature representations.\nEriguchi et al. (2016) propose a tree-tosequence model that learns annotation vectors not only for terminal words, but also for non-terminal nodes. They also allow the attention model to align target words to non-terminal nodes. Our approach is similar to theirs by using source-side phrase parse tree. However, our Mixed RNN system, for example, incorporates syntax information by learning annotation vectors of syntactic labels and words stitchingly, but is still a sequenceto-sequence model, with no extra parameters and with less increased training time.\nSennrich and Haddow (2016) define a few linguistically motivated features that are attached to each individual words. Their features include lemmas, subword tags, POS tags, dependency labels, etc. They concatenate feature embeddings with word embeddings and feed the concatenated em-\nbeddings into the NMT encoder. On the contrast, we do not specify any feature, but let the model implicitly learn useful information from the structural label sequence.\nShi et al. (2016) design a few experiments to investigate if the NMT system without external linguistic input is capable of learning syntactic information on the source-side as a by-product of training. However, their work is not focusing on improving NMT with linguistic input. Moreover, we analyze what syntax is disrespected in translation from several new perspectives.\nGarc\u0131\u0301a-Mart\u0131\u0301nez et al. (2016) generalize NMT outputs as lemmas and morphological factors in order to alleviate the issues of large vocabulary and out-of-vocabulary word translation. The lemmas and corresponding factors are then used to generate final words in target language. Though they use linguistic input on the target side, they are limited to the word level features. Phrase level, or even sentence level linguistic features are harder to obtain for a generation task such as machine translation, since this would require incremental parsing of the hypotheses at test time."}, {"heading": "7 Conclusion", "text": "In this paper, we have investigated whether and how source syntax can explicitly help NMT to improve its translation accuracy.\nTo obtain syntactic knowledge, we linearize a parse tree into a structural label sequence and let the model automatically learn useful information through it. Specifically, we have described three different models to capture the syntax knowledge, i.e., Parallel RNN, Hierarchical RNN, and Mixed RNN. Experimentation on Chinese-to-English translation shows that all proposed models yield improvements over a state-ofthe-art baseline NMT system. It is also interesting to note that the simplest model (i.e., Mixed RNN) achieves the best performance, resulting in obtaining significant improvements of 1.4 BLEU points on NIST MT 02 to 05.\nIn this paper, we have also analyzed the translation behavior of our improved system against the state-of-the-art NMT baseline system from several perspectives. Our analysis shows that there is still much room for NMT translation to be consistent with source syntax. In our future work, we expect several developments that will shed more light on utilizing source syntax, e.g., designing novel syn-\ntactic features (e.g., features showing the syntactic role that a word is playing) for NMT, and employing the source syntax to constrain and guild the attention models."}, {"heading": "Acknowledgments", "text": "The authors would like to thank three anonymous reviewers for providing helpful comments, and also acknowledge Xing Wang, Xiangyu Duan, Zhengxian Gong for useful discussions. This work was supported by National Natural Science Foundation of China (Grant No. 61525205, 61331011, 61401295)."}], "references": [{"title": "Neural machine translation by jointly learning to align and translate", "author": ["Dzmitry Bahdanau", "Kyunghyun Cho", "Yoshua Bengio."], "venue": "Proceedings of ICLR 2015.", "citeRegEx": "Bahdanau et al\\.,? 2015", "shortCiteRegEx": "Bahdanau et al\\.", "year": 2015}, {"title": "Hierarchical phrase-based translation", "author": ["David Chiang."], "venue": "Computational Linguistics 33(2):201\u2013228.", "citeRegEx": "Chiang.,? 2007", "shortCiteRegEx": "Chiang.", "year": 2007}, {"title": "On the properties of neural machinetranslation: Encoder-decoder approaches", "author": ["Kyunghyun Cho", "Bart van Merrienboer", "Dzmitry Bahdanau", "Yoshua Bengio."], "venue": "Proceedings of SSST 2014. pages 103\u2013111.", "citeRegEx": "Cho et al\\.,? 2014a", "shortCiteRegEx": "Cho et al\\.", "year": 2014}, {"title": "Learning phrase representations using rnn encoder-decoder for statistical machine translation", "author": ["Kyunghyun Cho", "Bart van Merrienboer", "Caglar Gulcehre", "Dzmitry Bahdanau", "Fethi Bougares", "Holger Schwenk", "Yoshua Bengio."], "venue": "Proceedings", "citeRegEx": "Cho et al\\.,? 2014b", "shortCiteRegEx": "Cho et al\\.", "year": 2014}, {"title": "Parsing as language modeling", "author": ["Do Kook Choe", "Eugene Charniak."], "venue": "Proceedings of EMNLP 2016. pages 2331\u20132336.", "citeRegEx": "Choe and Charniak.,? 2016", "shortCiteRegEx": "Choe and Charniak.", "year": 2016}, {"title": "cdec: A decoder, alignment, and learning framework for finite-state and context-free translation models", "author": ["Chris Dyer", "Adam Lopez", "Juri Ganitkevitch", "Jonathan Weese", "Ferhan Ture", "Phil Blunsom", "Hendra Setiawan", "Vladimir Eidelman", "Philip Resnik"], "venue": null, "citeRegEx": "Dyer et al\\.,? \\Q2010\\E", "shortCiteRegEx": "Dyer et al\\.", "year": 2010}, {"title": "Tree-to-sequence attentional neural machine translation", "author": ["Akiko Eriguchi", "Kazuma Hashimoto", "Yoshimasa Tsuruoka."], "venue": "Proceedings of ACL 2016. pages 823\u2013833.", "citeRegEx": "Eriguchi et al\\.,? 2016", "shortCiteRegEx": "Eriguchi et al\\.", "year": 2016}, {"title": "Factored neural machine translation", "author": ["Mercedes Garc\u0131\u0301a-Mart\u0131\u0301nez", "Loic Barrault", "Fethi Bougares"], "venue": null, "citeRegEx": "Garc\u0131\u0301a.Mart\u0131\u0301nez et al\\.,? \\Q2016\\E", "shortCiteRegEx": "Garc\u0131\u0301a.Mart\u0131\u0301nez et al\\.", "year": 2016}, {"title": "Improving neural networks", "author": ["Geoffrey E. Hinton", "Nitish Srivastava", "Alex Krizhevsky", "Ilya Sutskever", "Ruslan R. Salakhutdinov"], "venue": null, "citeRegEx": "Hinton et al\\.,? \\Q2012\\E", "shortCiteRegEx": "Hinton et al\\.", "year": 2012}, {"title": "Montreal neural machine translation systems for wmt\u201915", "author": ["S\u00e9bastien Jean", "Orhan Firat", "Kyunghyun Cho", "Roland Memisevic", "Yoshua Bengio."], "venue": "Proceedings of WMT 2015. pages 134\u2013140.", "citeRegEx": "Jean et al\\.,? 2015", "shortCiteRegEx": "Jean et al\\.", "year": 2015}, {"title": "Statistical significance tests for machine translation evaluation", "author": ["Philipp Koehn."], "venue": "Proceedings of EMNLP 2004. pages 388\u2013395.", "citeRegEx": "Koehn.,? 2004", "shortCiteRegEx": "Koehn.", "year": 2004}, {"title": "Modeling syntactic and semantic structures in hierarchical phrase-based translation", "author": ["Junhui Li", "Philip Resnik", "Hal Daum\u00e9 III."], "venue": "Proceedings of HLT-NAACL 2013. pages 540\u2013549.", "citeRegEx": "Li et al\\.,? 2013", "shortCiteRegEx": "Li et al\\.", "year": 2013}, {"title": "Treeto-string alignment template for statistical machine translation", "author": ["Yang Liu", "Qun Liu", "Shouxun Lin."], "venue": "Proceedings of ACL-COLING 2006. pages 609\u2013616.", "citeRegEx": "Liu et al\\.,? 2006", "shortCiteRegEx": "Liu et al\\.", "year": 2006}, {"title": "Contrastive unsupervised word alignment with non-local features", "author": ["Yang Liu", "Maosong Sun."], "venue": "Proceedings of AAAI 2015. pages 857\u2013868.", "citeRegEx": "Liu and Sun.,? 2015", "shortCiteRegEx": "Liu and Sun.", "year": 2015}, {"title": "Stanford neural machine translation systems for spoken language domains", "author": ["Minh-Thang Luong", "Christopher D. Manning."], "venue": "Proceedings of IWSLT 2015. pages 76\u201379.", "citeRegEx": "Luong and Manning.,? 2015", "shortCiteRegEx": "Luong and Manning.", "year": 2015}, {"title": "Effective approaches to attentionbased neural machine translation", "author": ["Minh-Thang Luong", "Hieu Pham", "Christopher D. Manning."], "venue": "Proceedings of EMNLP 2015. pages 1412\u20131421.", "citeRegEx": "Luong et al\\.,? 2015", "shortCiteRegEx": "Luong et al\\.", "year": 2015}, {"title": "Soft syntactic constraints for hierarchical phrased-based translation", "author": ["Yuval Marton", "Philip Resnik."], "venue": "Proceedings of ACL-HLT 2008. pages 1003\u20131011.", "citeRegEx": "Marton and Resnik.,? 2008", "shortCiteRegEx": "Marton and Resnik.", "year": 2008}, {"title": "Supervised attentions for neural machine translation", "author": ["Haitao Mi", "Zhiguo Wang", "Abe Ittycheriah."], "venue": "Proceedings of EMNLP 2016. pages 2283\u20132288.", "citeRegEx": "Mi et al\\.,? 2016", "shortCiteRegEx": "Mi et al\\.", "year": 2016}, {"title": "A systematic comparison of various statistical alignment models", "author": ["Franz J. Och", "Hermann Ney."], "venue": "Computational Linguistics 29(1):19\u201351.", "citeRegEx": "Och and Ney.,? 2003", "shortCiteRegEx": "Och and Ney.", "year": 2003}, {"title": "BLEU: A method for automatic evaluation of machine translation", "author": ["Kishore Papineni", "Salim Roukos", "Todd Ward", "WeiJing Zhu."], "venue": "Proceedings of ACL 2002. pages 311\u2013318.", "citeRegEx": "Papineni et al\\.,? 2002", "shortCiteRegEx": "Papineni et al\\.", "year": 2002}, {"title": "Improved inference for unlexicalized parsing", "author": ["Slav Petrov", "Dan Klein."], "venue": "Proceedings of HLTNAACL 2007. pages 404\u2013411.", "citeRegEx": "Petrov and Klein.,? 2007", "shortCiteRegEx": "Petrov and Klein.", "year": 2007}, {"title": "Linguistic input features improve neural machine translation", "author": ["Rico Sennrich", "Barry Haddow."], "venue": "Proceedings of the First Conference on Machine Translation. pages 83\u201391.", "citeRegEx": "Sennrich and Haddow.,? 2016", "shortCiteRegEx": "Sennrich and Haddow.", "year": 2016}, {"title": "Neural machine translation of rare words with subword units", "author": ["Rico Sennrich", "Barry Haddow", "Alexandra Birch."], "venue": "Proceedings of ACL 2016. pages 1715\u20131725.", "citeRegEx": "Sennrich et al\\.,? 2016", "shortCiteRegEx": "Sennrich et al\\.", "year": 2016}, {"title": "A new string-to-dependency machine translation algorithm with a target dependency language model", "author": ["Libin Shen", "Jinxi Xu", "Ralph Weischedel."], "venue": "Proceedings of ACL-HLT 2008. pages 577\u2013585.", "citeRegEx": "Shen et al\\.,? 2008", "shortCiteRegEx": "Shen et al\\.", "year": 2008}, {"title": "Does string-based neural MT learn source syntax? In Proceedings of EMNLP 2016", "author": ["Xing Shi", "Inkit Padhi", "Kevin Knight."], "venue": "pages 1526\u20131534.", "citeRegEx": "Shi et al\\.,? 2016", "shortCiteRegEx": "Shi et al\\.", "year": 2016}, {"title": "Context gates for neural machine translation", "author": ["Zhaopeng Tu", "Yang Liu", "Zhengdong Lu", "Xiaohua Liu", "Hang Li."], "venue": "Transactions of the Association for Computational Linguistics 5:87\u201399.", "citeRegEx": "Tu et al\\.,? 2017a", "shortCiteRegEx": "Tu et al\\.", "year": 2017}, {"title": "Neural machine translation with reconstruction", "author": ["Zhaopeng Tu", "Yang Liu", "Lifeng Shang", "Xiaohua Liu", "Hang Li."], "venue": "Proceedings of AAAI 2017. pages 3097\u20133103.", "citeRegEx": "Tu et al\\.,? 2017b", "shortCiteRegEx": "Tu et al\\.", "year": 2017}, {"title": "Modeling coverage for neural machine translation", "author": ["Zhaopeng Tu", "Zhengdong Lu", "Yang Liu", "Xiaohua Liu", "Hang Li."], "venue": "Proceedings of ACL 2016. pages 76\u201385.", "citeRegEx": "Tu et al\\.,? 2016", "shortCiteRegEx": "Tu et al\\.", "year": 2016}, {"title": "Grammar as a foreign language", "author": ["Oriol Vinyals", "Lukasz Kaiser", "Terry Koo", "Slav Petrov", "Ilya Sutskever", "Geoffrey Hinton."], "venue": "Proceedings of NIPS 2015.", "citeRegEx": "Vinyals et al\\.,? 2015", "shortCiteRegEx": "Vinyals et al\\.", "year": 2015}, {"title": "Neural machine translation advised by statistical machine translation", "author": ["Xing Wang", "Zhengdong Lu", "Zhaopeng Tu", "Hang Li", "Deyi Xiong", "Min Zhang."], "venue": "Proceedings of AAAI 2017. pages 3330\u2013 3336.", "citeRegEx": "Wang et al\\.,? 2017", "shortCiteRegEx": "Wang et al\\.", "year": 2017}, {"title": "The Penn Chinese Treebank: Phrase structure annotation of a large corpus", "author": ["Nianwen Xue", "Fei Xia", "Fu-Dong Chiou", "Martha Palmer."], "venue": "Natural Language Engineering 11(2):207\u2013238.", "citeRegEx": "Xue et al\\.,? 2005", "shortCiteRegEx": "Xue et al\\.", "year": 2005}, {"title": "ADADELTA: An adaptive learning rate method", "author": ["Matthew D. Zeiler."], "venue": "arXiv:1212.5701.", "citeRegEx": "Zeiler.,? 2012", "shortCiteRegEx": "Zeiler.", "year": 2012}], "referenceMentions": [{"referenceID": 0, "context": "on various language pairs (Bahdanau et al., 2015; Jean et al., 2015; Luong et al., 2015; Luong and Manning, 2015).", "startOffset": 26, "endOffset": 113}, {"referenceID": 9, "context": "on various language pairs (Bahdanau et al., 2015; Jean et al., 2015; Luong et al., 2015; Luong and Manning, 2015).", "startOffset": 26, "endOffset": 113}, {"referenceID": 15, "context": "on various language pairs (Bahdanau et al., 2015; Jean et al., 2015; Luong et al., 2015; Luong and Manning, 2015).", "startOffset": 26, "endOffset": 113}, {"referenceID": 14, "context": "on various language pairs (Bahdanau et al., 2015; Jean et al., 2015; Luong et al., 2015; Luong and Manning, 2015).", "startOffset": 26, "endOffset": 113}, {"referenceID": 0, "context": "on various language pairs (Bahdanau et al., 2015; Jean et al., 2015; Luong et al., 2015; Luong and Manning, 2015). However, Shi et al. (2016) show that the seq2seq model still fails to capture a lot of deep structural details, even though it is capable of learning certain implicit source syntax from sentence-aligned parallel corpus.", "startOffset": 27, "endOffset": 142}, {"referenceID": 11, "context": ", 2008; Li et al., 2013). While it is yet to be seen how syntax can benefit NMT effectively, we find that translations of NMT sometimes fail to well respect source syntax. Figure 1 (a) shows a Chinese-to-English translation example of NMT. In this example, the NMT seq2seq model incorrectly translates the Chinese noun phrase (i.e., \u65b0 \u751f/xinsheng \u94f6\u884c/yinhang) into a discontinuous phrase in English (i.e., new ... bank) due to the failure of capturing the internal syntactic structure in the input Chinese sentence. Statistics on our development set show that one forth of Chinese noun phrases are translated into discontinuous phrases in English, indicating the substantial disrespect of syntax in NMT translation.1 Figure 1 (b) shows another example with over translation, where the noun phrase \u4e24/liang \u4e2a/ge \u5973\u5b69/nvhai is translated twice in English. Similar to discontinuous translation, over translation usually happens along with the disrespect of syntax which results in the repeated translation of the same source words in multiple positions of the target sentence. In this paper we are not aiming at solving any particular issue, either the discontinuous translation or the over translation. Alternatively, we address how to incorporate explicitly the source syntax to improve the NMT translation accuracy with the expectation of alleviating the issues above in general. Specifically, rather than directly assigning each source word with manually designed syntactic labels, as Sennrich and Haddow (2016) do, we linearize a phrase parse tree into a structural label sequence and let the model automatically learn useful syntactic information.", "startOffset": 8, "endOffset": 1508}, {"referenceID": 0, "context": "As a background and a baseline, in this section, we briefly describe the NMT model with an attention mechanism by Bahdanau et al. (2015), which mainly consists of an encoder and a decoder, as shown in Figure 2.", "startOffset": 114, "endOffset": 137}, {"referenceID": 28, "context": "Note that linearizing a parse tree in a depth-first traversal order into a sequence of structural labels has also been widely adopted in recent advances in neural syntactic parsing (Vinyals et al., 2015; Choe and Charniak, 2016), suggesting that the linearized sequence can be viewed as an alternative to its tree structure.", "startOffset": 181, "endOffset": 228}, {"referenceID": 4, "context": "Note that linearizing a parse tree in a depth-first traversal order into a sequence of structural labels has also been widely adopted in recent advances in neural syntactic parsing (Vinyals et al., 2015; Choe and Charniak, 2016), suggesting that the linearized sequence can be viewed as an alternative to its tree structure.", "startOffset": 181, "endOffset": 228}, {"referenceID": 20, "context": "5 To get the source syntax for sentences on the source-side, we parse the Chinese sentences with Berkeley Parser 6 (Petrov and Klein, 2007) trained on Chinese TreeBank 7.", "startOffset": 115, "endOffset": 139}, {"referenceID": 30, "context": "0 (Xue et al., 2005).", "startOffset": 2, "endOffset": 20}, {"referenceID": 19, "context": "We use the case insensitive 4-gram NIST BLEU score (Papineni et al., 2002) for the translation task.", "startOffset": 51, "endOffset": 74}, {"referenceID": 0, "context": "All the other settings are the same as in Bahdanau et al.(2015).", "startOffset": 42, "endOffset": 64}, {"referenceID": 5, "context": "\u2022 cdec (Dyer et al., 2010): an open source hierarchical phrase-based SMT system (Chiang, 2007) with default configuration and a 4-gram language model trained on the target portion of the training data.", "startOffset": 7, "endOffset": 26}, {"referenceID": 1, "context": ", 2010): an open source hierarchical phrase-based SMT system (Chiang, 2007) with default configuration and a 4-gram language model trained on the target portion of the training data.", "startOffset": 61, "endOffset": 75}, {"referenceID": 0, "context": "\u2022 RNNSearch: a re-implementation of the attentional NMT system (Bahdanau et al., 2015) with slight changes taken from dl4mt tutorial.", "startOffset": 63, "endOffset": 86}, {"referenceID": 3, "context": "8 For the activation function f of an RNN, RNNSearch uses the gated recurrent unit (GRU) recently proposed by (Cho et al., 2014b).", "startOffset": 110, "endOffset": 129}, {"referenceID": 8, "context": "It incorporates dropout (Hinton et al., 2012) on the output layer and improves the attention model by feeding the lastly generated word.", "startOffset": 24, "endOffset": 45}, {"referenceID": 31, "context": "We use AdaDelta (Zeiler, 2012) to optimize model parameters in training with the mini-batch size of 80.", "startOffset": 16, "endOffset": 30}, {"referenceID": 10, "context": "01, tested by bootstrap resampling (Koehn, 2004).", "startOffset": 35, "endOffset": 48}, {"referenceID": 17, "context": "This is very consistent with other studies on Chinese-to-English translation (Mi et al., 2016; Tu et al., 2017b; Wang et al., 2017).", "startOffset": 77, "endOffset": 131}, {"referenceID": 26, "context": "This is very consistent with other studies on Chinese-to-English translation (Mi et al., 2016; Tu et al., 2017b; Wang et al., 2017).", "startOffset": 77, "endOffset": 131}, {"referenceID": 29, "context": "This is very consistent with other studies on Chinese-to-English translation (Mi et al., 2016; Tu et al., 2017b; Wang et al., 2017).", "startOffset": 77, "endOffset": 131}, {"referenceID": 0, "context": "Following Bahdanau et al. (2015), we group sentences of similar lengths together and compute BLEU scores.", "startOffset": 10, "endOffset": 33}, {"referenceID": 2, "context": "This performance trend over the length is consistent with the findings in (Cho et al., 2014a; Tu et al., 2016, 2017a).", "startOffset": 74, "endOffset": 117}, {"referenceID": 18, "context": "To evaluate alignment performance, we report the alignment error rate (AER) (Och and Ney, 2003) in Table 2.", "startOffset": 76, "endOffset": 95}, {"referenceID": 13, "context": "To test this hypothesis, we carry out experiments of the word alignment task on the evaluation dataset from Liu and Sun (2015), which contains 900 manually aligned Chinese-English sentence pairs.", "startOffset": 108, "endOffset": 127}, {"referenceID": 22, "context": "word approach (Sennrich et al., 2016) as an example, for a word on the source side which is divided into several subword units, we can synthesize subPOS nodes that cover these units.", "startOffset": 14, "endOffset": 37}, {"referenceID": 6, "context": "Eriguchi et al. (2016) propose a tree-tosequence model that learns annotation vectors not only for terminal words, but also for non-terminal nodes.", "startOffset": 0, "endOffset": 23}, {"referenceID": 6, "context": "Eriguchi et al. (2016) propose a tree-tosequence model that learns annotation vectors not only for terminal words, but also for non-terminal nodes. They also allow the attention model to align target words to non-terminal nodes. Our approach is similar to theirs by using source-side phrase parse tree. However, our Mixed RNN system, for example, incorporates syntax information by learning annotation vectors of syntactic labels and words stitchingly, but is still a sequenceto-sequence model, with no extra parameters and with less increased training time. Sennrich and Haddow (2016) define a few linguistically motivated features that are attached to each individual words.", "startOffset": 0, "endOffset": 586}], "year": 2017, "abstractText": "Even though a linguistics-free sequence to sequence model in neural machine translation (NMT) has certain capability of implicitly learning syntactic information of source sentences, this paper shows that source syntax can be explicitly incorporated into NMT effectively to provide further improvements. Specifically, we linearize parse trees of source sentences to obtain structural label sequences. On the basis, we propose three different sorts of encoders to incorporate source syntax into NMT: 1) Parallel RNN encoder that learns word and label annotation vectors parallelly; 2) Hierarchical RNN encoder that learns word and label annotation vectors in a two-level hierarchy; and 3) Mixed RNN encoder that stitchingly learns word and label annotation vectors over sequences where words and labels are mixed. Experimentation on Chinese-to-English translation demonstrates that all the three proposed syntactic encoders are able to improve translation accuracy. It is interesting to note that the simplest RNN encoder, i.e., Mixed RNN encoder yields the best performance with an significant improvement of 1.4 BLEU points. Moreover, an in-depth analysis from several perspectives is provided to reveal how source syntax benefits NMT.", "creator": "LaTeX with hyperref package"}}}